(window.webpackJsonp=window.webpackJsonp||[]).push([["embed"],{"+cYh":function(e,t,n){"undefined"!=typeof window&&function(t,n){e.exports=n()}(0,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function a(){}function s(e,t,n,r,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new function(e,t,n){this.fn=e,this.context=t,this.once=n||!1}(n,r||e,a),o=i?i+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],s]:e._events[o].push(s):(e._events[o]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new a:delete e._events[t]}function l(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),l.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,s=new Array(a);r<a;r++)s[r]=n[r].fn;return s},l.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},l.prototype.emit=function(e,t,n,r,a,s){var o=i?i+e:e;if(!this._events[o])return!1;var l,u,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,a),!0;case 6:return c.fn.call(c.context,t,n,r,a,s),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,r);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},l.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,n,r){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||r&&!s.once||n&&s.context!==n||o(this,a);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==t||r&&!s[l].once||n&&s[l].context!==n)&&u.push(s[l]);u.length?this._events[a]=1===u.length?u[0]:u:o(this,a)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&o(this,t)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,e.exports=l},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,n){!function(t){var n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,r=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=s.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=s.normalizePath(i.path),s.buildURLFromParts(i)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=r.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(d)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=s}()},"./node_modules/webworkify-webpack/index.js":function(e,t,n){function r(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var r=n(n.s=ENTRY_MODULE);return r.default||r}var i="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+i+").*?\\)";function s(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e){return!isNaN(1*e)}function l(e,t,r){var l={};l[r]=[];var u=t.toString(),c=u.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!c)return l;for(var d,h=c[1],f=new RegExp("(\\\\n|\\W)"+s(h)+a,"g");d=f.exec(u);)"dll-reference"!==d[3]&&l[r].push(d[3]);for(f=new RegExp("\\("+s(h)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+a,"g");d=f.exec(u);)e[d[2]]||(l[r].push(d[1]),e[d[2]]=n(d[1]).m),l[d[2]]=l[d[2]]||[],l[d[2]].push(d[4]);for(var p=Object.keys(l),g=0;g<p.length;g++)for(var v=0;v<l[p[g]].length;v++)o(l[p[g]][v])&&(l[p[g]][v]=1*l[p[g]][v]);return l}function u(e){return Object.keys(e).reduce(function(t,n){return t||e[n].length>0},!1)}e.exports=function(e,t){t=t||{};var i={main:n.m},a=t.all?{main:Object.keys(i.main)}:function(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};u(n);)for(var a=Object.keys(n),s=0;s<a.length;s++){var o=a[s],c=n[o].pop();if(i[o]=i[o]||{},!i[o][c]&&e[o][c]){i[o][c]=!0,r[o]=r[o]||[],r[o].push(c);for(var d=l(e,e[o][c],o),h=Object.keys(d),f=0;f<h.length;f++)n[h[f]]=n[h[f]]||[],n[h[f]]=n[h[f]].concat(d[h[f]])}}return r}(i,e),s="";Object.keys(a).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;a[e][t];)t++;a[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",s=s+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a[e].map(function(t){return JSON.stringify(t)+": "+i[e][t].toString()}).join(",")+"});\n"}),s=s+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.main.map(function(e){return JSON.stringify(e)+": "+i.main[e].toString()}).join(",")+"}))(self);";var o=new window.Blob([s],{type:"text/javascript"});if(t.bare)return o;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(o),d=new window.Worker(c);return d.objectURL=c,d}},"./src/crypt/decrypter.js":function(e,t,n){"use strict";n.r(t);var r=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),i=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();var a=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n},t.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],s=n[3],o=this.invSubMix,l=o[0],u=o[1],c=o[2],d=o[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var v=p^p<<1^p<<2^p<<3^p<<4;v=v>>>8^255&v^99,e[f]=v,t[v]=f;var m=h[f],y=h[m],_=h[y],b=257*h[v]^16843008*v;r[f]=b<<24|b>>>8,i[f]=b<<16|b>>>16,a[f]=b<<8|b>>>24,s[f]=b,b=16843009*_^65537*y^257*m^16843008*f,l[v]=b<<24|b>>>8,u[v]=b<<16|b>>>16,c[v]=b<<8|b>>>24,d[v]=b,f?(f=m^h[h[h[_^m]]],p^=h[h[p]]):f=p=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,s,o,l,u=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),h=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],v=p[1],m=p[2],y=p[3];for(a=0;a<u;a++)a<i?o=c[a]=t[a]:(l=o,a%i==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=f[a/i|0]<<24):i>6&&a%i==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),c[a]=o=(c[a-i]^l)>>>0);for(s=0;s<u;s++)a=u-s,l=3&s?c[a]:c[a-4],d[s]=s<4||a<=4?l:g[h[l>>>24]]^v[h[l>>>16&255]]^m[h[l>>>8&255]]^y[h[255&l]],d[s]=d[s]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,n,r){for(var i,a,s,o,l,u,c,d,h,f,p,g,v,m,y=this.keySize+6,_=this.invKeySchedule,b=this.invSBox,A=this.invSubMix,E=A[0],w=A[1],S=A[2],T=A[3],k=this.uint8ArrayToUint32Array_(n),x=k[0],D=k[1],C=k[2],R=k[3],L=new Int32Array(e),P=new Int32Array(L.length),I=this.networkToHostOrderSwap;t<L.length;){for(h=I(L[t]),f=I(L[t+1]),p=I(L[t+2]),g=I(L[t+3]),l=h^_[0],u=g^_[1],c=p^_[2],d=f^_[3],v=4,m=1;m<y;m++)i=E[l>>>24]^w[u>>16&255]^S[c>>8&255]^T[255&d]^_[v],a=E[u>>>24]^w[c>>16&255]^S[d>>8&255]^T[255&l]^_[v+1],s=E[c>>>24]^w[d>>16&255]^S[l>>8&255]^T[255&u]^_[v+2],o=E[d>>>24]^w[l>>16&255]^S[u>>8&255]^T[255&c]^_[v+3],l=i,u=a,c=s,d=o,v+=4;i=b[l>>>24]<<24^b[u>>16&255]<<16^b[c>>8&255]<<8^b[255&d]^_[v],a=b[u>>>24]<<24^b[c>>16&255]<<16^b[d>>8&255]<<8^b[255&l]^_[v+1],s=b[c>>>24]<<24^b[d>>16&255]<<16^b[l>>8&255]<<8^b[255&u]^_[v+2],o=b[d>>>24]<<24^b[l>>16&255]<<16^b[u>>8&255]<<8^b[255&c]^_[v+3],v+=3,P[t]=I(i^x),P[t+1]=I(o^D),P[t+2]=I(s^C),P[t+3]=I(a^R),x=h,D=f,C=p,R=g,t+=4}return r?function(e){var t=e.byteLength,n=t&&new DataView(e).getUint8(t-1);return n?e.slice(0,t-n):e}(P.buffer):P.buffer},t.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),s=n("./src/errors.ts"),o=n("./src/utils/logger.js"),l=n("./src/events.js"),u=n("./src/utils/get-self-scope.js"),c=Object(u.getSelfScope)(),d=function(){function e(e,t,n){var r=(void 0===n?{}:n).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var a=c.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.decrypt=function(e,t,n,s){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(o.logger.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new a),u.expandKey(t),s(u.decrypt(e,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(o.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new i(c,t)),this.fastAesKey.expandKey().then(function(i){new r(c,n).decrypt(e,i).catch(function(r){l.onWebCryptoError(r,e,t,n,s)}).then(function(e){s(e)})}).catch(function(r){l.onWebCryptoError(r,e,t,n,s)})}},t.onWebCryptoError=function(e,t,n,r,i){this.config.enableSoftwareAES?(o.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,r,i)):(o.logger.error("decrypting error : "+e.message),this.observer.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},t.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=d},"./src/demux/demuxer-inline.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/events.js"),i=n("./src/errors.ts"),a=n("./src/crypt/decrypter.js"),s=n("./src/polyfills/number.js"),o=n("./src/utils/logger.js"),l=n("./src/utils/get-self-scope.js");function u(e,t){return 255===e[t]&&240==(246&e[t+1])}function c(e,t){return 1&e[t+1]?7:9}function d(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function h(e,t){return!!(t+1<e.length&&u(e,t))}function f(e,t){if(h(e,t)){var n=c(e,t);if(t+n>=e.length)return!1;var r=d(e,t);if(r<=n)return!1;var i=t+r;if(i===e.length||i+1<e.length&&u(e,i))return!0}return!1}function p(e,t,n,a,s){if(!e.samplerate){var l=function(e,t,n,a){var s,l,u,c,d,h=navigator.userAgent.toLowerCase(),f=a,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(s=1+((192&t[n+2])>>>6),!((l=(60&t[n+2])>>>2)>p.length-1))return c=(1&t[n+2])<<2,c|=(192&t[n+3])>>>6,o.logger.log("manifest codec:"+a+",ADTS data:type:"+s+",sampleingIndex:"+l+"["+p[l]+"Hz],channelConfig:"+c),/firefox/i.test(h)?l>=6?(s=5,d=new Array(4),u=l-3):(s=2,d=new Array(2),u=l):-1!==h.indexOf("android")?(s=2,d=new Array(2),u=l):(s=5,d=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&l>=6?u=l-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(l>=6&&1===c||/vivaldi/i.test(h))||!a&&1===c)&&(s=2,d=new Array(2)),u=l)),d[0]=s<<3,d[0]|=(14&l)>>1,d[1]|=(1&l)<<7,d[1]|=c<<3,5===s&&(d[1]|=(14&u)>>1,d[2]=(1&u)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:p[l],channelCount:c,codec:"mp4a.40."+s,manifestCodec:f};e.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}(t,n,a,s);e.config=l.config,e.samplerate=l.samplerate,e.channelCount=l.channelCount,e.codec=l.codec,e.manifestCodec=l.manifestCodec,o.logger.log("parsed codec:"+e.codec+",rate:"+l.samplerate+",nb channel:"+l.channelCount)}}function g(e){return 9216e4/e}function v(e,t,n,r,i){var a=function(e,t,n,r,i){var a,s,o=e.length;if(a=c(e,t),s=d(e,t),(s-=a)>0&&t+a+s<=o)return{headerLength:a,frameLength:s,stamp:n+r*i}}(t,n,r,i,g(e.samplerate));if(a){var s=a.stamp,o=a.headerLength,l=a.frameLength,u={unit:t.subarray(n+o,n+o+l),pts:s,dts:s};return e.samples.push(u),{sample:u,length:l+o}}}var m=n("./src/demux/id3.js"),y=function(){function e(e,t,n){this.observer=e,this.config=n,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(m.default.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(f(e,t))return o.logger.log("ADTS sync word found !"),!0;return!1},t.append=function(e,t,n,r){for(var i=this._audioTrack,a=m.default.getID3Data(e,0)||[],l=m.default.getTimeStamp(a),u=Object(s.isFiniteNumber)(l)?90*l:9e4*t,c=0,d=u,f=e.length,g=a.length,y=[{pts:d,dts:d,data:a}];g<f-1;)if(h(e,g)&&g+5<f){p(i,this.observer,e,g,i.manifestCodec);var _=v(i,e,g,u,c);if(!_){o.logger.log("Unable to parse AAC frame");break}g+=_.length,d=_.sample.pts,c++}else m.default.isHeader(e,g)?(a=m.default.getID3Data(e,g),y.push({pts:d,dts:d,data:a}),g+=a.length):g++;this.remuxer.remux(i,{samples:[]},{samples:y,inputTimeScale:9e4},{samples:[]},t,n,r)},t.destroy=function(){},e}(),_=n("./src/demux/mp4demuxer.js"),b={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,n,r,i){if(!(n+24>t.length)){var a=this.parseHeader(t,n);if(a&&n+a.frameLength<=t.length){var s=r+i*(9e4*a.samplesPerFrame/a.sampleRate),o={unit:t.subarray(n,n+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(o),{sample:o,length:a.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3,s=e[t+2]>>1&1;if(1!==n&&0!==i&&15!==i&&3!==a){var o=3===n?3-r:3===r?3:4,l=1e3*b.BitratesMap[14*o+i-1],u=3===n?0:2===n?1:2,c=b.SamplingRateMap[3*u+a],d=e[t+3]>>6==3?1:2,h=b.SamplesCoefficients[n][r],f=b.BytesInSlot[r],p=8*h*f;return{sampleRate:c,channelCount:d,frameLength:parseInt(h*l/c+s,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),r=4;n&&n.frameLength&&(r=n.frameLength);var i=t+r;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}},A=b,E=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&o.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){var t,n=8,r=8;for(t=0;t<e;t++)0!==r&&(r=(n+this.readEG()+256)%256),n=0===r?n:r},t.readSPS=function(){var e,t,n,r,i,a,s,o=0,l=0,u=0,c=0,d=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),v=this.skipEG.bind(this),m=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),e=d(),h(5),g(3),d(),m(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var _=f();if(3===_&&g(1),m(),m(),g(1),p())for(a=3!==_?8:12,s=0;s<a;s++)p()&&y(s<6?16:64)}m();var b=f();if(0===b)f();else if(1===b)for(g(1),v(),v(),t=f(),s=0;s<t;s++)v();m(),g(1),n=f(),r=f(),0===(i=h(1))&&g(1),g(1),p()&&(o=f(),l=f(),u=f(),c=f());var A=[1,1];if(p()&&p())switch(d()){case 1:A=[1,1];break;case 2:A=[12,11];break;case 3:A=[10,11];break;case 4:A=[16,11];break;case 5:A=[40,33];break;case 6:A=[24,11];break;case 7:A=[20,11];break;case 8:A=[32,11];break;case 9:A=[80,33];break;case 10:A=[18,11];break;case 11:A=[15,11];break;case 12:A=[64,33];break;case 13:A=[160,99];break;case 14:A=[4,3];break;case 15:A=[3,2];break;case 16:A=[2,1];break;case 255:A=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(n+1)-2*o-2*l),height:(2-i)*(r+1)*16-(i?2:4)*(u+c),pixelRatio:A}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),w=function(){function e(e,t,n,r){this.decryptdata=n,this.discardEPB=r,this.decrypter=new a.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},t.decryptAacSample=function(e,t,n,r){var i=e[t].unit,a=i.subarray(16,i.length-i.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),o=this;this.decryptBuffer(s,function(a){a=new Uint8Array(a),i.set(a,16),r||o.decryptAacSamples(e,t+1,n)})},t.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<=e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n},t.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,r=32;r<=e.length-16;r+=160,n+=16)e.set(t.subarray(n,n+16),r);return e},t.decryptAvcSample=function(e,t,n,r,i,a){var s=this.discardEPB(i.data),o=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(o.buffer,function(o){i.data=l.getAvcDecryptedUnit(s,o),a||l.decryptAvcSamples(e,t,n+1,r)})},t.decryptAvcSamples=function(e,t,n,r){for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var a=i[n];if(!(a.length<=48||1!==a.type&&5!==a.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,a,s),!s)return}}}},e}(),S={video:1,audio:2,id3:3,text:4},T=function(){function e(e,t,n,r){this.observer=e,this.config=n,this.typeSupported=r,this.remuxer=t,this.sampleAes=null,this.pmtUnknownTypes={}}var t=e.prototype;return t.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new w(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var n=e._syncOffset(t);return!(n<0)&&(n&&o.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),!0)},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:S[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},t.resetInitSegment=function(t,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=r,this._duration=i},t.resetTimeStamp=function(){},t.append=function(t,n,a,s){var l,u,c,d,h,f=t.length,p=!1;this.pmtUnknownTypes={},this.contiguous=a;var g=this.pmtParsed,v=this._avcTrack,m=this._audioTrack,y=this._id3Track,_=v.pid,b=m.pid,A=y.pid,E=this._pmtId,w=v.pesData,S=m.pesData,T=y.pesData,k=this._parsePAT,x=this._parsePMT.bind(this),D=this._parsePES,C=this._parseAVCPES.bind(this),R=this._parseAACPES.bind(this),L=this._parseMPEGPES.bind(this),P=this._parseID3PES.bind(this),I=e._syncOffset(t);for(f-=(f+I)%188,l=I;l<f;l+=188)if(71===t[l]){if(u=!!(64&t[l+1]),c=((31&t[l+1])<<8)+t[l+2],(48&t[l+3])>>4>1){if((d=l+5+t[l+4])===l+188)continue}else d=l+4;switch(c){case _:u&&(w&&(h=D(w))&&C(h,!1),w={data:[],size:0}),w&&(w.data.push(t.subarray(d,l+188)),w.size+=l+188-d);break;case b:u&&(S&&(h=D(S))&&(m.isAAC?R(h):L(h)),S={data:[],size:0}),S&&(S.data.push(t.subarray(d,l+188)),S.size+=l+188-d);break;case A:u&&(T&&(h=D(T))&&P(h),T={data:[],size:0}),T&&(T.data.push(t.subarray(d,l+188)),T.size+=l+188-d);break;case 0:u&&(d+=t[d]+1),E=this._pmtId=k(t,d);break;case E:u&&(d+=t[d]+1);var O=x(t,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(_=O.avc)>0&&(v.pid=_),(b=O.audio)>0&&(m.pid=b,m.isAAC=O.isAAC),(A=O.id3)>0&&(y.pid=A),p&&!g&&(o.logger.log("reparse from beginning"),p=!1,l=I-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});w&&(h=D(w))?(C(h,!0),v.pesData=null):v.pesData=w,S&&(h=D(S))?(m.isAAC?R(h):L(h),m.pesData=null):(S&&S.size&&o.logger.log("last AAC PES packet truncated,might overlap between fragments"),m.pesData=S),T&&(h=D(T))?(P(h),y.pesData=null):y.pesData=T,null==this.sampleAes?this.remuxer.remux(m,v,y,this._txtTrack,n,a,s):this.decryptAndRemux(m,v,y,this._txtTrack,n,a,s)},t.decryptAndRemux=function(e,t,n,r,i,a,s){if(e.samples&&e.isAAC){var o=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){o.decryptAndRemuxAvc(e,t,n,r,i,a,s)})}else this.decryptAndRemuxAvc(e,t,n,r,i,a,s)},t.decryptAndRemuxAvc=function(e,t,n,r,i,a,s){if(t.samples){var o=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){o.remuxer.remux(e,t,n,r,i,a,s)})}else this.remuxer.remux(e,t,n,r,i,a,s)},t.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},t._trackUnknownPmt=function(e,t,n){var r=this.pmtUnknownTypes[e]||0;return 0===r&&(this.pmtUnknownTypes[e]=0,t.call(o.logger,n)),this.pmtUnknownTypes[e]++,r},t._parsePMT=function(e,t,n,r){var i,a,s={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!r){this._trackUnknownPmt(e[t],o.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===s.audio&&(s.audio=a);break;case 21:-1===s.id3&&(s.id3=a);break;case 219:if(!r){this._trackUnknownPmt(e[t],o.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===s.avc&&(s.avc=a);break;case 3:case 4:n?-1===s.audio&&(s.audio=a,s.isAAC=!1):this._trackUnknownPmt(e[t],o.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(e[t],o.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(e[t],o.logger.log,"Unknown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return s},t._parsePES=function(e){var t,n,r,i,a,s,l,u,c=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var h=new Uint8Array(d[0].length+d[1].length);h.set(d[0]),h.set(d[1],d[0].length),d[0]=h,d.splice(1,1)}if(1===((t=d[0])[0]<<16)+(t[1]<<8)+t[2]){if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;if(192&(n=t[7])&&((s=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(s-=8589934592),64&n?((l=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(l-=8589934592),s-l>54e5&&(o.logger.warn(Math.round((s-l)/9e4)+"s delta between PTS and DTS, align them"),s=l)):l=s),u=(i=t[8])+9,e.size<=u)return null;e.size-=u,a=new Uint8Array(e.size);for(var f=0,p=d.length;f<p;f++){var g=(t=d[f]).byteLength;if(u){if(u>g){u-=g;continue}t=t.subarray(u),g-=u,u=0}a.set(t,c),c+=g}return r&&(r-=i+3),{data:a,pts:s,dts:l,len:r}}return null},t.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var n=t.samples,r=n.length;if(isNaN(e.pts)){if(!r)return void t.dropped++;var i=n[r-1];e.pts=i.pts,e.dts=i.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(r||this.contiguous)?(e.id=r,n.push(e)):t.dropped++}e.debug.length&&o.logger.log(e.pts+"/"+e.dts+":"+e.debug)},t._parseAVCPES=function(e,t){var n,r,i,a=this,s=this._avcTrack,o=this._parseAVCNALu(e.data),l=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this),d=function(e,t,n,r){return{key:e,pts:t,dts:n,units:[],debug:r}};e.data=null,l&&o.length&&!s.audFound&&(c(l,s),l=this.avcSample=d(!1,e.pts,e.dts,"")),o.forEach(function(t){switch(t.type){case 1:r=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.frame=!0;var o=t.data;if(u&&o.length>4){var h=new E(o).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:r=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:r=!0,(n=new E(a.discardEPB(t.data))).readUByte();for(var f=0,p=0,g=!1,v=0;!g&&n.bytesAvailable>1;){f=0;do{f+=v=n.readUByte()}while(255===v);p=0;do{p+=v=n.readUByte()}while(255===v);if(4===f&&0!==n.bytesAvailable){if(g=!0,181===n.readUByte())if(49===n.readUShort())if(1195456820===n.readUInt())if(3===n.readUByte()){var y=n.readUByte(),_=31&y,b=[y,n.readUByte()];for(i=0;i<_;i++)b.push(n.readUByte()),b.push(n.readUByte()),b.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:b})}}else if(5===f&&0!==n.bytesAvailable){if(g=!0,p>16){var A=[];for(i=0;i<16;i++)A.push(n.readUByte().toString(16)),3!==i&&5!==i&&7!==i&&9!==i||A.push("-");var w=p-16,S=new Uint8Array(w);for(i=0;i<w;i++)S[i]=n.readUByte();a._insertSampleInOrder(a._txtTrack.samples,{pts:e.pts,payloadType:f,uuid:A.join(""),userDataBytes:S,userData:Object(m.utf8ArrayToStr)(S.buffer)})}}else if(p<n.bytesAvailable)for(i=0;i<p;i++)n.readUByte()}break;case 7:if(r=!0,u=!0,!s.sps){var T=(n=new E(t.data)).readSPS();s.width=T.width,s.height=T.height,s.pixelRatio=T.pixelRatio,s.sps=[t.data],s.duration=a._duration;var k=t.data.subarray(1,4),x="avc1.";for(i=0;i<3;i++){var D=k[i].toString(16);D.length<2&&(D="0"+D),x+=D}s.codec=x}break;case 8:r=!0,s.pps||(s.pps=[t.data]);break;case 9:r=!1,s.audFound=!0,l&&c(l,s),l=a.avcSample=d(!1,e.pts,e.dts,"");break;case 12:r=!1;break;default:r=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}l&&r&&l.units.push(t)}),t&&l&&(c(l,s),this.avcSample=null)},t._insertSampleInOrder=function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;r>=0;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)},t._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var n=this._avcTrack.samples;t=n[n.length-1]}if(t){var r=t.units;e=r[r.length-1]}return e},t._parseAVCNALu=function(e){var t,n,r,i,a=0,s=e.byteLength,o=this._avcTrack,l=o.naluState||0,u=l,c=[],d=-1;for(-1===l&&(d=0,i=31&e[0],l=0,a=1);a<s;)if(t=e[a++],l)if(1!==l)if(t)if(1===t){if(d>=0)r={data:e.subarray(d,a-l-1),type:i},c.push(r);else{var h=this._getLastNalUnit();if(h&&(u&&a<=4-u&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-u)),(n=a-l-1)>0)){var f=new Uint8Array(h.data.byteLength+n);f.set(h.data,0),f.set(e.subarray(0,n),h.data.byteLength),h.data=f}}a<s?(d=a,i=31&e[a],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(d>=0&&l>=0&&(r={data:e.subarray(d,s),type:i,state:l},c.push(r)),0===c.length){var p=this._getLastNalUnit();if(p){var g=new Uint8Array(p.data.byteLength+e.byteLength);g.set(p.data,0),g.set(e,p.data.byteLength),p.data=g}}return o.naluState=l,c},t.discardEPB=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===i[0]&&(s++,i.shift()),n[a]=e[s];return n},t._parseAACPES=function(e){var t,n,a,s,l,u,c,d=this._audioTrack,f=e.data,m=e.pts,y=this.aacOverFlow,_=this.aacLastPTS;if(y){var b=new Uint8Array(y.byteLength+f.byteLength);b.set(y,0),b.set(f,y.byteLength),f=b}for(a=0,l=f.length;a<l-1&&!h(f,a);a++);if(a&&(a<l-1?(u="AAC PES did not start with ADTS header,offset:"+a,c=!1):(u="no ADTS header found in AAC PES",c=!0),o.logger.warn("parsing error:"+u),this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:c,reason:u}),c))return;if(p(d,this.observer,f,a,this.audioCodec),n=0,t=g(d.samplerate),y&&_){var A=_+t;Math.abs(A-m)>1&&(o.logger.log("AAC: align PTS for overlapping frames by "+Math.round((A-m)/90)),m=A)}for(;a<l;){if(h(f,a)){if(a+5<l){var E=v(d,f,a,m,n);if(E){a+=E.length,s=E.sample.pts,n++;continue}}break}a++}y=a<l?f.subarray(a,l):null,this.aacOverFlow=y,this.aacLastPTS=s},t._parseMPEGPES=function(e){for(var t=e.data,n=t.length,r=0,i=0,a=e.pts;i<n;)if(A.isHeader(t,i)){var s=A.appendFrame(this._audioTrack,t,i,a,r);if(!s)break;i+=s.length,r++}else i++},t._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),k=function(){function e(e,t,n){this.observer=e,this.config=n,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){var t,n,r=m.default.getID3Data(e,0);if(r&&void 0!==m.default.getTimeStamp(r))for(t=r.length,n=Math.min(e.length-1,t+100);t<n;t++)if(A.probe(e,t))return o.logger.log("MPEG Audio sync word found !"),!0;return!1},t.append=function(e,t,n,r){for(var i=m.default.getID3Data(e,0),a=m.default.getTimeStamp(i),s=void 0!==a?90*a:9e4*t,o=i.length,l=e.length,u=0,c=0,d=this._audioTrack,h=[{pts:s,dts:s,data:i}];o<l;)if(A.isHeader(e,o)){var f=A.appendFrame(d,e,o,s,u);if(!f)break;o+=f.length,c=f.sample.pts,u++}else m.default.isHeader(e,o)?(i=m.default.getID3Data(e,o),h.push({pts:c,dts:c,data:i}),o+=i.length):o++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,n,r)},t.destroy=function(){},e}(),x=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),D=Math.pow(2,32)-1,C=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,s,l,s,o),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,a=i;i--;)r+=n[i].byteLength;for((t=new Uint8Array(r))[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),i=0,r=8;i<a;i++)t.set(n[i],r),r+=n[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var r=Math.floor(n/(D+1)),i=Math.floor(n%(D+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))},e.moov=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))},e.mvhd=function(t,n){n*=t;var r=Math.floor(n/(D+1)),i=Math.floor(n%(D+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var n,r,i=t.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,r,i,a=[],s=[];for(n=0;n<t.sps.length;n++)i=(r=t.sps[n]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));for(n=0;n<t.pps.length;n++)i=(r=t.pps[n]).byteLength,s.push(i>>>8&255),s.push(255&i),s=s.concat(Array.prototype.slice.call(r));var o=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(s))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,r=t.duration*t.timescale,i=t.width,a=t.height,s=Math.floor(r/(D+1)),o=Math.floor(r%(D+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,n){var r=e.sdtp(t),i=t.id,a=Math.floor(n/(D+1)),s=Math.floor(n%(D+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,r.length+16+20+8+16+8+8),r)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var r,i,a,s,o,l,u=t.samples||[],c=u.length,d=12+16*c,h=new Uint8Array(d);for(n+=8+d,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<c;r++)a=(i=u[r]).duration,s=i.size,o=i.flags,l=i.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*r);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var n,r=e.moov(t);return(n=new Uint8Array(e.FTYP.byteLength+r.byteLength)).set(e.FTYP),n.set(r,e.FTYP.byteLength),n},e}(),R=9e4;function L(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);var i=e*t*n;return r?Math.round(i):i}function P(e,t){return void 0===t&&(t=!1),L(e,1e3,1/R,t)}function I(e,t){return void 0===t&&(t=1),L(e,R,1/t)}var O,N=I(10),M=I(.2),F=function(){function e(e,t,n,r){this.observer=e,this.config=t,this.typeSupported=n;var i=navigator.userAgent;this.isSafari=r&&r.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},t.resetInitSegment=function(){this.ISGenerated=!1},t.remux=function(e,t,n,i,a,s,l){if(this.ISGenerated||this.generateIS(e,t,a),this.ISGenerated){var u=e.samples.length,c=t.samples.length,d=a,h=a;if(u&&c){var f=(a>0?e.samples[0].dts-t.samples[0].dts:e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;d+=Math.max(0,f),h+=Math.max(0,-f)}if(u){e.timescale||(o.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,a));var p,g=this.remuxAudio(e,d,s,l);if(c)g&&(p=g.endPTS-g.startPTS),t.timescale||(o.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,a)),this.remuxVideo(t,h,s,p,l)}else if(c){var v=this.remuxVideo(t,h,s,0,l);v&&e.codec&&this.remuxEmptyAudio(e,d,s,v)}}n.samples.length&&this.remuxID3(n,a),i.samples.length&&this.remuxText(i,a),this.observer.trigger(r.default.FRAG_PARSED)},t.generateIS=function(e,t,n){var a,s,l=this.observer,u=e.samples,c=t.samples,d=this.typeSupported,h="audio/mp4",f={},p={tracks:f},g=void 0===this._initPTS;if(g&&(a=s=1/0),e.config&&u.length&&(e.timescale=e.samplerate,o.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(d.mpeg?(h="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3")),f.audio={container:h,codec:e.codec,initSegment:!e.isAAC&&d.mpeg?new Uint8Array:C.initSegment([e]),metadata:{channelCount:e.channelCount}},g&&(a=s=u[0].pts-Math.round(e.inputTimeScale*n))),t.sps&&t.pps&&c.length){var v=t.inputTimeScale;if(t.timescale=v,f.video={container:"video/mp4",codec:t.codec,initSegment:C.initSegment([t]),metadata:{width:t.width,height:t.height}},g){var m=Math.round(v*n);a=Math.min(a,c[0].pts-m),s=Math.min(s,c[0].dts-m),this.observer.trigger(r.default.INIT_PTS_FOUND,{initPTS:a})}}else g&&f.audio&&this.observer.trigger(r.default.INIT_PTS_FOUND,{initPTS:a});Object.keys(f).length?(l.trigger(r.default.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,g&&(this._initPTS=a,this._initDTS=s)):l.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.remuxVideo=function(e,t,n,a,s){var l,u,c,d,h,f=8,p=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,v=e.timescale,m=e.samples,y=[],_=m.length,b=this._PTSNormalize,A=this._initPTS,E=this.nextAvcDts,w=this.isSafari;if(0!==_){w&&(n|=_&&E&&(s&&Math.abs(t-E/v)<.1||Math.abs(m[0].pts-E-A)<v/5)),n||(E=t*v),m.forEach(function(e){e.pts=b(e.pts-A,E),e.dts=b(e.dts-A,E),p=Math.min(e.pts,p),g=Math.max(e.pts,g)}),m.sort(function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||r||e.id-t.id});var S=m.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-1*M)},0);if(S<0){o.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+P(S,!0)+" ms to overcome this issue");for(var T=0;T<_;T++)m[T].dts=Math.max(0,m[T].dts+S)}d=m[0].dts,h=m[_-1].dts;var k=Math.round((h-d)/(_-1)),x=d-E;if(n){var D=x>k;(D||x<-1)&&(D?o.logger.warn("AVC: "+P(x,!0)+"ms ("+x+"dts) hole between fragments detected, filling it"):o.logger.warn("AVC: "+P(-x,!0)+"ms ("+x+"dts) overlapping between fragments detected"),d=E,p-=x,m[0].dts=d,m[0].pts=p,o.logger.log("Video: First PTS/DTS adjusted: "+P(p,!0)+"/"+P(d,!0)+", delta: "+P(x,!0)+" ms"))}d=Math.max(d,0);for(var R=0,L=0,I=0;I<_;I++){for(var O=m[I],N=O.units,F=N.length,U=0,B=0;B<F;B++)U+=N[B].data.length;L+=U,R+=F,O.length=U,O.dts=w?d+I*k:Math.max(O.dts,d),O.pts=Math.max(O.pts,O.dts)}var j=L+4*R+8;try{u=new Uint8Array(j)}catch(e){return void this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating video mdat "+j})}var q=new DataView(u.buffer);q.setUint32(0,j),u.set(C.types.mdat,4);for(var H=0;H<_;H++){for(var G=m[H],V=G.units,K=0,W=void 0,$=0,z=V.length;$<z;$++){var Y=V[$],X=Y.data,Q=Y.data.byteLength;q.setUint32(f,Q),f+=4,u.set(X,f),f+=Q,K+=4+Q}if(w)W=Math.max(0,l*Math.round((G.pts-G.dts)/l));else{if(H<_-1)l=m[H+1].dts-G.dts;else{var J=this.config,Z=G.dts-m[H>0?H-1:H].dts;if(J.stretchShortVideoTrack){var ee=J.maxBufferHole,te=Math.floor(ee*v),ne=(a?p+a*v:this.nextAudioPts)-G.pts;ne>te?((l=ne-Z)<0&&(l=Z),o.logger.log("It is approximately "+P(ne,!1)+" ms to the next segment; using duration "+P(l,!1)+" ms for the last video frame.")):l=Z}else l=Z}W=Math.round(G.pts-G.dts)}y.push({size:K,duration:l,cts:W,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:G.key?2:1,isNonSync:G.key?0:1}})}this.nextAvcDts=h+l;var re=e.dropped;if(e.nbNalu=0,e.dropped=0,y.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ie=y[0].flags;ie.dependsOn=2,ie.isNonSync=0}e.samples=y,c=C.moof(e.sequenceNumber++,d,e),e.samples=[];var ae={data1:c,data2:u,startPTS:p/v,endPTS:(g+l)/v,startDTS:d/v,endDTS:this.nextAvcDts/v,type:"video",hasAudio:!1,hasVideo:!0,nb:y.length,dropped:re};return this.observer.trigger(r.default.FRAG_PARSING_DATA,ae),ae}},t.remuxAudio=function(e,t,n,a){var s,l,u,c,d,h,f=e.inputTimeScale,p=e.timescale,g=f/p,v=(e.isAAC?1024:1152)*g,m=this._PTSNormalize,y=this._initPTS,_=!e.isAAC&&this.typeSupported.mpeg,b=_?0:8,A=e.samples,E=[],w=this.nextAudioPts;if(n|=A.length&&w&&(a&&Math.abs(t-w/f)<.1||Math.abs(A[0].pts-w-y)<20*v),A.forEach(function(e){e.pts=e.dts=m(e.pts-y,t*f)}),0!==(A=A.filter(function(e){return e.pts>=0})).length){if(n||(w=a?t*f:A[0].pts),e.isAAC)for(var S=this.config.maxAudioFramesDrift,T=0,k=w;T<A.length;){var D,R=A[T],L=R.pts;if((D=L-k)<=-S*v)n?(o.logger.warn("Dropping 1 audio frame @ "+P(k,!0)/1e3+"s due to "+P(D,!0)+" ms overlap."),A.splice(T,1)):(o.logger.warn("Audio frame @ "+P(L,!0)/1e3+"s overlaps nextAudioPts by "+P(D,!0)+" ms."),k=L+v,T++);else if(D>=S*v&&D<N&&k){var I=Math.round(D/v);o.logger.warn("Injecting "+I+" audio frames @ "+P(k,!0)/1e3+"s due to "+P(D,!0)+" ms gap.");for(var O=0;O<I;O++){var M=Math.max(k,0);(l=x.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(o.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),l=R.unit.subarray()),A.splice(T,0,{unit:l,pts:M,dts:M}),k+=v,T++}R.pts=R.dts=k,k+=v,T++}else Math.abs(D),R.pts=R.dts=k,k+=v,T++}for(var F=A.length,U=0;F--;)U+=A[F].unit.byteLength;for(var B=0,j=A.length;B<j;B++){var q=A[B],H=q.unit,G=q.pts;if(void 0!==h&&s)s.duration=Math.round((G-h)/g);else{var V=G-w,K=0;if(n&&e.isAAC&&V){if(V>0&&V<N)K=Math.round((G-w)/v),o.logger.log(P(V,!0)+" ms hole between AAC samples detected,filling it"),K>0&&((l=x.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(l=H.subarray()),U+=K*l.length);else if(V<-12){o.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+P(w,!0)+" ms / "+P(G,!0)+" ms / "+P(-V,!0)+" ms"),U-=H.byteLength;continue}G=w}if(d=G,!(U>0))return;U+=b;try{u=new Uint8Array(U)}catch(e){return void this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U})}_||(new DataView(u.buffer).setUint32(0,U),u.set(C.types.mdat,4));for(var W=0;W<K;W++)(l=x.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(o.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),l=H.subarray()),u.set(l,b),b+=l.byteLength,s={size:l.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(s)}u.set(H,b);var $=H.byteLength;b+=$,s={size:$,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(s),h=G}var z=0;if((F=E.length)>=2&&(z=E[F-2].duration,s.duration=z),F){this.nextAudioPts=w=h+g*z,e.samples=E,c=_?new Uint8Array:C.moof(e.sequenceNumber++,d/g,e),e.samples=[];var Y=d/f,X=w/f,Q={data1:c,data2:u,startPTS:Y,endPTS:X,startDTS:Y,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:F};return this.observer.trigger(r.default.FRAG_PARSING_DATA,Q),Q}return null}},t.remuxEmptyAudio=function(e,t,n,r){var i=e.inputTimeScale,a=i/(e.samplerate?e.samplerate:i),s=this.nextAudioPts,l=(void 0!==s?s:r.startDTS*i)+this._initDTS,u=r.endDTS*i+this._initDTS,c=1024*a,d=Math.ceil((u-l)/c),h=x.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(o.logger.warn("remux empty Audio"),h){for(var f=[],p=0;p<d;p++){var g=l+p*c;f.push({unit:h,pts:g,dts:g})}e.samples=f,this.remuxAudio(e,t,n)}else o.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.remuxID3=function(e){var t=e.samples.length;if(t){for(var n=e.inputTimeScale,i=this._initPTS,a=this._initDTS,s=0;s<t;s++){var o=e.samples[s];o.pts=(o.pts-i)/n,o.dts=(o.dts-a)/n}this.observer.trigger(r.default.FRAG_PARSING_METADATA,{samples:e.samples}),e.samples=[]}},t.remuxText=function(e){e.samples.sort(function(e,t){return e.pts-t.pts});var t,n=e.samples.length,i=e.inputTimeScale,a=this._initPTS;if(n){for(var s=0;s<n;s++)(t=e.samples[s]).pts=(t.pts-a)/i;this.observer.trigger(r.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},t._PTSNormalize=function(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e},e}(),U=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.remux=function(e,t,n,i,a,s,o,l){var u=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),u.trigger(r.default.FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),u.trigger(r.default.FRAG_PARSED)},e}(),B=Object(l.getSelfScope)();try{O=B.performance.now.bind(B.performance)}catch(e){o.logger.debug("Unable to use Performance API on this environment"),O=B.Date.now}var j=function(){function e(e,t,n,r){this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r}var t=e.prototype;return t.destroy=function(){var e=this.demuxer;e&&e.destroy()},t.push=function(e,t,n,i,s,o,l,u,c,d,h,f){var p=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var g=this.decrypter;null==g&&(g=this.decrypter=new a.default(this.observer,this.config));var v=O();g.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var a=O();p.observer.trigger(r.default.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:a}}),p.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),i,s,o,l,u,c,d,h,f)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),i,s,o,l,u,c,d,h,f)},t.pushDecrypted=function(e,t,n,a,s,o,l,u,c,d,h,f){var p=this.demuxer,g=this.remuxer;if(!p||l||u){for(var v,m=this.observer,b=this.typeSupported,A=this.config,E=[{demux:T,remux:F},{demux:_.default,remux:U},{demux:y,remux:F},{demux:k,remux:F}],w=0,S=E.length;w<S&&!(v=E[w]).demux.probe(e);w++);if(!v)return void m.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});g&&g instanceof v.remux||(g=new v.remux(m,A,b,this.vendor)),p&&p instanceof v.demux||(p=new v.demux(m,g,A,b),this.probe=v.demux.probe),this.demuxer=p,this.remuxer=g}(l||u)&&(p.resetInitSegment(n,a,s,d),g.resetInitSegment()),l&&(p.resetTimeStamp(f),g.resetTimeStamp(f)),"function"==typeof p.setDecryptData&&p.setDecryptData(t),p.append(e,o,c,h)},e}();t.default=j},"./src/demux/demuxer-worker.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/demux/demuxer-inline.js"),i=n("./src/events.js"),a=n("./src/utils/logger.js"),s=n("./node_modules/eventemitter3/index.js");t.default=function(e){var t=new s.EventEmitter;t.trigger=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(r))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",function(i){var s=i.data;switch(s.cmd){case"init":var o=JSON.parse(s.config);e.demuxer=new r.default(t,s.typeSupported,o,s.vendor),Object(a.enableLogs)(o.debug),n("init",null);break;case"demux":e.demuxer.push(s.data,s.decryptdata,s.initSegment,s.audioCodec,s.videoCodec,s.timeOffset,s.discontinuity,s.trackSwitch,s.contiguous,s.duration,s.accurateTimeOffset,s.defaultInitPTS)}}),t.on(i.default.FRAG_DECRYPTED,n),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,n),t.on(i.default.FRAG_PARSED,n),t.on(i.default.ERROR,n),t.on(i.default.FRAG_PARSING_METADATA,n),t.on(i.default.FRAG_PARSING_USERDATA,n),t.on(i.default.INIT_PTS_FOUND,n),t.on(i.default.FRAG_PARSING_DATA,function(t,n){var r=[],i={event:t,data:n};n.data1&&(i.data1=n.data1.buffer,r.push(n.data1.buffer),delete n.data1),n.data2&&(i.data2=n.data2.buffer,r.push(n.data2.buffer),delete n.data2),e.postMessage(i,r)})}},"./src/demux/id3.js":function(e,t,n){"use strict";n.r(t),n.d(t,"utf8ArrayToStr",function(){return o});var r,i=n("./src/utils/get-self-scope.js"),a=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,n){for(var r=n,i=0;e.isHeader(t,n);){i+=10,i+=e._readSize(t,n+6),e.isFooter(t,n+10)&&(i+=10),n+=i}if(i>0)return t.subarray(r,r+i)},e._readSize=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},e.getTimeStamp=function(t){for(var n=e.getID3Frames(t),r=0;r<n.length;r++){var i=n[r];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),r=e._readSize(t,4);return{type:n,size:r,data:t.subarray(10,10+r)}},e.getID3Frames=function(t){for(var n=0,r=[];e.isHeader(t,n);){for(var i=e._readSize(t,n+6),a=(n+=10)+i;n+8<a;){var s=e._getFrameData(t.subarray(n)),o=e._decodeFrame(s);o&&r.push(o),n+=s.size+10}e.isFooter(t,n)&&(n+=10)}return r},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var n=e._utf8ArrayToStr(t.data,!0),r=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:r.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var n=1,r=e._utf8ArrayToStr(t.data.subarray(n),!0);n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);var n=s();if(n){var r=n.decode(e);if(t){var i=r.indexOf("\0");return-1!==i?r.substring(0,i):r}return r.replace(/\0/g,"")}for(var a,o,l,u=e.length,c="",d=0;d<u;){if(0===(a=e[d++])&&t)return c;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(a);break;case 12:case 13:o=e[d++],c+=String.fromCharCode((31&a)<<6|63&o);break;case 14:o=e[d++],l=e[d++],c+=String.fromCharCode((15&a)<<12|(63&o)<<6|(63&l)<<0)}}return c},e}();function s(){var e=Object(i.getSelfScope)();return r||void 0===e.TextDecoder||(r=new e.TextDecoder("utf-8")),r}var o=a._utf8ArrayToStr;t.default=a},"./src/demux/mp4demuxer.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/utils/logger.js"),i=n("./src/events.js"),a=Math.pow(2,32)-1,s=function(){function e(e,t){this.observer=e,this.remuxer=t}var t=e.prototype;return t.resetTimeStamp=function(e){this.initPTS=e},t.resetInitSegment=function(t,n,r,a){if(t&&t.byteLength){var s=this.initData=e.parseInitSegment(t);null==n&&(n="mp4a.40.5"),null==r&&(r="avc1.42e01e");var o={};s.audio&&s.video?o.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:a?t:null}:(s.audio&&(o.audio={container:"audio/mp4",codec:n,initSegment:a?t:null}),s.video&&(o.video={container:"video/mp4",codec:r,initSegment:a?t:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:o})}else n&&(this.audioCodec=n),r&&(this.videoCodec=r)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<8|e[t+1];return n<0?65536+n:n},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n},e.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},e.findBox=function(t,n){var r,i,a,s,o,l,u,c=[];if(t.data?(l=t.start,s=t.end,t=t.data):(l=0,s=t.byteLength),!n.length)return null;for(r=l;r<s;)i=e.readUint32(t,r),a=e.bin2str(t.subarray(r+4,r+8)),u=i>1?r+i:s,a===n[0]&&(1===n.length?c.push({data:t,start:r+8,end:u}):(o=e.findBox({data:t,start:r+8,end:u},n.slice(1))).length&&(c=c.concat(o))),r=u;return c},e.parseSegmentIndex=function(t){var n,r=e.findBox(t,["moov"])[0],i=r?r.end:null,a=0,s=e.findBox(t,["sidx"]);if(!s||!s[0])return null;n=[];var o=(s=s[0]).data[0];a=0===o?8:16;var l=e.readUint32(s,a);a+=4;a+=0===o?8:16,a+=2;var u=s.end+0,c=e.readUint16(s,a);a+=2;for(var d=0;d<c;d++){var h=a,f=e.readUint32(s,h);h+=4;var p=2147483647&f;if(1===(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var g=e.readUint32(s,h);h+=4,n.push({referenceSize:p,subsegmentDuration:g,info:{duration:g/l,start:u,end:u+p-1}}),u+=p,a=h+=4}return{earliestPresentationTime:0,timescale:l,version:o,referencesCount:c,references:n,moovEndOffset:i}},e.parseInitSegment=function(t){var n=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var a=i.data[i.start],s=0===a?12:20,o=e.readUint32(i,s),l=e.findBox(t,["mdia","mdhd"])[0];if(l){s=0===(a=l.data[l.start])?12:20;var u=e.readUint32(l,s),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var d={soun:"audio",vide:"video"}[e.bin2str(c.data.subarray(c.start+8,c.start+12))];if(d){var h=e.findBox(t,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var f=e.bin2str(h.data.subarray(h.start+12,h.start+16));r.logger.log("MP4Demuxer:"+d+":"+f+" found")}n[o]={timescale:u,type:d},n[d]={timescale:u,id:o}}}}}}),n},e.getStartDTS=function(t,n){var r,i,a;return r=e.findBox(n,["moof","traf"]),i=[].concat.apply([],r.map(function(n){return e.findBox(n,["tfhd"]).map(function(r){var i,a;return i=e.readUint32(r,4),a=t[i].timescale||9e4,e.findBox(n,["tfdt"]).map(function(t){var n,r;return n=t.data[t.start],r=e.readUint32(t,4),1===n&&(r*=Math.pow(2,32),r+=e.readUint32(t,8)),r})[0]/a})})),a=Math.min.apply(null,i),isFinite(a)?a:0},e.offsetStartDTS=function(t,n,r){e.findBox(n,["moof","traf"]).map(function(n){return e.findBox(n,["tfhd"]).map(function(i){var s=e.readUint32(i,4),o=t[s].timescale||9e4;e.findBox(n,["tfdt"]).map(function(t){var n=t.data[t.start],i=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,i-r*o);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=r*o,i=Math.max(i,0);var s=Math.floor(i/(a+1)),l=Math.floor(i%(a+1));e.writeUint32(t,4,s),e.writeUint32(t,8,l)}})})})},t.append=function(t,n,r,a){var s=this.initData;s||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),s=this.initData);var o,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(s,t);this.initPTS=l=u-n,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(s,t,l),o=e.getStartDTS(s,t),this.remuxer.remux(s.audio,s.video,null,null,o,r,a,t)},t.destroy=function(){},e}();t.default=s},"./src/errors.ts":function(e,t,n){"use strict";var r,i;n.r(t),n.d(t,"ErrorTypes",function(){return r}),n.d(t,"ErrorDetails",function(){return i}),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(r||(r={})),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException"}(i||(i={}))},"./src/events.js":function(e,t,n){"use strict";n.r(t);t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return $t});var r={};n.r(r),n.d(r,"newCue",function(){return Je});var i,a,s=n("./node_modules/url-toolkit/src/url-toolkit.js"),o=n("./src/errors.ts"),l=n("./src/polyfills/number.js"),u=n("./src/events.js"),c=n("./src/utils/logger.js"),d={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},h=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){},t.onHandlerDestroyed=function(){},t.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},t.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(d[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},t.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},t.onEvent=function(e,t){this.onEventGeneric(e,t)},t.onEventGeneric=function(e,t){try{(function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}).call(this,e,t).call()}catch(t){c.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();!function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(i||(i={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(a||(a={}));var f=n("./src/demux/mp4demuxer.js");function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g,v=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}return function(e,t,n){t&&p(e.prototype,t),n&&p(e,n)}(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(s.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}();function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e.AUDIO="audio",e.VIDEO="video"}(g||(g={}));var y=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((e={})[g.AUDIO]=!1,e[g.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t=e.prototype;return t.setByteRange=function(e,t){var n=e.split("@",2),r=[];1===n.length?r[0]=t?t.byteRangeEndOffset:0:r[0]=parseInt(n[1]),r[1]=parseInt(n[0])+r[0],this._byteRange=r},t.addElementaryStream=function(e){this._elementaryStreams[e]=!0},t.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},t.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},t.setDecryptDataFromLevelKey=function(e,t){var n=e;return(null===e||void 0===e?void 0:e.method)&&e.uri&&!e.iv&&((n=new v(e.baseuri,e.reluri)).method=e.method,n.iv=this.createInitializationVector(t)),n},function(e,t,n){t&&m(e.prototype,t),n&&m(e,n)}(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(s.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!=typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(l.isFiniteNumber)(this.programDateTime))return null;var e=Object(l.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}]),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return function(e,t,n){t&&_(e.prototype,t),n&&_(e,n)}(e,[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(l.isFiniteNumber)(this.fragments[0].programDateTime))}}]),e}(),A=/^(\d+)x(\d+)$/,E=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,w=function(){function e(t){for(var n in"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(n)&&(this[n]=t[n])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.enumeratedString=function(e){return this[e]},t.decimalResolution=function(e){var t=A.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,n={};for(E.lastIndex=0;null!==(t=E.exec(e));){var r=t[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[t[1]]=r}return n},e}(),S={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function T(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var k=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,x=/#EXT-X-MEDIA:(.*)/g,D=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),C=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,R=/\.(mp4|m4s|m4v|m4a)$/i,L=function(){function e(){}return e.findGroup=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.id===t)return r}},e.convertAVC1ToAVCOTI=function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return s.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,n){var r,i=[],a={},s=!1;function o(e,t){["video","audio"].forEach(function(n){var r=e.filter(function(e){return function(e,t){var n=S[t];return!!n&&!0===n[e.slice(0,4)]}(e,n)});if(r.length){var i=r.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[n+"Codec"]=i.length>0?i[0]:r[0],e=e.filter(function(e){return-1===r.indexOf(e)})}}),t.unknownCodecs=e}for(k.lastIndex=0;null!=(r=k.exec(t));)if(r[1]){var l={},u=l.attrs=new w(r[1]);l.url=e.resolve(r[2],n);var c=u.decimalResolution("RESOLUTION");c&&(l.width=c.width,l.height=c.height),l.bitrate=u.decimalInteger("AVERAGE-BANDWIDTH")||u.decimalInteger("BANDWIDTH"),l.name=u.NAME,o([].concat((u.CODECS||"").split(/[ ,]+/)),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=e.convertAVC1ToAVCOTI(l.videoCodec)),i.push(l)}else if(r[3]){var d=new w(r[3]);d["DATA-ID"]&&(s=!0,a[d["DATA-ID"]]=d)}return{levels:i,sessionData:s?a:null}},e.parseMasterPlaylistMedia=function(t,n,r,i){var a;void 0===i&&(i=[]);var s=[],o=0;for(x.lastIndex=0;null!==(a=x.exec(t));){var l=new w(a[1]);if(l.TYPE===r){var u={attrs:l,id:o++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE,type:r,default:"YES"===l.DEFAULT,autoselect:"YES"===l.AUTOSELECT,forced:"YES"===l.FORCED,lang:l.LANGUAGE};if(l.URI&&(u.url=e.resolve(l.URI,n)),i.length){var c=e.findGroup(i,u.groupId);u.audioCodec=c?c.codec:i[0].codec}s.push(u)}}return s},e.parseLevelPlaylist=function(e,t,n,r,i){var a,s,o,u=0,d=0,h=new b(t),f=0,p=null,g=new y,m=null;for(D.lastIndex=0;null!==(a=D.exec(e));){var _=a[1];if(_){g.duration=parseFloat(_);var A=(" "+a[2]).slice(1);g.title=A||null,g.tagList.push(A?["INF",_,A]:["INF",_])}else if(a[3]){if(Object(l.isFiniteNumber)(g.duration)){var E=u++;g.type=r,g.start=d,o&&(g.levelkey=o),g.sn=E,g.level=n,g.cc=f,g.urlId=i,g.baseurl=t,g.relurl=(" "+a[3]).slice(1),P(g,p),h.fragments.push(g),p=g,d+=g.duration,g=new y}}else if(a[4]){var S=(" "+a[4]).slice(1);p?g.setByteRange(S,p):g.setByteRange(S)}else if(a[5])g.rawProgramDateTime=(" "+a[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),null===m&&(m=h.fragments.length);else{if(!(a=a[0].match(C))){c.logger.warn("No matches on slow regex match for level playlist!");continue}for(s=1;s<a.length&&void 0===a[s];s++);var T=(" "+a[s+1]).slice(1),k=(" "+a[s+2]).slice(1);switch(a[s]){case"#":g.tagList.push(k?[T,k]:[T]);break;case"PLAYLIST-TYPE":h.type=T.toUpperCase();break;case"MEDIA-SEQUENCE":u=h.startSN=parseInt(T);break;case"TARGETDURATION":h.targetduration=parseFloat(T);break;case"VERSION":h.version=parseInt(T);break;case"EXTM3U":break;case"ENDLIST":h.live=!1;break;case"DIS":f++,g.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(T);break;case"KEY":var x=new w(T),L=x.enumeratedString("METHOD"),I=x.URI,O=x.hexadecimalInteger("IV");if("com.apple.streamingkeydelivery"===(x.KEYFORMAT||"identity")){c.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}L&&(o=new v(t,I),I&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(L)>=0&&(o.method=L,o.key=null,o.iv=O));break;case"START":var N=new w(T).decimalFloatingPoint("TIME-OFFSET");Object(l.isFiniteNumber)(N)&&(h.startTimeOffset=N);break;case"MAP":var M=new w(T);g.relurl=M.URI,M.BYTERANGE&&g.setByteRange(M.BYTERANGE),g.baseurl=t,g.level=n,g.type=r,g.sn="initSegment",h.initSegment=g,(g=new y).rawProgramDateTime=h.initSegment.rawProgramDateTime;break;default:c.logger.warn("line parsed but not handled: "+a)}}}return(g=p)&&!g.relurl&&(h.fragments.pop(),d-=g.duration),h.totalduration=d,h.averagetargetduration=d/h.fragments.length,h.endSN=u-1,h.startCC=h.fragments[0]?h.fragments[0].cc:0,h.endCC=f,!h.initSegment&&h.fragments.length&&h.fragments.every(function(e){return R.test(e.relurl)})&&(c.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(g=new y).relurl=h.fragments[0].relurl,g.baseurl=t,g.level=n,g.type=r,g.sn="initSegment",h.initSegment=g,h.needSidxRanges=!0),m&&function(e,t){for(var n=e[t],r=t-1;r>=0;r--){var i=e[r];i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}(h.fragments,m),h},e}();function P(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):(null===t||void 0===t?void 0:t.programDateTime)&&(e.programDateTime=t.endProgramDateTime),Object(l.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}var I=window.performance,O=function(e){function t(t){var n;return(n=e.call(this,t,u.default.MANIFEST_LOADING,u.default.LEVEL_LOADING,u.default.AUDIO_TRACK_LOADING,u.default.SUBTITLE_TRACK_LOADING)||this).loaders={},n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t.canHaveQualityLevels=function(e){return e!==i.AUDIO_TRACK&&e!==i.SUBTITLE_TRACK},t.mapContextToLevelType=function(e){switch(e.type){case i.AUDIO_TRACK:return a.AUDIO;case i.SUBTITLE_TRACK:return a.SUBTITLE;default:return a.MAIN}},t.getResponseUrl=function(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n};var n=t.prototype;return n.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return e.loader=i,this.loaders[e.type]=i,i},n.getInternalLoader=function(e){return this.loaders[e.type]},n.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},n.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},n.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},n.onManifestLoading=function(e){this.load({url:e.url,type:i.MANIFEST,level:0,id:null,responseType:"text"})},n.onLevelLoading=function(e){this.load({url:e.url,type:i.LEVEL,level:e.level,id:e.id,responseType:"text"})},n.onAudioTrackLoading=function(e){this.load({url:e.url,type:i.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},n.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:i.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},n.load=function(e){var t=this.hls.config;c.logger.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var n,r,a,s,o=this.getInternalLoader(e);if(o){var l=o.context;if(l&&l.url===e.url)return c.logger.trace("playlist request ongoing"),!1;c.logger.warn("aborting previous loader for type: "+e.type),o.abort()}switch(e.type){case i.MANIFEST:n=t.manifestLoadingMaxRetry,r=t.manifestLoadingTimeOut,a=t.manifestLoadingRetryDelay,s=t.manifestLoadingMaxRetryTimeout;break;case i.LEVEL:n=0,s=0,a=0,r=t.levelLoadingTimeOut;break;default:n=t.levelLoadingMaxRetry,r=t.levelLoadingTimeOut,a=t.levelLoadingRetryDelay,s=t.levelLoadingMaxRetryTimeout}o=this.createInternalLoader(e);var u={timeout:r,maxRetry:n,retryDelay:a,maxRetryDelay:s},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c.logger.debug("Calling internal loader delegate for URL: "+e.url),o.load(e,u,d),!0},n.loadsuccess=function(e,t,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this._handleSidxRequest(e,n),void this._handlePlaylistLoaded(e,t,n,r);if(this.resetInternalLoader(n.type),"string"!=typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var i=e.data;t.tload=I.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,n,r):this._handleMasterPlaylist(e,t,n,r):this._handleManifestParsingError(e,n,"no EXTM3U delimiter",r)},n.loaderror=function(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!1,e)},n.loadtimeout=function(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!0)},n._handleMasterPlaylist=function(e,n,r,i){var a=this.hls,s=e.data,o=t.getResponseUrl(e,r),l=L.parseMasterPlaylist(s,o),d=l.levels,h=l.sessionData;if(d.length){var f=d.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),p=L.parseMasterPlaylistMedia(s,o,"AUDIO",f),g=L.parseMasterPlaylistMedia(s,o,"SUBTITLES"),v=L.parseMasterPlaylistMedia(s,o,"CLOSED-CAPTIONS");if(p.length){var m=!1;p.forEach(function(e){e.url||(m=!0)}),!1===m&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(c.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}a.trigger(u.default.MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:g,captions:v,url:o,stats:n,networkDetails:i,sessionData:h})}else this._handleManifestParsingError(e,r,"no level found in manifest",i)},n._handleTrackOrLevelPlaylist=function(e,n,r,a){var s=this.hls,c=r.id,d=r.level,h=r.type,f=t.getResponseUrl(e,r),p=Object(l.isFiniteNumber)(c)?c:0,g=Object(l.isFiniteNumber)(d)?d:p,v=t.mapContextToLevelType(r),m=L.parseLevelPlaylist(e.data,f,g,v,p);if(m.tload=n.tload,m.fragments.length){if(h===i.MANIFEST){var y={url:f,details:m};s.trigger(u.default.MANIFEST_LOADED,{levels:[y],audioTracks:[],url:f,stats:n,networkDetails:a,sessionData:null})}if(n.tparsed=I.now(),m.needSidxRanges){var _=m.initSegment.url;this.load({url:_,isSidxRequest:!0,type:h,level:d,levelDetails:m,id:c,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else r.levelDetails=m,this._handlePlaylistLoaded(e,n,r,a)}else s.trigger(u.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:f,reason:"no fragments found in level",level:"number"==typeof r.level?r.level:void 0})},n._handleSidxRequest=function(e,t){if("string"==typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var n=f.default.parseSegmentIndex(new Uint8Array(e.data));if(n){var r=n.references,i=t.levelDetails;r.forEach(function(e,t){var n=e.info;if(i){var r=i.fragments[t];0===r.byteRange.length&&r.setByteRange(String(1+n.end-n.start)+"@"+String(n.start))}}),i&&i.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}},n._handleManifestParsingError=function(e,t,n,r){this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:n,networkDetails:r})},n._handleNetworkError=function(e,t,n,r){var a,s;void 0===n&&(n=!1),void 0===r&&(r=null),c.logger.info("A network error occured while loading a "+e.type+"-type playlist");var l=this.getInternalLoader(e);switch(e.type){case i.MANIFEST:a=n?o.ErrorDetails.MANIFEST_LOAD_TIMEOUT:o.ErrorDetails.MANIFEST_LOAD_ERROR,s=!0;break;case i.LEVEL:a=n?o.ErrorDetails.LEVEL_LOAD_TIMEOUT:o.ErrorDetails.LEVEL_LOAD_ERROR,s=!1;break;case i.AUDIO_TRACK:a=n?o.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,s=!1;break;default:s=!1}l&&(l.abort(),this.resetInternalLoader(e.type));var d={type:o.ErrorTypes.NETWORK_ERROR,details:a,fatal:s,url:e.url,loader:l,context:e,networkDetails:t};r&&(d.response=r),this.hls.trigger(u.default.ERROR,d)},n._handlePlaylistLoaded=function(e,n,r,a){var s=r.type,o=r.level,l=r.id,c=r.levelDetails;if(c&&c.targetduration)if(t.canHaveQualityLevels(r.type))this.hls.trigger(u.default.LEVEL_LOADED,{details:c,level:o||0,id:l||0,stats:n,networkDetails:a});else switch(s){case i.AUDIO_TRACK:this.hls.trigger(u.default.AUDIO_TRACK_LOADED,{details:c,id:l,stats:n,networkDetails:a});break;case i.SUBTITLE_TRACK:this.hls.trigger(u.default.SUBTITLE_TRACK_LOADED,{details:c,id:l,stats:n,networkDetails:a})}else this._handleManifestParsingError(e,r,"invalid target duration",a)},t}(h);var N=function(e){function t(t){var n;return(n=e.call(this,t,u.default.FRAG_LOADING)||this).loaders={},n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.destroy=function(){var t=this.loaders;for(var n in t){var r=t[n];r&&r.destroy()}this.loaders={},e.prototype.destroy.call(this)},n.onFragLoading=function(e){var t=e.frag,n=t.type,r=this.loaders,i=this.hls.config,a=i.fLoader,s=i.loader;t.loaded=0;var o,u,d,h=r[n];h&&(c.logger.warn("abort previous fragment loader for type: "+n),h.abort()),h=r[n]=t.loader=i.fLoader?new a(i):new s(i),o={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var f=t.byteRangeStartOffset,p=t.byteRangeEndOffset;Object(l.isFiniteNumber)(f)&&Object(l.isFiniteNumber)(p)&&(o.rangeStart=f,o.rangeEnd=p),u={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},h.load(o,u,d)},n.loadsuccess=function(e,t,n,r){void 0===r&&(r=null);var i=e.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(u.default.FRAG_LOADED,{payload:i,frag:a,stats:t,networkDetails:r})},n.loaderror=function(e,t,n){void 0===n&&(n=null);var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})},n.loadtimeout=function(e,t,n){void 0===n&&(n=null);var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})},n.loadprogress=function(e,t,n,r){void 0===r&&(r=null);var i=t.frag;i.loaded=e.loaded,this.hls.trigger(u.default.FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:r})},t}(h);var M=function(e){function t(t){var n;return(n=e.call(this,t,u.default.KEY_LOADING)||this).loaders={},n.decryptkey=null,n.decrypturl=null,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.destroy=function(){for(var t in this.loaders){var n=this.loaders[t];n&&n.destroy()}this.loaders={},e.prototype.destroy.call(this)},n.onKeyLoading=function(e){var t=e.frag,n=t.type,r=this.loaders[n];if(t.decryptdata){var i=t.decryptdata.uri;if(i!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;if(r&&(c.logger.warn("abort previous key loader for type:"+n),r.abort()),!i)return void c.logger.warn("key uri is falsy");t.loader=this.loaders[n]=new a.loader(a),this.decrypturl=i,this.decryptkey=null;var s={url:i,frag:t,responseType:"arraybuffer"},o={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};t.loader.load(s,o,l)}else this.decryptkey&&(t.decryptdata.key=this.decryptkey,this.hls.trigger(u.default.KEY_LOADED,{frag:t}))}else c.logger.warn("Missing decryption data on fragment in onKeyLoading")},n.loadsuccess=function(e,t,n){var r=n.frag;r.decryptdata?(this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,delete this.loaders[r.type],this.hls.trigger(u.default.KEY_LOADED,{frag:r})):c.logger.error("after key load, decryptdata unset")},n.loaderror=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),delete this.loaders[n.type],this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},n.loadtimeout=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),delete this.loaders[n.type],this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},t}(h);var F="NOT_LOADED",U="APPENDING",B="PARTIAL",j="OK",q=function(e){function t(t){var n;return(n=e.call(this,t,u.default.BUFFER_APPENDED,u.default.FRAG_BUFFERED,u.default.FRAG_LOADED)||this).bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=t.config,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,h.prototype.destroy.call(this),e.prototype.destroy.call(this)},n.getBufferedFrag=function(e,t){var n=this.fragments,r=Object.keys(n).filter(function(r){var i=n[r];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var a=i.body;return a.startPTS<=e&&e<=a.endPTS});if(0===r.length)return null;var i=r.pop();return n[i].body},n.detectEvictedFragments=function(e,t){var n=this;Object.keys(this.fragments).forEach(function(r){var i=n.fragments[r];if(i&&i.buffered){var a=i.range[e];if(a)for(var s=a.time,o=0;o<s.length;o++){var l=s[o];if(!n.isTimeBuffered(l.startPTS,l.endPTS,t)){n.removeFragment(i.body);break}}}})},n.detectPartialFragments=function(e){var t=this,n=this.getFragmentKey(e),r=this.fragments[n];r&&(r.buffered=!0,Object.keys(this.timeRanges).forEach(function(n){if(e.hasElementaryStream(n)){var i=t.timeRanges[n];r.range[n]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}}))},n.getBufferedTimes=function(e,t,n){for(var r,i,a=[],s=!1,o=0;o<n.length;o++){if(r=n.start(o)-this.bufferPadding,i=n.end(o)+this.bufferPadding,e>=r&&t<=i){a.push({startPTS:Math.max(e,n.start(o)),endPTS:Math.min(t,n.end(o))});break}if(e<i&&t>r)a.push({startPTS:Math.max(e,n.start(o)),endPTS:Math.min(t,n.end(o))}),s=!0;else if(t<=r)break}return{time:a,partial:s}},n.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},n.getPartialFragment=function(e){var t,n,r,i=this,a=null,s=0;return Object.keys(this.fragments).forEach(function(o){var l=i.fragments[o];i.isPartial(l)&&(n=l.body.startPTS-i.bufferPadding,r=l.body.endPTS+i.bufferPadding,e>=n&&e<=r&&(t=Math.min(e-n,r-e),s<=t&&(a=l.body,s=t)))}),a},n.getState=function(e){var t=this.getFragmentKey(e),n=this.fragments[t],r=F;return void 0!==n&&(r=n.buffered?!0===this.isPartial(n)?B:j:U),r},n.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},n.isTimeBuffered=function(e,t,n){for(var r,i,a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1},n.onFragLoaded=function(e){var t=e.frag;Object(l.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},n.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var n=t.timeRanges[e];t.detectEvictedFragments(e,n)})},n.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},n.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},n.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},n.removeAllFragments=function(){this.fragments=Object.create(null)},t}(h),H={search:function(e,t){for(var n=0,r=e.length-1,i=null,a=null;n<=r;){var s=t(a=e[i=(n+r)/2|0]);if(s>0)n=i+1;else{if(!(s<0))return a;r=i-1}}return null}},G=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var n=e.buffered,r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,n){try{if(e){var r,i=e.buffered,a=[];for(r=0;r<i.length;r++)a.push({start:i.start(r),end:i.end(r)});return this.bufferedInfo(a,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,n){e.sort(function(e,t){var n=e.start-t.start;return n||t.end-e.end});var r=[];if(n)for(var i=0;i<e.length;i++){var a=r.length;if(a){var s=r[a-1].end;e[i].start-s<n?e[i].end>s&&(r[a-1].end=e[i].end):r.push(e[i])}else r.push(e[i])}else r=e;for(var o,l=0,u=t,c=t,d=0;d<r.length;d++){var h=r[d].start,f=r[d].end;if(t+n>=h&&t<f)u=h,l=(c=f)-t;else if(t+n<h){o=h;break}}return{len:l,start:u,end:c,nextStart:o}},e}(),V=n("./node_modules/eventemitter3/index.js"),K=n("./node_modules/webworkify-webpack/index.js"),W=n("./src/demux/demuxer-inline.js");function $(){return window.MediaSource||window.WebKitMediaSource}var z=n("./src/utils/get-self-scope.js");var Y=function(e){function t(){return e.apply(this,arguments)||this}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t.prototype.trigger=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(n))},t}(V.EventEmitter),X=Object(z.getSelfScope)(),Q=$()||{isTypeSupported:function(){return!1}},J=function(){function e(e,t){var n=this;this.hls=e,this.id=t;var r=this.observer=new Y,i=e.config,a=function(t,r){(r=r||{}).frag=n.frag,r.id=n.id,e.trigger(t,r)};r.on(u.default.FRAG_DECRYPTED,a),r.on(u.default.FRAG_PARSING_INIT_SEGMENT,a),r.on(u.default.FRAG_PARSING_DATA,a),r.on(u.default.FRAG_PARSED,a),r.on(u.default.ERROR,a),r.on(u.default.FRAG_PARSING_METADATA,a),r.on(u.default.FRAG_PARSING_USERDATA,a),r.on(u.default.INIT_PTS_FOUND,a);var s={mp4:Q.isTypeSupported("video/mp4"),mpeg:Q.isTypeSupported("audio/mpeg"),mp3:Q.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(i.enableWorker&&"undefined"!=typeof Worker){var d;c.logger.log("demuxing in webworker");try{d=this.w=K("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(t){e.trigger(u.default.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},d.postMessage({cmd:"init",typeSupported:s,vendor:l,id:t,config:JSON.stringify(i)})}catch(e){c.logger.warn("Error in worker:",e),c.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),d&&X.URL.revokeObjectURL(d.objectURL),this.demuxer=new W.default(r,s,i,l),this.w=void 0}}else this.demuxer=new W.default(r,s,i,l)}var t=e.prototype;return t.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},t.push=function(e,t,n,r,i,a,s,o){var u=this.w,d=Object(l.isFiniteNumber)(i.startPTS)?i.startPTS:i.start,h=i.decryptdata,f=this.frag,p=!(f&&i.cc===f.cc),g=!(f&&i.level===f.level),v=f&&i.sn===f.sn+1,m=!g&&v;if(p&&c.logger.log(this.id+":discontinuity detected"),g&&c.logger.log(this.id+":switch detected"),this.frag=i,u)u.postMessage({cmd:"demux",data:e,decryptdata:h,initSegment:t,audioCodec:n,videoCodec:r,timeOffset:d,discontinuity:p,trackSwitch:g,contiguous:m,duration:a,accurateTimeOffset:s,defaultInitPTS:o},e instanceof ArrayBuffer?[e]:[]);else{var y=this.demuxer;y&&y.push(e,h,t,n,r,d,p,g,m,a,s,o)}},t.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":X.URL.revokeObjectURL(this.w.objectURL);break;case u.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},e}();function Z(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}}function ee(e,t,n){var r=e[t],i=e[n],a=i.startPTS;Object(l.isFiniteNumber)(a)?n>t?(r.duration=a-r.start,r.duration<0&&c.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(i.duration=r.start-a,i.duration<0&&c.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):i.start=n>t?r.start+r.duration:Math.max(r.start-i.duration,0)}function te(e,t,n,r,i,a){var s=n;if(Object(l.isFiniteNumber)(t.startPTS)){var o=Math.abs(t.startPTS-n);Object(l.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(o,t.deltaPTS):t.deltaPTS=o,s=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),r=Math.max(r,t.endPTS),i=Math.min(i,t.startDTS),a=Math.max(a,t.endDTS)}var u=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=s,t.endPTS=r,t.startDTS=i,t.endDTS=a,t.duration=r-n;var c,d,h,f=t.sn;if(!e||f<e.startSN||f>e.endSN)return 0;for(c=f-e.startSN,(d=e.fragments)[c]=t,h=c;h>0;h--)ee(d,h,h-1);for(h=c;h<d.length-1;h++)ee(d,h,h+1);return e.PTSKnown=!0,u}function ne(e,t){t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment);var n,r=0;if(re(e,t,function(e,i){r=e.cc-i.cc,Object(l.isFiniteNumber)(e.startPTS)&&(i.start=i.startPTS=e.startPTS,i.endPTS=e.endPTS,i.duration=e.duration,i.backtracked=e.backtracked,i.dropped=e.dropped,n=i),t.PTSKnown=!0}),t.PTSKnown){if(r){c.logger.log("discontinuity sliding from playlist, take drift into account");for(var i=t.fragments,a=0;a<i.length;a++)i[a].cc+=r}n?te(t,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):function(e,t){var n=t.startSN-e.startSN,r=e.fragments,i=t.fragments;if(n<0||n>r.length)return;for(var a=0;a<i.length;a++)i[a].start+=r[n].start}(e,t),t.PTSKnown=e.PTSKnown}}function re(e,t,n){if(e&&t)for(var r=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,s=r;s<=i;s++){var o=e.fragments[a+s],l=t.fragments[s];if(!o||!l)break;n(o,l,s)}}function ie(e,t,n){var r=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=r/2;return e&&t.endSN===e.endSN&&(r=i),n&&(r=Math.max(i,r-(window.performance.now()-n))),Math.round(r)}var ae={toString:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}};function se(e,t){t.fragments.forEach(function(t){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}),t.PTSKnown=!0}function oe(e,t,n){!function(e,t,n){if(function(e,t,n){var r=!1;return t&&t.details&&n&&(n.endCC>n.startCC||e&&e.cc<n.startCC)&&(r=!0),r}(e,n,t)){var r=function(e,t){var n=e.fragments,r=t.fragments;if(r.length&&n.length){var i=function(e,t){for(var n=null,r=0;r<e.length;r+=1){var i=e[r];if(i&&i.cc===t){n=i;break}}return n}(n,r[0].cc);if(i&&(!i||i.startPTS))return i;c.logger.log("No frag in previous level to align on")}else c.logger.log("No fragments to align")}(n.details,t);r&&(c.logger.log("Adjusting PTS using last level due to CC increase within current level"),se(r.start,t))}}(e,n,t),!n.PTSKnown&&t&&function(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var n=t.fragments[0].programDateTime,r=e.fragments[0].programDateTime,i=(r-n)/1e3+t.fragments[0].start;Object(l.isFiniteNumber)(i)&&(c.logger.log("adjusting PTS using programDateTime delta, sliding:"+i.toFixed(3)),se(i,e))}}(n,t.details)}function le(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!Object(l.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(var r=0;r<e.length;++r){var i=e[r];if(de(t,n,i))return i}return null}function ue(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=null;if(e?i=t[e.sn-t[0].sn+1]:0===n&&0===t[0].start&&(i=t[0]),i&&0===ce(n,r,i))return i;var a=H.search(t,ce.bind(null,n,r));return a||i}function ce(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0);var r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function de(e,t,n){var r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>e}var he=function(){function e(e,t,n,r){this.config=e,this.media=t,this.fragmentTracker=n,this.hls=r,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function(e){var t=this.config,n=this.media,r=this.stalled,i=n.currentTime,a=n.seeking,s=this.seeking&&!a,o=!this.seeking&&a;if(this.seeking=a,i===e){if((o||s)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&n.buffered.length){var l=G.bufferInfo(n,i,0),u=l.len>0,d=l.nextStart||0;if(u||d){if(a){var h=l.len>2,f=!d||d-i>2&&!this.fragmentTracker.getPartialFragment(i);if(h||f)return;this.moved=!1}if(!this.moved&&this.stalled){var p=Math.max(d,l.start||0)-i;if(p>0&&p<=2)return void this._trySkipBufferHole(null)}var g=self.performance.now();if(null!==r){var v=g-r;!a&&v>=250&&this._reportStall(l.len);var m=G.bufferInfo(n,i,t.maxBufferHole);this._tryFixBufferStall(m,v)}else this.stalled=g}}}else if(this.moved=!0,null!==r){if(this.stallReported){var y=self.performance.now()-r;c.logger.warn("playback not stuck anymore @"+i+", after "+Math.round(y)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var n=this.config,r=this.fragmentTracker,i=this.media.currentTime,a=r.getPartialFragment(i);if(a&&this._trySkipBufferHole(a))return;e.len>n.maxBufferHole&&t>1e3*n.highBufferWatchdogPeriod&&(c.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,c.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer (buffer="+e+")"),t.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,n=this.hls,r=this.media,i=r.currentTime,a=0,s=0;s<r.buffered.length;s++){var l=r.buffered.start(s);if(i+t.maxBufferHole>=a&&i<l){var d=Math.max(l+.05,r.currentTime+.1);return c.logger.warn("skipping hole, adjusting currentTime from "+i+" to "+d),this.moved=!0,this.stalled=null,r.currentTime=d,e&&n.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+d,frag:e}),d}a=r.buffered.end(s)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,r=n.currentTime,i=(this.nudgeRetry||0)+1;if(this.nudgeRetry=i,i<e.nudgeMaxRetry){var a=r+i*e.nudgeOffset;c.logger.warn("Nudging 'currentTime' from "+r+" to "+a),n.currentTime=a,t.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else c.logger.error("Playhead still not moving while enough data buffered @"+r+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();var fe=function(e){function t(t){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=e.call.apply(e,[this,t].concat(i))||this)._boundTick=void 0,n._tickTimer=null,n._tickInterval=null,n._tickCallCount=0,n._boundTick=n.tick.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},n.hasInterval=function(){return!!this._tickInterval},n.hasNextTick=function(){return!!this._tickTimer},n.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},n.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},n.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},n.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},n.doTick=function(){},t}(h);var pe={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},ge=function(e){function t(){return e.apply(this,arguments)||this}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.doTick=function(){},n.startLoad=function(){},n.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=pe.STOPPED},n._streamEnded=function(e,t){var n=this.fragCurrent,r=this.fragmentTracker;if(!t.live&&n&&!n.backtracked&&n.sn===t.endSN&&!e.nextStart){var i=r.getState(n);return i===B||i===j}return!1},n.onMediaSeeking=function(){var e=this.config,t=this.media,n=this.mediaBuffer,r=this.state,i=t?t.currentTime:null,a=G.bufferInfo(n||t,i,this.config.maxBufferHole);if(Object(l.isFiniteNumber)(i)&&c.logger.log("media seeking to "+i.toFixed(3)),r===pe.FRAG_LOADING){var s=this.fragCurrent;if(0===a.len&&s){var o=e.maxFragLookUpTolerance,u=s.start-o,d=s.start+s.duration+o;i<u||i>d?(s.loader&&(c.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),s.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=pe.IDLE):c.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else r===pe.ENDED&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=pe.IDLE);t&&(this.lastCurrentTime=i),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=i),this.tick()},n.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},n.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},n.onHandlerDestroyed=function(){this.state=pe.STOPPED,this.fragmentTracker=null},n.computeLivePosition=function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)},t}(fe);function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var me,ye=function(e){function t(t,n){var r;return(r=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.LEVEL_LOADED,u.default.LEVELS_UPDATED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_LOAD_EMERGENCY_ABORTED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_SWITCHED,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED)||this).fragmentTracker=n,r.config=t.config,r.audioCodecSwap=!1,r._state=pe.STOPPED,r.stallReported=!1,r.gapController=null,r.altAudio=!1,r.audioOnly=!1,r.bitrateTest=!1,r}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(n.config.testBandwidth?(r=0,this.bitrateTest=!0):r=n.nextAutoLevel),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&-1===e&&(c.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=pe.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=pe.STOPPED},n.stopLoad=function(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},n.doTick=function(){switch(this.state){case pe.BUFFER_FLUSHING:this.fragLoadError=0;break;case pe.IDLE:this._doTickIdle();break;case pe.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=pe.IDLE);break;case pe.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(c.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=pe.IDLE);break;case pe.ERROR:case pe.STOPPED:case pe.FRAG_LOADING:case pe.PARSING:case pe.PARSED:case pe.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},n._doTickIdle=function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&t.startFragPrefetch))if(this.altAudio&&this.audioOnly)this.demuxer.frag=null;else{var r;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i];if(a){var s,o=a.bitrate;s=o?Math.max(8*t.maxBufferSize/o,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var l=r<t.maxBufferHole?Math.max(2,t.maxBufferHole):t.maxBufferHole,d=G.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,l),h=d.len;if(!(h>=s)){c.logger.trace("buffer length of "+h.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var f=a.details;if(!f||f.live&&this.levelLastLoaded!==i)this.state=pe.WAITING_LEVEL;else{if(this._streamEnded(d,f)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(u.default.BUFFER_EOS,p),void(this.state=pe.ENDED)}this._fetchPayloadOrEos(r,d,f)}}}}},n._fetchPayloadOrEos=function(e,t,n){var r=this.fragPrevious,i=(this.level,n.fragments),a=i.length;if(0!==a){var s,o=i[0].start,l=i[a-1].start+i[a-1].duration,u=t.end;if(n.initSegment&&!n.initSegment.data)s=n.initSegment;else if(n.live){var d=this.config.initialLiveManifestSize;if(a<d)return void c.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(null===(s=this._ensureFragmentAtLivePoint(n,u,o,l,r,i)))return}else u<o&&(s=i[0]);s||(s=this._findFragment(o,r,a,i,u,l,n)),s&&(s.encrypted?this._loadKey(s,n):this._loadFragment(s,n,e,u))}},n._ensureFragmentAtLivePoint=function(e,t,n,r,i,a){var s,o=this.hls.config,u=this.media,d=1/0;if(void 0!==o.liveMaxLatencyDuration?d=o.liveMaxLatencyDuration:Object(l.isFiniteNumber)(o.liveMaxLatencyDurationCount)&&(d=o.liveMaxLatencyDurationCount*e.targetduration),t<Math.max(n-o.maxFragLookUpTolerance,r-d)){var h=this.liveSyncPosition=this.computeLivePosition(n,e);t=h,u&&!u.paused&&u.readyState&&u.duration>h&&h>u.currentTime&&(c.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),u.currentTime=h),this.nextLoadPosition=h}if(e.PTSKnown&&t>r&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown&&i)if(e.hasProgramDateTime)c.logger.log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),s=le(a,i.endProgramDateTime,o.maxFragLookUpTolerance);else{var f=i.sn+1;if(f>=e.startSN&&f<=e.endSN){var p=a[f-e.startSN];i.cc===p.cc&&(s=p,c.logger.log("live playlist, switching playlist, load frag with next SN: "+s.sn))}s||(s=H.search(a,function(e){return i.cc-e.cc}))&&c.logger.log("live playlist, switching playlist, load frag with same CC: "+s.sn)}return s},n._findFragment=function(e,t,n,r,i,a,s){var o,l=this.hls.config;i<a?o=ue(t,r,i,i>a-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance):o=r[n-1];if(o){var u=o.sn-s.startSN,d=t&&o.level===t.level,h=r[u-1],f=r[u+1];if(t&&o.sn===t.sn)if(d&&!o.backtracked)if(o.sn<s.endSN){var p=t.deltaPTS;p&&p>l.maxBufferHole&&t.dropped&&u?(o=h,c.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(o=f,c.logger.log("Re-loading fragment with SN: "+o.sn))}else o=null;else o.backtracked&&(f&&f.backtracked?(c.logger.warn("Already backtracked from fragment "+f.sn+", will not backtrack to fragment "+o.sn+". Loading fragment "+f.sn),o=f):(c.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),o.dropped=0,h?(o=h).backtracked=!0:u&&(o=null)))}return o},n._loadKey=function(e,t){c.logger.log("Loading key for "+e.sn+" of ["+t.startSN+" ,"+t.endSN+"],level "+this.level),this.state=pe.KEY_LOADING,this.hls.trigger(u.default.KEY_LOADING,{frag:e})},n._loadFragment=function(e,t,n,r){var i=this.fragmentTracker.getState(e);this.fragCurrent=e,"initSegment"!==e.sn&&(this.startFragRequested=!0),Object(l.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||i===F||i===B?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,c.logger.log("Loading "+e.sn+" of ["+t.startSN+" ,"+t.endSN+"],level "+this.level+", currentTime:"+n.toFixed(3)+",bufferEnd:"+r.toFixed(3)),this.hls.trigger(u.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new J(this.hls,"main")),this.state=pe.FRAG_LOADING):i===U&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},n.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,a.MAIN)},n.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},n._checkFragmentChanged=function(){var e,t,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((t=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),G.isBuffered(n,t)?e=this.getBufferedFrag(t):G.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var r=e;if(r!==this.fragPlaying){this.hls.trigger(u.default.FRAG_CHANGED,{frag:r});var i=r.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(u.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=r}}},n.immediateLevelSwitch=function(){if(c.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e,t=this.media;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},n.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,G.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},n.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,n,r;if((n=this.getBufferedFrag(e.currentTime))&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),e.paused)t=0;else{var i=this.hls.nextLoadLevel,a=this.levels[i],s=this.fragLastKbps;t=s&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*s)+1:0}if((r=this.getBufferedFrag(e.currentTime+t))&&(r=this.followingBufferedFrag(r))){var o=this.fragCurrent;o&&o.loader&&o.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(r.maxStartPTS,Number.POSITIVE_INFINITY)}}},n.flushMainBuffer=function(e,t){this.state=pe.BUFFER_FLUSHING;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(u.default.BUFFER_FLUSHING,n)},n.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition),this.gapController=new he(n,t,this.fragmentTracker,this.hls)},n.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},n.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;Object(l.isFiniteNumber)(t)&&c.logger.log("media seeked to "+t.toFixed(3)),this.tick()},n.onManifestLoading=function(){c.logger.log("trigger BUFFER_RESET"),this.hls.trigger(u.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},n.onManifestParsed=function(e){var t,n=!1,r=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(r=!0))}),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&c.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},n.onLevelLoaded=function(e){var t=e.details,n=e.level,r=this.levels[this.levelLastLoaded],i=this.levels[n],a=t.totalduration,s=0;if(c.logger.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var o=i.details;o&&t.fragments.length>0?(ne(o,t),s=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(s,o),t.PTSKnown&&Object(l.isFiniteNumber)(s)?c.logger.log("live playlist sliding:"+s.toFixed(3)):(c.logger.log("live playlist - outdated PTS, unknown sliding"),oe(this.fragPrevious,r,t))):(c.logger.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,oe(this.fragPrevious,r,t))}else t.PTSKnown=!1;if(i.details=t,this.levelLastLoaded=n,this.hls.trigger(u.default.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var d=t.startTimeOffset;Object(l.isFiniteNumber)(d)?(d<0&&(c.logger.log("negative start time offset "+d+", count from end of last fragment"),d=s+a+d),c.logger.log("start time offset found in playlist, adjust startPosition to "+d),this.startPosition=d):t.live?(this.startPosition=this.computeLivePosition(s,t),c.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===pe.WAITING_LEVEL&&(this.state=pe.IDLE),this.tick()},n.onKeyLoaded=function(){this.state===pe.KEY_LOADING&&(this.state=pe.IDLE,this.tick())},n.onFragLoaded=function(e){var t=this.fragCurrent,n=this.hls,r=this.levels,i=this.media,a=e.frag;if(this.state===pe.FRAG_LOADING&&t&&"main"===a.type&&a.level===t.level&&a.sn===t.sn){var s=e.stats,o=r[t.level],l=o.details;if(this.bitrateTest=!1,this.stats=s,c.logger.log("Loaded "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level),a.bitrateTest&&n.nextLoadLevel)this.state=pe.IDLE,this.startFragRequested=!1,s.tparsed=s.tbuffered=window.performance.now(),n.trigger(u.default.FRAG_BUFFERED,{stats:s,frag:t,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=pe.IDLE,s.tparsed=s.tbuffered=window.performance.now(),l.initSegment.data=e.payload,n.trigger(u.default.FRAG_BUFFERED,{stats:s,frag:t,id:"main"}),this.tick();else{c.logger.log("Parsing "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level+", cc "+t.cc),this.state=pe.PARSING,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var d=!(i&&i.seeking)&&(l.PTSKnown||!l.live),h=l.initSegment?l.initSegment.data:[],f=this._getAudioCodec(o);(this.demuxer=this.demuxer||new J(this.hls,"main")).push(e.payload,h,f,o.videoCodec,t,l.totalduration,d)}}this.fragLoadError=0},n.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===pe.PARSING){var r,i,a=e.tracks;if(this.audioOnly=a.audio&&!a.video,this.altAudio&&!this.audioOnly&&delete a.audio,i=a.audio){var s=this.levels[this.level].audioCodec,o=navigator.userAgent.toLowerCase();s&&this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),s=-1!==s.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===o.indexOf("firefox")&&(s="mp4a.40.5"),-1!==o.indexOf("android")&&"audio/mpeg"!==i.container&&(s="mp4a.40.2",c.logger.log("Android: force audio codec to "+s)),i.levelCodec=s,i.id=e.id}for(r in(i=a.video)&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(u.default.BUFFER_CODECS,a),a){i=a[r],c.logger.log("main track:"+r+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var l=i.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,{type:r,data:l,parent:"main",content:"initSegment"}))}this.tick()}},n.onFragParsingData=function(e){var t=this,n=this.fragCurrent,r=e.frag;if(n&&"main"===e.id&&r.sn===n.sn&&r.level===n.level&&("audio"!==e.type||!this.altAudio)&&this.state===pe.PARSING){var i=this.levels[this.level],a=n;if(Object(l.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),!0===e.hasAudio&&a.addElementaryStream(g.AUDIO),!0===e.hasVideo&&a.addElementaryStream(g.VIDEO),c.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped)if(a.backtracked)c.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var s=i.details;if(!s||a.sn!==s.startSN)return c.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=pe.IDLE,this.fragPrevious=a,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),void this.tick();c.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var o=te(i.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),d=this.hls;d.trigger(u.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:o,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(n){n&&n.length&&t.state===pe.PARSING&&(t.appended=!0,t.pendingBuffering=!0,d.trigger(u.default.BUFFER_APPENDING,{type:e.type,data:n,parent:"main",content:"data"}))}),this.tick()}},n.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===pe.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=pe.PARSED,this._checkAppendedParsed())},n.onAudioTrackSwitching=function(e){var t=!!e.url,n=e.id;if(!t){if(this.mediaBuffer!==this.media){c.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(c.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=pe.IDLE}var i=this.hls;i.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},n.onAudioTrackSwitched=function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(c.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},n.onBufferCreated=function(e){var t,n,r=e.tracks,i=!1;for(var a in r){var s=r[a];"main"===s.id?(n=a,t=s,"video"===a&&(this.videoBuffer=r[a].buffer)):i=!0}i&&t?(c.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},n.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==pe.PARSING&&t!==pe.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},n._checkAppendedParsed=function(){if(!(this.state!==pe.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;c.logger.log("main buffered : "+ae.toString(t.buffered)),this.fragPrevious=e;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(u.default.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=pe.IDLE}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},n.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=!!this.media&&G.isBuffered(this.media,this.media.currentTime)&&G.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:case o.ErrorDetails.KEY_LOAD_ERROR:case o.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var r=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c.logger.warn("mediaController: frag loading failed, retry in "+r+" ms"),this.retryDate=window.performance.now()+r,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=pe.FRAG_LOADING_WAITING_RETRY}else c.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=pe.ERROR;break;case o.ErrorDetails.LEVEL_LOAD_ERROR:case o.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==pe.ERROR&&(e.fatal?(this.state=pe.ERROR,c.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==pe.WAITING_LEVEL||(this.state=pe.IDLE));break;case o.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==pe.PARSING&&this.state!==pe.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=pe.IDLE):(c.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},n._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,c.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},n._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},n.onFragLoadEmergencyAborted=function(){this.state=pe.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},n.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;if(e){var t=this.audioOnly?g.AUDIO:g.VIDEO;this.fragmentTracker.detectEvictedFragments(t,e.buffered)}this.state=pe.IDLE,this.fragPrevious=null},n.onLevelsUpdated=function(e){this.levels=e.levels},n.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},n._seekToStartPos=function(){var e=this.media,t=this.startPosition,n=e.currentTime;if(n!==t&&t>=0){if(e.seeking)return void c.logger.log("could not seek to "+t+", already seeking at "+n);c.logger.log("seek to target start position "+t+" from current time "+n+". ready state "+e.readyState),e.currentTime=t}},n._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},function(e,t,n){t&&ve(e.prototype,t),n&&ve(e,n)}(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c.logger.log("main stream-controller: "+t+"->"+e),this.hls.trigger(u.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(ge);function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var be=function(e){function t(t){var n;return(n=e.call(this,t,u.default.MANIFEST_LOADED,u.default.LEVEL_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.FRAG_LOADED,u.default.ERROR)||this).canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,me=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},n.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},n.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},n.stopLoad=function(){this.canload=!1},n.onManifestLoaded=function(e){var t,n=[],r=[],i={},a=null,s=!1,l=!1;if(e.levels.forEach(function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,s=s||!!e.videoCodec,l=l||!!e.audioCodec,me&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(a=i[e.bitrate])?a.url.push(e.url):(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,n.push(e)),t&&(t.AUDIO&&Z(a||e,"audio",t.AUDIO),t.SUBTITLES&&Z(a||e,"text",t.SUBTITLES))}),s&&l&&(n=n.filter(function(e){return!!e.videoCodec})),n=n.filter(function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||T(t,"audio"))&&(!n||T(n,"video"))}),e.audioTracks&&(r=e.audioTracks.filter(function(e){return!e.audioCodec||T(e.audioCodec,"audio")})).forEach(function(e,t){e.id=t}),n.length>0){t=n[0].bitrate,n.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=n;for(var d=0;d<n.length;d++)if(n[d].bitrate===t){this._firstLevel=d,c.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+t);break}var h=l&&!s;this.hls.trigger(u.default.MANIFEST_PARSED,{levels:n,audioTracks:r,firstLevel:this._firstLevel,stats:e.stats,audio:l,video:s,altAudio:!h&&r.some(function(e){return!!e.url})})}else this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},n.setLevelInternal=function(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){c.logger.log("switching to level "+e),this.currentLevelIndex=e;var r=t[e];r.level=e,n.trigger(u.default.LEVEL_SWITCHING,r)}var i=t[e],a=i.details;if(!a||a.live){var s=i.urlId;n.trigger(u.default.LEVEL_LOADING,{url:i.url[s],level:e,id:s})}}else n.trigger(u.default.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},n.onError=function(e){if(e.fatal)e.type===o.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,n=!1,r=!1;switch(e.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:case o.ErrorDetails.KEY_LOAD_ERROR:case o.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,r=!0;break;case o.ErrorDetails.LEVEL_LOAD_ERROR:case o.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,n=!0;break;case o.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,n=!0}void 0!==t&&this.recoverLevel(e,t,n,r)}},n.recoverLevel=function(e,t,n,r){var i,a,s,o=this,l=this.hls.config,u=e.details,d=this._levels[t];if(d.loadError++,d.fragmentError=r,n){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return c.logger.error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return o.loadLevel()},a),e.levelRetry=!0,this.levelRetryCount++,c.logger.warn("level controller, "+u+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(n||r)&&((i=d.url.length)>1&&d.loadError<i?(d.urlId=(d.urlId+1)%i,d.details=void 0,c.logger.warn("level controller, "+u+" for level "+t+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(s=0===t?this._levels.length-1:t-1,c.logger.warn("level controller, "+u+": switch to "+s),this.hls.nextAutoLevel=this.currentLevelIndex=s):r&&(c.logger.warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},n.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var n=this._levels[t.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},n.onLevelLoaded=function(e){var t=this,n=e.level,r=e.details;if(n===this.currentLevelIndex){var i=this._levels[n];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),r.live){var a=ie(i.details,r,e.stats.trequest);c.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},a)}else this.clearTimer()}},n.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var r=-1,i=0;i<n.audioGroupIds.length;i++)if(n.audioGroupIds[i]===t){r=i;break}r!==n.urlId&&(n.urlId=r,this.startLoad())}},n.loadLevel=function(){if(c.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,n=e.urlId,r=e.url[n];c.logger.log("Attempt loading level index "+t+" with URL-id "+n),this.hls.trigger(u.default.LEVEL_LOADING,{url:r,level:t,id:n})}}},n.removeLevel=function(e,t){var n=this.levels.filter(function(n,r){return r!==e||n.url.length>1&&void 0!==t&&(n.url=n.url.filter(function(e,n){return n!==t}),n.urlId=0,!0)}).map(function(e,t){var n=e.details;return n&&n.fragments&&n.fragments.forEach(function(e){e.level=t}),e});this._levels=n,this.hls.trigger(u.default.LEVELS_UPDATED,{levels:n})},function(e,t,n){t&&_e(e.prototype,t),n&&_e(e,n)}(t,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),t}(h),Ae=n("./src/demux/id3.js");function Ee(e,t){var n;try{n=new Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function we(e){if(null===e||void 0===e?void 0:e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}var Se=function(e){function t(t){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_METADATA,u.default.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,n.media=void 0,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.destroy=function(){h.prototype.destroy.call(this)},n.onMediaAttached=function(e){this.media=e.media,this.media},n.onMediaDetaching=function(){we(this.id3Track),this.id3Track=void 0,this.media=void 0},n.getID3Track=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return Ee(n,this.media),n}return this.media.addTextTrack("metadata","id3")},n.onFragParsingMetadata=function(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var a=Ae.default.getID3Frames(n[i].data);if(a){var s=Math.max(n[i].pts,0),o=i<n.length-1?n[i+1].pts:t.endPTS;o||(o=t.start+t.duration),s===o?o+=1e-4:s>o&&(c.logger.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),o=s+.25);for(var l=0;l<a.length;l++){var u=a[l];if(!Ae.default.isTimeStampFrame(u)){var d=new r(s,o,"");d.value=u,this.id3Track.addCue(d)}}}}},n.onLiveBackBufferReached=function(e){var t=e.bufferEnd,n=this.id3Track;if(n&&n.cues&&n.cues.length){var r=function(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];for(var n=0,r=e.length-1;n<=r;){var i=Math.floor((r+n)/2);if(t<e[i].endTime)r=i-1;else{if(!(t>e[i].endTime))return e[i];n=i+1}}return e[n].endTime-t<t-e[r].endTime?e[n]:e[r]}(n.cues,t);if(r)for(;n.cues[0]!==r;)n.removeCue(n.cues[0])}},t}(h);var Te=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),ke=function(){function e(e,t,n,r){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Te(t),this.fast_=new Te(n)}var t=e.prototype;return t.sample=function(e,t){var n=(e=Math.max(e,this.minDelayMs_))/1e3,r=8*t/n;this.fast_.sample(n,r),this.slow_.sample(n,r)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}();function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var De=window.performance,Ce=function(e){function t(t){var n;return(n=e.call(this,t,u.default.FRAG_LOADING,u.default.FRAG_LOADED,u.default.FRAG_BUFFERED,u.default.ERROR)||this).lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=t,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.destroy=function(){this.clearTimer(),h.prototype.destroy.call(this)},n.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var n,r,i=this.hls,a=i.config,s=t.level;i.levels[s].details.live?(n=a.abrEwmaFastLive,r=a.abrEwmaSlowLive):(n=a.abrEwmaFastVoD,r=a.abrEwmaSlowVoD),this._bwEstimator=new ke(i,r,n,a.abrEwmaDefaultEstimate)}},n._abandonRulesCheck=function(){var e=this.hls,t=e.media,n=this.fragCurrent;if(n){var r=n.loader;if(!r||r.stats&&r.stats.aborted)return c.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var i=r.stats;if(t&&i&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var a=De.now()-i.trequest,s=Math.abs(t.playbackRate);if(a>500*n.duration/s){var o=e.levels,l=Math.max(1,i.bw?i.bw/8:1e3*i.loaded/a),d=o[n.level];if(!d)return;var h=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,f=i.total?i.total:Math.max(i.loaded,Math.round(n.duration*h/8)),p=t.currentTime,g=(f-i.loaded)/l,v=(G.bufferInfo(t,p,e.config.maxBufferHole).end-p)/s;if(v<2*n.duration/s&&g>v){var m,y=e.minAutoLevel;for(m=n.level-1;m>y;m--){var _=o[m].realBitrate?Math.max(o[m].realBitrate,o[m].bitrate):o[m].bitrate;if(n.duration*_/(6.4*l)<v)break}void 0<g&&(c.logger.warn("loading too slow, abort fragment loading and switch to level "+m+":fragLoadedDelay["+m+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+g.toFixed(1)+":"+v.toFixed(1)),e.nextLoadLevel=m,this._bwEstimator.sample(a,i.loaded),r.abort(),this.clearTimer(),e.trigger(u.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:i}))}}}}},n.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&Object(l.isFiniteNumber)(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],r=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,i=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:r,duration:i},n.realBitrate=Math.round(8*r/i)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},n.onFragBuffered=function(e){var t=e.stats,n=e.frag;if(!0!==t.aborted&&"main"===n.type&&Object(l.isFiniteNumber)(n.sn)&&(!n.bitrateTest||t.tload===t.tbuffered)){var r=t.tparsed-t.trequest;c.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(r,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}},n.onError=function(e){switch(e.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},n.clearTimer=function(){clearInterval(this.timer),this.timer=null},n._findBestLevel=function(e,t,n,r,i,a,s,o,l){for(var u=i;u>=r;u--){var d=l[u];if(d){var h=d.details,f=h?h.totalduration/h.fragments.length:t,p=!!h&&h.live,g=void 0;g=u<=e?s*n:o*n;var v=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,m=v*f/g;if(c.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(g)+"/"+v+"/"+f+"/"+a+"/"+m),g>v&&(!m||p&&!this.bitrateTestDelay||m<a))return u}}return-1},function(e,t,n){t&&xe(e.prototype,t),n&&xe(e,n)}(t,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,r=e.config,i=e.minAutoLevel,a=e.media,s=this.lastLoadedFragLevel,o=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,u=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,h=(G.bufferInfo(a,l,r.maxBufferHole).end-l)/u,f=this._findBestLevel(s,o,d,i,t,h,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(f>=0)return f;c.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=o?Math.min(o,r.maxStarvationDelay):r.maxStarvationDelay,g=r.abrBandWidthFactor,v=r.abrBandWidthUpFactor;if(0===h){var m=this.bitrateTestDelay;if(m)p=(o?Math.min(o,r.maxLoadingDelay):r.maxLoadingDelay)-m,c.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),g=v=1}return f=this._findBestLevel(s,o,d,i,t,h+p,g,v,n),Math.max(f,0)}}]),t}(h);var Re=$(),Le=function(e){function t(t){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.MANIFEST_PARSED,u.default.BUFFER_RESET,u.default.BUFFER_APPENDING,u.default.BUFFER_CODECS,u.default.BUFFER_EOS,u.default.BUFFER_FLUSHING,u.default.LEVEL_PTS_UPDATED,u.default.LEVEL_UPDATED)||this)._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n._needsFlush=!1,n._needsEos=!1,n.config=void 0,n.audioTimestampOffset=void 0,n.bufferCodecEventsExpected=0,n._bufferCodecEventsTotal=0,n.media=null,n.mediaSource=null,n.segments=[],n.parent=void 0,n.appending=!1,n.appended=0,n.appendError=0,n.flushBufferCounter=0,n.tracks={},n.pendingTracks={},n.sourceBuffer={},n.flushRange=[],n._onMediaSourceOpen=function(){c.logger.log("media source opened"),n.hls.trigger(u.default.MEDIA_ATTACHED,{media:n.media});var e=n.mediaSource;e&&e.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},n._onMediaSourceClose=function(){c.logger.log("media source closed")},n._onMediaSourceEnded=function(){c.logger.log("media source ended")},n._onSBUpdateEnd=function(){if(n.audioTimestampOffset&&n.sourceBuffer.audio){var e=n.sourceBuffer.audio;c.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+n.audioTimestampOffset),e.timestampOffset=n.audioTimestampOffset,delete n.audioTimestampOffset}n._needsFlush&&n.doFlush(),n._needsEos&&n.checkEos(),n.appending=!1;var t=n.parent,r=n.segments.reduce(function(e,n){return n.parent===t?e+1:e},0),i={},a=n.sourceBuffer;for(var s in a){var o=a[s];if(!o)throw Error("handling source buffer update end error: source buffer for "+s+" uninitilized and unable to update buffered TimeRanges.");i[s]=o.buffered}n.hls.trigger(u.default.BUFFER_APPENDED,{parent:t,pending:r,timeRanges:i}),n._needsFlush||n.doAppending(),n.updateMediaElementDuration(),0===r&&n.flushLiveBackBuffer()},n._onSBUpdateError=function(e){c.logger.error("sourceBuffer error:",e),n.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.config=t.config,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.destroy=function(){h.prototype.destroy.call(this)},n.onLevelPtsUpdated=function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio;if(!r)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(r.timestampOffset-e.start)>.1){var i=r.updating;try{r.abort()}catch(e){c.logger.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(c.logger.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+e.start),r.timestampOffset=e.start)}}},n.onManifestParsed=function(e){var t=2;(e.audio&&!e.video||!e.altAudio)&&(t=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=t,c.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},n.onMediaAttaching=function(e){var t=this.media=e.media;if(t&&Re){var n=this.mediaSource=new Re;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(n),this._objectUrl=t.src}},n.onMediaDetaching=function(){c.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){c.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):c.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(u.default.MEDIA_DETACHED)},n.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,n=Object.keys(t).length;(n&&!e||2===n)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},n.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{n&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this._onSBUpdateEnd),n.removeEventListener("error",this._onSBUpdateError))}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},n.onBufferCodecs=function(e){var t=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach(function(n){t.pendingTracks[n]=e[n]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},n.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(var r in e)if(!t[r]){var i=e[r];if(!i)throw Error("source buffer exists for track "+r+", however track does not");var a=i.levelCodec||i.codec,s=i.container+";codecs="+a;c.logger.log("creating sourceBuffer("+s+")");try{var l=t[r]=n.addSourceBuffer(s);l.addEventListener("updateend",this._onSBUpdateEnd),l.addEventListener("error",this._onSBUpdateError),this.tracks[r]={buffer:l,codec:a,id:i.id,container:i.container,levelCodec:i.levelCodec}}catch(e){c.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:s})}}this.hls.trigger(u.default.BUFFER_CREATED,{tracks:this.tracks})},n.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},n.onBufferEos=function(e){for(var t in this.sourceBuffer)if(!e.type||e.type===t){var n=this.sourceBuffer[t];n&&!n.ended&&(n.ended=!0,c.logger.log(t+" sourceBuffer now EOS"))}this.checkEos()},n.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var r=e[n];if(r){if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}}c.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){c.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},n.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},n.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,n=this.sourceBuffer,r=Object.keys(n),i=t-Math.max(e,this._levelTargetDuration),a=r.length-1;a>=0;a--){var s=r[a],o=n[s];if(o){var l=o.buffered;l.length>0&&i>l.start(0)&&this.removeBufferRange(s,o,0,i)&&this.hls.trigger(u.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i})}}else c.logger.error("flushLiveBackBuffer called without attaching media")}},n.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},n.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer){var r=this.sourceBuffer[n];if(r&&!0===r.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(c.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object(l.isFiniteNumber)(e))&&(c.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},n.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var r in n){var i=n[r];i&&(t+=i.buffered.length)}}catch(e){c.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(u.default.BUFFER_FLUSHED)}},n.doAppending=function(){var e=this.config,t=this.hls,n=this.segments,r=this.sourceBuffer;if(Object.keys(r).length){if(!this.media||this.media.error)return this.segments=[],void c.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var i=n.shift();if(i)try{var a=r[i.type];if(!a)return void this._onSBUpdateEnd();if(a.updating)return void n.unshift(i);a.ended=!1,this.parent=i.parent,a.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0}catch(r){c.logger.error("error while trying to append buffer:"+r.message),n.unshift(i);var s={type:o.ErrorTypes.MEDIA_ERROR,parent:i.parent,details:"",fatal:!1};22===r.code?(this.segments=[],s.details=o.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,s.details=o.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(c.logger.log("fail "+e.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],s.fatal=!0)),t.trigger(u.default.ERROR,s)}}}},n.flushBuffer=function(e,t,n){var r=this.sourceBuffer;if(!Object.keys(r).length)return!0;var i="null";if(this.media&&(i=this.media.currentTime.toFixed(3)),c.logger.log("flushBuffer,pos/start/end: "+i+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return c.logger.warn("abort flushing too many retries"),!0;var a=r[n];if(a){if(a.ended=!1,a.updating)return c.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(n,a,e,t))return this.flushBufferCounter++,!1}return c.logger.log("buffer flushed"),!0},n.removeBufferRange=function(e,t,n,r){try{for(var i=0;i<t.buffered.length;i++){var a=t.buffered.start(i),s=t.buffered.end(i),o=Math.max(a,n),l=Math.min(s,r);if(Math.min(l,s)-o>.5){var u="null";return this.media&&(u=this.media.currentTime.toString()),c.logger.log("sb remove "+e+" ["+o+","+l+"], of ["+a+","+s+"], pos:"+u),t.remove(o,l),!0}}}catch(e){c.logger.warn("removeBufferRange failed",e)}return!1},t}(h);function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ie=function(e){function t(t){var n;return(n=e.call(this,t,u.default.FPS_DROP_LEVEL_CAPPING,u.default.MEDIA_ATTACHING,u.default.MANIFEST_PARSED,u.default.LEVELS_UPDATED,u.default.BUFFER_CODECS,u.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n.clientRect=null,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},n.onFpsDropLevelCapping=function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},n.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},n.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},n.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},n.onLevelsUpdated=function(e){this.levels=e.levels},n.onMediaDetaching=function(){this.stopCapping()},n.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},n.getMaxLevel=function(e){var n=this;if(!this.levels)return-1;var r=this.levels.filter(function(r,i){return t.isLevelAllowed(i,n.restrictedLevels)&&i<=e});return this.clientRect=null,t.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},n.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},n.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},n.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t},t.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},t.getMaxLevelByMediaSize=function(e,t,n){if(!e||e&&!e.length)return-1;for(var r=function(e,t){return!t||(e.width!==t.width||e.height!==t.height)},i=e.length-1,a=0;a<e.length;a+=1){var s=e[a];if((s.width>=t||s.height>=n)&&r(s,e[a+1])){i=a;break}}return i},function(e,t,n){t&&Pe(e.prototype,t),n&&Pe(e,n)}(t,[{key:"mediaWidth",get:function(){return this.getDimensions().width*t.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*t.contentScaleFactor}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),t}(h);var Oe=window.performance,Ne=function(e){function t(t){return e.call(this,t,u.default.MEDIA_ATTACHING)||this}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},n.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},n.checkFPS=function(e,t,n){var r=Oe.now();if(t){if(this.lastTime){var i=r-this.lastTime,a=n-this.lastDroppedFrames,s=t-this.lastDecodedFrames,o=1e3*a/i,l=this.hls;if(l.trigger(u.default.FPS_DROP,{currentDropped:a,currentDecoded:s,totalDroppedFrames:n}),o>0&&a>l.config.fpsDroppedMonitoringThreshold*s){var d=l.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=d)&&(d-=1,l.trigger(u.default.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,l.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},n.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(h),Me=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function(){this.abort(),this.loader=null},t.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e,t=this.context;e=this.loader=new window.XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(e,t.url)}catch(n){e.open("GET",t.url,!0),r(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},t.readystatechange=function(e){var t=e.currentTarget,n=t.readyState,r=this.stats,i=this.context,a=this.config;if(!r.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(window.performance.now(),r.trequest)),4===n){var s=t.status;if(s>=200&&s<300){var o,l;r.tload=Math.max(r.tfirst,window.performance.now()),l="arraybuffer"===i.responseType?(o=t.response).byteLength:(o=t.responseText).length,r.loaded=r.total=l;var u={url:t.responseURL,data:o};this.callbacks.onSuccess(u,r,i,t)}else r.retry>=a.maxRetry||s>=400&&s<499?(c.logger.error(s+" while loading "+i.url),this.callbacks.onError({code:s,text:t.statusText},i,t)):(c.logger.warn(s+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},t.loadtimeout=function(){c.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var r=this.callbacks.onProgress;r&&r(n,this.context,null,t)},e}();function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ue=function(e){function t(t){var n;return(n=e.call(this,t,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.AUDIO_TRACK_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.LEVEL_LOADED,u.default.ERROR)||this)._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},n.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(u.default.AUDIO_TRACKS_UPDATED,{audioTracks:t}),this._selectAudioGroup(this.hls.nextLoadLevel)},n.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)c.logger.warn("Invalid audio track id:",e.id);else{if(c.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},n.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},n.onLevelLoaded=function(e){this._selectAudioGroup(e.level)},n.onError=function(e){e.type===o.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(c.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},n._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)c.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)c.logger.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];c.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var n=t.url,r=t.type,i=t.id;this.hls.trigger(u.default.AUDIO_TRACK_SWITCHING,{id:i,type:r,url:n}),this._loadTrackDetailsIfNeeded(t)}},n.doTick=function(){this._updateTrack(this._trackId)},n._selectAudioGroup=function(e){var t=this.hls.levels[e];if(t&&t.audioGroupIds){var n=t.audioGroupIds[t.urlId];this.audioGroupId!==n&&(this.audioGroupId=n,this._selectInitialAudioTrack())}},n._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var n=this.tracks[this._trackId],r=null;if(n&&(r=n.name),this._selectDefaultTrack){var i=t.filter(function(e){return e.default});i.length?t=i:c.logger.warn("No default audio tracks defined")}var a=!1,s=function(){t.forEach(function(t){a||e.audioGroupId&&t.groupId!==e.audioGroupId||r&&r!==t.name||(e._setAudioTrack(t.id),a=!0)})};s(),a||(r=null,s()),a||(c.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},n._needsTrackLoading=function(e){var t=e.details,n=e.url;return!(t&&!t.live)&&!!n},n._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,n=e.id;c.logger.log("loading audio-track playlist for id: "+n),this.hls.trigger(u.default.AUDIO_TRACK_LOADING,{url:t,id:n})}},n._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,c.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},n._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],n=t.name,r=t.language,i=t.groupId;c.logger.warn("Loading failed on audio track id: "+e+", group-id: "+i+', name/language: "'+n+'" / "'+r+'"');for(var a=e,s=0;s<this.tracks.length;s++){if(!this.trackIdBlacklist[s])if(this.tracks[s].name===n){a=s;break}}a!==e?(c.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)):c.logger.warn('No fallback audio-track found for name/language: "'+n+'" / "'+r+'"')},function(e,t,n){t&&Fe(e.prototype,t),n&&Fe(e,n)}(t,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}]),t}(fe);function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var je=window.performance,qe=function(e){function t(t,n){var r;return(r=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.AUDIO_TRACKS_UPDATED,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_LOADED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.BUFFER_RESET,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED,u.default.INIT_PTS_FOUND)||this).fragmentTracker=n,r.config=t.config,r.audioCodecSwap=!1,r._state=pe.STOPPED,r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.onInitPtsFound=function(e){var t=e.id,n=e.frag.cc,r=e.initPTS;"main"===t&&(this.initPTS[n]=r,this.videoTrackCC=n,c.logger.log("InitPTS for cc: "+n+" found from video track: "+r),this.state===pe.WAITING_INIT_PTS&&this.tick())},n.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(c.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=pe.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=pe.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=pe.STOPPED},n.doTick=function(){var e,t,n,r=this.hls,i=r.config;switch(this.state){case pe.ERROR:case pe.PAUSED:case pe.BUFFER_FLUSHING:break;case pe.STARTING:this.state=pe.WAITING_TRACK,this.loadedmetadata=!1;break;case pe.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var s=this.mediaBuffer?this.mediaBuffer:this.media,o=this.videoBuffer?this.videoBuffer:this.media,d=e<i.maxBufferHole?Math.max(2,i.maxBufferHole):i.maxBufferHole,h=G.bufferInfo(s,e,d),f=G.bufferInfo(o,e,d),p=h.len,g=h.end,v=this.fragPrevious,m=Math.min(i.maxBufferLength,i.maxMaxBufferLength),y=Math.max(m,f.len),_=this.audioSwitch,b=this.trackId;if((p<y||_)&&b<a.length){if(void 0===(n=a[b].details)){this.state=pe.WAITING_TRACK;break}if(!_&&this._streamEnded(h,n))return this.hls.trigger(u.default.BUFFER_EOS,{type:"audio"}),void(this.state=pe.ENDED);var A,E=n.fragments,w=E.length,S=E[0].start,T=E[w-1].start+E[w-1].duration;if(_)if(n.live&&!n.PTSKnown)c.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),g=0;else if(g=e,n.PTSKnown&&e<S){if(!(h.end>S||h.nextStart))return;c.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=S+.05}if(n.initSegment&&!n.initSegment.data)A=n.initSegment;else if(g<=S){if(A=E[0],null!==this.videoTrackCC&&A.cc!==this.videoTrackCC&&(A=function(e,t){return H.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}(E,this.videoTrackCC)),n.live&&A.loadIdx&&A.loadIdx===this.fragLoadIdx){var k=h.nextStart?h.nextStart:S;return c.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(k+.05)),void(this.media.currentTime=k+.05)}}else{var x,D=i.maxFragLookUpTolerance,C=v?E[v.sn-E[0].sn+1]:void 0,R=function(e){var t=Math.min(D,e.duration);return e.start+e.duration-t<=g?1:e.start-t>g&&e.start?-1:0};g<T?(g>T-D&&(D=0),x=C&&!R(C)?C:H.search(E,R)):x=E[w-1],x&&(A=x,S=x.start,v&&A.level===v.level&&A.sn===v.sn&&(A.sn<n.endSN?(A=E[A.sn+1-n.startSN],c.logger.log("SN just loaded, load next one: "+A.sn)):A=null))}A&&(A.encrypted?(c.logger.log("Loading key for "+A.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+b),this.state=pe.KEY_LOADING,r.trigger(u.default.KEY_LOADING,{frag:A})):(this.fragCurrent=A,(_||this.fragmentTracker.getState(A)===F)&&(c.logger.log("Loading "+A.sn+", cc: "+A.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+b+", currentTime:"+e+",bufferEnd:"+g.toFixed(3)),"initSegment"!==A.sn&&(this.startFragRequested=!0),Object(l.isFiniteNumber)(A.sn)&&(this.nextLoadPosition=A.start+A.duration),r.trigger(u.default.FRAG_LOADING,{frag:A}),this.state=pe.FRAG_LOADING)))}break;case pe.WAITING_TRACK:(t=this.tracks[this.trackId])&&t.details&&(this.state=pe.IDLE);break;case pe.FRAG_LOADING_WAITING_RETRY:var L=je.now(),P=this.retryDate,I=(s=this.media)&&s.seeking;(!P||L>=P||I)&&(c.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=pe.IDLE);break;case pe.WAITING_INIT_PTS:var O=this.videoTrackCC;if(void 0===this.initPTS[O])break;var N=this.waitingFragment;if(N){var M=N.frag.cc;O!==M?(t=this.tracks[this.trackId]).details&&t.details.live&&(c.logger.warn("Waiting fragment CC ("+M+") does not match video track CC ("+O+")"),this.waitingFragment=null,this.state=pe.IDLE):(this.state=pe.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=pe.IDLE;break;case pe.STOPPED:case pe.FRAG_LOADING:case pe.PARSING:case pe.PARSED:case pe.ENDED:}},n.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},n.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},n.onAudioTracksUpdated=function(e){c.logger.log("audio tracks updated"),this.tracks=e.audioTracks},n.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=pe.PAUSED,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=pe.IDLE),this.tick()},n.onAudioTrackLoaded=function(e){var t=e.details,n=e.id,r=this.tracks[n],i=t.totalduration,a=0;if(c.logger.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.live){var s=r.details;s&&t.fragments.length>0?(ne(s,t),a=t.fragments[0].start,t.PTSKnown?c.logger.log("live audio playlist sliding:"+a.toFixed(3)):c.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,c.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(r.details=t,!this.startFragRequested){if(-1===this.startPosition){var o=t.startTimeOffset;Object(l.isFiniteNumber)(o)?(c.logger.log("start time offset found in playlist, adjust startPosition to "+o),this.startPosition=o):t.live?(this.startPosition=this.computeLivePosition(a,t),c.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===pe.WAITING_TRACK&&(this.state=pe.IDLE),this.tick()},n.onKeyLoaded=function(){this.state===pe.KEY_LOADING&&(this.state=pe.IDLE,this.tick())},n.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===pe.FRAG_LOADING&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var r=this.tracks[this.trackId],i=r.details,a=i.totalduration,s=t.level,o=t.sn,l=t.cc,d=this.config.defaultAudioCodec||r.audioCodec||"mp4a.40.2",h=this.stats=e.stats;if("initSegment"===o)this.state=pe.IDLE,h.tparsed=h.tbuffered=je.now(),i.initSegment.data=e.payload,this.hls.trigger(u.default.FRAG_BUFFERED,{stats:h,frag:t,id:"audio"}),this.tick();else{this.state=pe.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new J(this.hls,"audio"));var f=this.initPTS[l],p=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==f){this.pendingBuffering=!0,c.logger.log("Demuxing "+o+" of ["+i.startSN+" ,"+i.endSN+"],track "+s);this.demuxer.push(e.payload,p,d,null,t,a,!1,f)}else c.logger.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+o+" of ["+i.startSN+" ,"+i.endSN+"],track "+s),this.waitingFragment=e,this.state=pe.WAITING_INIT_PTS}}this.fragLoadError=0},n.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===pe.PARSING){var r,i=e.tracks;if(i.video&&delete i.video,r=i.audio){r.levelCodec=r.codec,r.id=e.id,this.hls.trigger(u.default.BUFFER_CODECS,i),c.logger.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var a=r.initSegment;if(a){var s={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[s]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,s))}this.tick()}}},n.onFragParsingData=function(e){var t=this,n=this.fragCurrent,r=e.frag;if(n&&"audio"===e.id&&"audio"===e.type&&r.sn===n.sn&&r.level===n.level&&this.state===pe.PARSING){var i=this.trackId,a=this.tracks[i],s=this.hls;Object(l.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),n.addElementaryStream(g.AUDIO),c.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),te(a.details,n,e.startPTS,e.endPTS);var d=this.audioSwitch,h=this.media,f=!1;if(d)if(h&&h.readyState){var p=h.currentTime;c.logger.log("switching audio track : currentTime:"+p),p>=e.startPTS&&(c.logger.log("switching audio track : flushing all audio"),this.state=pe.BUFFER_FLUSHING,s.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),f=!0,this.audioSwitch=!1,s.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,s.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:i});var v=this.pendingData;if(!v)return c.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void s.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&v.push({type:e.type,data:t,parent:"audio",content:"data"})}),!f&&v.length&&(v.forEach(function(e){t.state===pe.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(u.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},n.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===pe.PARSING&&(this.stats.tparsed=je.now(),this.state=pe.PARSED,this._checkAppendedParsed())},n.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},n.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},n.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==pe.PARSING&&t!==pe.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},n._checkAppendedParsed=function(){if(!(this.state!==pe.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=je.now(),n.trigger(u.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;r&&c.logger.log("audio buffered : "+ae.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=pe.IDLE}this.tick()}},n.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=e.frag;if(n&&"audio"!==n.type)break;if(!e.fatal){var r=this.fragLoadError;r?r++:r=1;var i=this.config;if(r<=i.fragLoadingMaxRetry){this.fragLoadError=r;var a=Math.min(Math.pow(2,r-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);c.logger.warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=je.now()+a,this.state=pe.FRAG_LOADING_WAITING_RETRY}else c.logger.error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=pe.ERROR}break;case o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case o.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case o.ErrorDetails.KEY_LOAD_ERROR:case o.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==pe.ERROR&&(this.state=e.fatal?pe.ERROR:pe.IDLE,c.logger.warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case o.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===pe.PARSING||this.state===pe.PARSED)){var s=this.mediaBuffer,l=this.media.currentTime;if(s&&G.isBuffered(s,l)&&G.isBuffered(s,l+.5)){var d=this.config;d.maxMaxBufferLength>=d.maxBufferLength&&(d.maxMaxBufferLength/=2,c.logger.warn("AudioStreamController: reduce max buffer length to "+d.maxMaxBufferLength+"s")),this.state=pe.IDLE}else c.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=pe.BUFFER_FLUSHING,this.hls.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},n.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(c.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach(function(t){e.hls.trigger(u.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=pe.PARSED):(this.state=pe.IDLE,this.fragPrevious=null,this.tick())},function(e,t,n){t&&Be(e.prototype,t),n&&Be(e,n)}(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(ge),He=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e="auto",t={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right:!0};function r(e){return"string"==typeof e&&(!!n[e.toLowerCase()]&&e.toLowerCase())}function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function a(n,a,s){var o=this,l={enumerable:!0};o.hasBeenReset=!1;var u="",c=!1,d=n,h=a,f=s,p=null,g="",v=!0,m="auto",y="start",_=50,b="middle",A=50,E="middle";Object.defineProperty(o,"id",i({},l,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(o,"pauseOnExit",i({},l,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(o,"startTime",i({},l,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},l,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},l,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},l,{get:function(){return g},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");g=n,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},l,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},l,{get:function(){return m},set:function(t){if("number"!=typeof t&&t!==e)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},l,{get:function(){return y},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},l,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},l,{get:function(){return b},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},l,{get:function(){return A},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");A=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},l,{get:function(){return E},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),o.displayState=void 0}return a.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},a}(),Ge=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function Ve(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Ge,this.regionList=[]}function Ke(){this.values=Object.create(null)}function We(e,t,n,r){var i=r?e.split(r):[e];for(var a in i)if("string"==typeof i[a]){var s=i[a].split(n);if(2===s.length)t(s[0],s[1])}}Ke.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var $e=new He(0,0,0),ze="middle"===$e.align?"middle":"center";function Ye(e,t,n){var r=e;function i(){var t=function(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=i(),a(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),a(),t.endTime=i(),a(),function(e,t){var r=new Ke;We(e,function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];r.integer(e,s),r.percent(e,s)&&r.set("snapToLines",!1),r.alt(e,s,["auto"]),2===a.length&&r.alt("lineAlign",a[1],["start",ze,"end"]);break;case"position":a=t.split(","),r.percent(e,a[0]),2===a.length&&r.alt("positionAlign",a[1],["start",ze,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",ze,"end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===$e.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",ze);var a=r.get("position","auto");"auto"===a&&50===$e.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function Xe(e){return e.replace(/<br(?: \/)?>/gi,"\n")}Ve.prototype={parse:function(e){var t=this;function n(){var e=t.buffer,n=0;for(e=Xe(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var r=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),r}function r(e){We(e,function(e,t){e},/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(i=n()).match(/^()?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var s=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:i=n(),t.state){case"HEADER":/:/.test(i)?r(i):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new He(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{Ye(i,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var o=-1!==i.indexOf("--\x3e");if(!i||o&&(s=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}};var Qe=Ve;function Je(e,t,n,r){for(var i,a,s,o,l,u=[],c=window.VTTCue||TextTrackCue,d=0;d<r.rows.length;d++)if(s=!0,o=0,l="",!(i=r.rows[d]).isEmpty()){for(var h=0;h<i.chars.length;h++)i.chars[h].uchar.match(/\s/)&&s?o++:(l+=i.chars[h].uchar,s=!1);i.cueStartTime=t,t===n&&(n+=1e-4),a=new c(t,n,Xe(l.trim())),o>=16?o--:o++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,o/32*100)),u.push(a),e&&e.addCue(a)}return u}var Ze,et={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},tt=function(e){var t=e;return et.hasOwnProperty(e)&&(t=et[e]),String.fromCharCode(t)},nt=15,rt=100,it={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},at={17:2,18:4,21:6,22:8,23:10,19:13,20:15},st={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},ot={25:2,26:4,29:6,30:8,31:10,27:13,28:15},lt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(Ze||(Ze={}));var ut=function(){function e(){this.time=null,this.verboseLevel=Ze.ERROR}return e.prototype.log=function(e,t){this.verboseLevel>=e&&c.logger.log(this.time+" ["+e+"] "+t)},e}(),ct=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},dt=function(){function e(e,t,n,r,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),ht=function(){function e(e,t,n,r,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new dt(t,n,r,i,a)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),ft=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<rt;t++)this.chars.push(new ht);this.logger=e,this.pos=0,this.currPenState=new dt}var t=e.prototype;return t.equals=function(e){for(var t=!0,n=0;n<rt;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<rt;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<rt;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(Ze.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>rt&&(this.logger.log(Ze.DEBUG,"Too large cursor position "+this.pos),this.pos=rt)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=tt(e);this.pos>=rt?this.logger.log(Ze.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<rt;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,n=0;n<rt;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),pt=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<nt;t++)this.rows.push(new ft(e));this.logger=e,this.currRow=nt-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<nt;e++)this.rows[e].clear();this.currRow=nt-1},t.equals=function(e){for(var t=!0,n=0;n<nt;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<nt;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<nt;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(Ze.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(Ze.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<nt;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[r].cueStartTime,s=this.logger.time;if(a&&null!==s&&a<s)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(i.rows[r+o])}}this.currRow=t;var l=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,c=Math.max(u-1,0);l.setCursor(e.indent),e.color=l.chars[c].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)},t.setBkgData=function(e){this.logger.log(Ze.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(Ze.TEXT,this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(Ze.INFO,"Rolling up")}else this.logger.log(Ze.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<nt;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},t.getTextAndFormat=function(){return this.rows},e}(),gt=function(){function e(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new pt(n),this.nonDisplayedMemory=new pt(n),this.lastOutputScreen=new pt(n),this.currRollUpRow=this.displayedMemory.rows[nt-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[nt-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(Ze.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(Ze.INFO,n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(Ze.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(Ze.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(Ze.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(Ze.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(Ze.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(Ze.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(Ze.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(Ze.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(Ze.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(Ze.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(Ze.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(Ze.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(this.logger.log(Ze.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(Ze.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(Ze.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}this.logger.log(Ze.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}();function vt(e,t,n){n.a=e,n.b=t}function mt(e,t,n){return n.a===e&&n.b===t}var yt=function(){function e(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var r=new ut;this.channels=[null,new gt(e,t,r),new gt(e+1,n,r)],this.cmdHistory={a:null,b:null},this.logger=r}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var n,r,i,a=!1;this.logger.time=e;for(var s=0;s<t.length;s+=2)if(r=127&t[s],i=127&t[s+1],0!==r||0!==i){if(this.logger.log(Ze.DATA,"["+ct([t[s],t[s+1]])+"] -> ("+ct([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(a=this.parseChars(r,i))){var o=this.currentChannel;if(o&&o>0)this.channels[o].insertChars(a);else this.logger.log(Ze.WARNING,"No channel found yet. TEXT-MODE?")}n||a||this.logger.log(Ze.WARNING,"Couldn't parse cleaned data "+ct([r,i])+" orig: "+ct([t[s],t[s+1]]))}},t.parseCmd=function(e,t){var n=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;if(mt(e,t,n))return vt(null,null,n),this.logger.log(Ze.DEBUG,"Repeated command ("+ct([e,t])+") is dropped"),!0;var r=20===e||21===e||23===e?1:2,i=this.channels[r];return 20===e||21===e||28===e||29===e?32===t?i.ccRCL():33===t?i.ccBS():34===t?i.ccAOF():35===t?i.ccAON():36===t?i.ccDER():37===t?i.ccRU(2):38===t?i.ccRU(3):39===t?i.ccRU(4):40===t?i.ccFON():41===t?i.ccRDC():42===t?i.ccTR():43===t?i.ccRTD():44===t?i.ccEDM():45===t?i.ccCR():46===t?i.ccENM():47===t&&i.ccEOC():i.ccTO(t-32),vt(e,t,n),this.currentChannel=r,!0},t.parseMidrow=function(e,t){var n=0;if((17===e||25===e)&&t>=32&&t<=47){if((n=17===e?1:2)!==this.currentChannel)return this.logger.log(Ze.ERROR,"Mismatch channel in midrow parsing"),!1;var r=this.channels[n];return!!r&&(r.ccMIDROW(t),this.logger.log(Ze.DEBUG,"MIDROW ("+ct([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var n,r=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;if(mt(e,t,r))return vt(null,null,r),!0;var i=e<=23?1:2;n=t>=64&&t<=95?1===i?it[e]:st[e]:1===i?at[e]:ot[e];var a=this.channels[i];return!!a&&(a.setPAC(this.interpretPAC(n,t)),vt(e,t,r),this.currentChannel=i,!0)},t.interpretPAC=function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},t.parseChars=function(e,t){var n,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19){var a=t;a=17===i?t+80:18===i?t+112:t+144,this.logger.log(Ze.INFO,"Special char '"+tt(a)+"' in channel "+n),r=[a]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);if(r){var s=ct(r);this.logger.log(Ze.DEBUG,"Char codes =  "+s.join(",")),vt(e,t,this.cmdHistory)}return r},t.parseBackgroundAttributes=function(e,t){var n;if(!((16===e||24===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=45&&t<=47))return!1;var r={};16===e||24===e?(n=Math.floor((t-32)/2),r.background=lt[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0));var i=e<=23?1:2;return this.channels[i].setBkgData(r),vt(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var n=this.channels[t];n&&n.cueSplitAtTime(e)}},e}(),_t=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[]},e}(),bt=function(e,t,n){return e.substr(n||0,t.length)===t},At=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},Et={parse:function(e,t,n,r,i,a){var s,o=Object(Ae.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),u="00:00.000",c=0,d=0,h=0,f=[],p=!0,g=!1,v=new Qe;v.oncue=function(e){var t=n[r],i=n.ccOffset;t&&t.new&&(void 0!==d?i=n.ccOffset=t.start:function(e,t,n){var r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;i&&i.new;)e.ccOffset+=r.start-i.start,r.new=!1,i=e[(r=i).prevCC];e.presentationOffset=n}(n,r,h)),h&&(i=h-n.presentationOffset),g&&(e.startTime+=i-d,e.endTime+=i-d),e.id=At(e.startTime.toString())+At(e.endTime.toString())+At(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&f.push(e)},v.onparsingerror=function(e){s=e},v.onflush=function(){s&&a?a(s):i(f)},o.forEach(function(e){if(p){if(bt(e,"X-TIMESTAMP-MAP=")){p=!1,g=!0,e.substr(16).split(",").forEach(function(e){bt(e,"LOCAL:")?u=e.substr(6):bt(e,"MPEGTS:")&&(c=parseInt(e.substr(7)))});try{t+(9e4*n[r].start||0)<0&&(t+=8589934592),c-=t,d=function(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),r=parseInt(e.substr(-9,2)),i=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!(Object(l.isFiniteNumber)(t)&&Object(l.isFiniteNumber)(n)&&Object(l.isFiniteNumber)(r)&&Object(l.isFiniteNumber)(i)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*n,t+=6e4*r,t+=36e5*i}(u)/1e3,h=c/9e4}catch(e){g=!1,s=e}return}""===e&&(p=!1)}v.parse(e+"\n")}),v.flush()}};function wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function St(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function Tt(e,t,n,r){return Math.min(t,r)-Math.max(e,n)}var kt=function(e){function t(t){var n;if((n=e.call(this,t,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_USERDATA,u.default.FRAG_DECRYPTED,u.default.MANIFEST_LOADING,u.default.MANIFEST_LOADED,u.default.FRAG_LOADED,u.default.INIT_PTS_FOUND)||this).media=null,n.config=void 0,n.enabled=!0,n.Cues=void 0,n.textTracks=[],n.tracks=[],n.initPTS=[],n.unparsedVttFrags=[],n.captionsTracks={},n.nonNativeCaptionsTracks={},n.captionsProperties=void 0,n.cea608Parser1=void 0,n.cea608Parser2=void 0,n.lastSn=-1,n.prevCC=-1,n.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},n.hls=t,n.config=t.config,n.Cues=t.config.cueHandler,n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode},textTrack3:{label:n.config.captionsTextTrack3Label,languageCode:n.config.captionsTextTrack3LanguageCode},textTrack4:{label:n.config.captionsTextTrack4Label,languageCode:n.config.captionsTextTrack4LanguageCode}},n.config.enableCEA708Captions){var r=new _t(wt(n),"textTrack1"),i=new _t(wt(n),"textTrack2"),a=new _t(wt(n),"textTrack3"),s=new _t(wt(n),"textTrack4");n.cea608Parser1=new yt(1,r,i),n.cea608Parser2=new yt(3,a,s)}return n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.addCues=function(e,t,n,r,i){for(var a=!1,s=i.length;s--;){var o=i[s],l=Tt(o[0],o[1],t,n);if(l>=0&&(o[0]=Math.min(o[0],t),o[1]=Math.max(o[1],n),a=!0,l/(n-t)>.5))return}if(a||i.push([t,n]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[e],t,n,r);else{var c=this.Cues.newCue(null,t,n,r);this.hls.trigger(u.default.CUES_PARSED,{type:"captions",cues:c,track:e})}},n.onInitPtsFound=function(e){var t=this,n=e.frag,r=e.id,i=e.initPTS,a=this.unparsedVttFrags;"main"===r&&(this.initPTS[n.cc]=i),a.length&&(this.unparsedVttFrags=[],a.forEach(function(e){t.onFragLoaded(e)}))},n.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n];if(r[e])return r}return null},n.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},n.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,n=this.captionsTracks,r=this.media,i=t[e],a=i.label,s=i.languageCode,o=this.getExistingTrack(e);if(o)n[e]=o,we(n[e]),Ee(n[e],r);else{var l=this.createTextTrack("captions",a,s);l&&(l[e]=!0,n[e]=l)}}},n.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}}},n.createTextTrack=function(e,t,n){var r=this.media;if(r)return r.addTextTrack(e,t,n)},n.destroy=function(){e.prototype.destroy.call(this)},n.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},n.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(t){we(e[t]),delete e[t]}),this.nonNativeCaptionsTracks={}},n.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},n._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)we(t[n])}},n.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var n=e.subtitles||[],r=this.tracks&&n&&this.tracks.length===n.length;if(this.tracks=e.subtitles||[],this.config.renderTextTracksNatively){var i=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,n){var r;if(n<i.length){for(var a=null,s=0;s<i.length;s++)if(St(i[s],e)){a=i[s];break}a&&(r=a)}r||(r=t.createTextTrack("subtitles",e.name,e.lang)),e.default?r.mode=t.hls.subtitleDisplay?"showing":"hidden":r.mode="disabled",t.textTracks.push(r)})}else if(!r&&this.tracks&&this.tracks.length){var a=this.tracks.map(function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}});this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}this.config.enableCEA708Captions&&e.captions&&e.captions.forEach(function(e){var n=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(n){var r="textTrack"+n[1],i=t.captionsProperties[r];i&&(i.label=e.name,e.lang&&(i.languageCode=e.lang),i.media=e)}})},n.onFragLoaded=function(e){var t=e.frag,n=e.payload,r=this.cea608Parser1,i=this.cea608Parser2,a=this.initPTS,s=this.lastSn,o=this.unparsedVttFrags;if("main"===t.type){var c=t.sn;t.sn!==s+1&&r&&i&&(r.reset(),i.reset()),this.lastSn=c}else if("subtitle"===t.type)if(n.byteLength){if(!Object(l.isFiniteNumber)(a[t.cc]))return o.push(e),void(a.length&&this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));var d=t.decryptdata;null!=d&&null!=d.key&&"AES-128"===d.method||this._parseVTTs(t,n)}else this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},n._parseVTTs=function(e,t){var n=this,r=this.hls,i=this.prevCC,a=this.textTracks,s=this.vttCCs;s[e.cc]||(s[e.cc]={start:e.start,prevCC:i,new:!0},this.prevCC=e.cc),Et.parse(t,this.initPTS[e.cc],s,e.cc,function(t){if(n.config.renderTextTracksNatively){var i=a[e.level];if("disabled"===i.mode)return void r.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e});t.forEach(function(e){if(!i.cues.getCueById(e.id))try{if(i.addCue(e),!i.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(n){c.logger.debug("Failed occurred on adding cues: "+n);var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,i.addCue(t)}})}else{var s=n.tracks[e.level].default?"default":"subtitles"+e.level;r.trigger(u.default.CUES_PARSED,{type:"subtitles",cues:t,track:s})}r.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(t){c.logger.log("Failed to parse VTT cue: "+t),r.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},n.onFragDecrypted=function(e){var t=e.frag,n=e.payload;if("subtitle"===t.type){if(!Object(l.isFiniteNumber)(this.initPTS[t.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(t,n)}},n.onFragParsingUserdata=function(e){var t=this.cea608Parser1,n=this.cea608Parser2;if(this.enabled&&t&&n)for(var r=0;r<e.samples.length;r++){var i=e.samples[r].bytes;if(i){var a=this.extractCea608Data(i);t.addData(e.samples[r].pts,a[0]),n.addData(e.samples[r].pts,a[1])}}},n.extractCea608Data=function(e){for(var t=31&e[0],n=2,r=[[],[]],i=0;i<t;i++){var a=e[n++],s=127&e[n++],o=127&e[n++],l=3&a;0===s&&0===o||0!=(4&a)&&(0!==l&&1!==l||(r[l].push(s),r[l].push(o)))}return r},t}(h);function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dt(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"subtitles"===r.kind&&r.label&&t.push(e[n])}return t}var Ct=function(e){function t(t){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADED,u.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],n.trackId=-1,n.media=null,n.stopped=!0,n.subtitleDisplay=!0,n.queuedDefaultTrack=null,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.destroy=function(){h.prototype.destroy.call(this)},n.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(Object(l.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},n.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(l.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),Dt(this.media.textTracks).forEach(function(e){we(e)}),this.subtitleTrack=-1,this.media=null)},n.onManifestLoaded=function(e){var t=this,n=e.subtitles||[];this.tracks=n,this.hls.trigger(u.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},n.onSubtitleTrackLoaded=function(e){var t=this,n=e.id,r=e.details,i=this.trackId,a=this.tracks,s=a[i];if(n>=a.length||n!==i||!s||this.stopped)this._clearReloadTimer();else if(c.logger.log("subtitle track "+n+" loaded"),r.live){var o=ie(s.details,r,e.stats.trequest);c.logger.log("Reloading live subtitle playlist in "+o+"ms"),this.timer=setTimeout(function(){t._loadCurrentTrack()},o)}else this._clearReloadTimer()},n.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},n.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},n._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},n._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,n=this.hls,r=t[e];e<0||!r||r.details&&!r.details.live||(c.logger.log("Loading subtitle track "+e),n.trigger(u.default.SUBTITLE_TRACK_LOADING,{url:r.url,id:e}))},n._toggleTrackModes=function(e){var t=this.media,n=this.subtitleDisplay,r=this.trackId;if(t){var i=Dt(t.textTracks);if(-1===e)[].slice.call(i).forEach(function(e){e.mode="disabled"});else{var a=i[r];a&&(a.mode="disabled")}var s=i[e];s&&(s.mode=n?"showing":"hidden")}},n._setSubtitleTrackInternal=function(e){var t=this.hls,n=this.tracks;!Object(l.isFiniteNumber)(e)||e<-1||e>=n.length||(this.trackId=e,c.logger.log("Switching to subtitle track "+e),t.trigger(u.default.SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},n._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=Dt(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack=e}},function(e,t,n){t&&xt(e.prototype,t),n&&xt(e,n)}(t,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}]),t}(h),Rt=n("./src/crypt/decrypter.js");var Lt,Pt=window.performance,It=function(e){function t(t,n){var r;return(r=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.ERROR,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.SUBTITLE_TRACKS_UPDATED,u.default.SUBTITLE_TRACK_SWITCH,u.default.SUBTITLE_TRACK_LOADED,u.default.SUBTITLE_FRAG_PROCESSED,u.default.LEVEL_UPDATED)||this).fragmentTracker=n,r.config=t.config,r.state=pe.STOPPED,r.tracks=[],r.tracksBuffered=[],r.currentTrackId=-1,r.decrypter=new Rt.default(t,t.config),r.lastAVStart=0,r._onMediaSeeking=r.onMediaSeeking.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.onSubtitleFragProcessed=function(e){var t=e.frag,n=e.success;if(this.fragPrevious=t,this.state=pe.IDLE,n){var r=this.tracksBuffered[this.currentTrackId];if(r){for(var i,a=t.start,s=0;s<r.length;s++)if(a>=r[s].start&&a<=r[s].end){i=r[s];break}var o=t.start+t.duration;i?i.end=o:(i={start:a,end:o},r.push(i))}}},n.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=pe.IDLE},n.onMediaDetaching=function(){var e=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach(function(t){e.tracksBuffered[t.id]=[]}),this.media=null,this.state=pe.STOPPED)},n.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=pe.IDLE)},n.onSubtitleTracksUpdated=function(e){var t=this;c.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach(function(e){t.tracksBuffered[e.id]=[]})},n.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},n.onSubtitleTrackLoaded=function(e){var t=e.id,n=e.details,r=this.currentTrackId,i=this.tracks,a=i[r];t>=i.length||t!==r||!a||(n.live&&function(e,t,n){void 0===n&&(n=0);var r=-1;re(e,t,function(e,t,n){t.start=e.start,r=n});var i=t.fragments;if(r<0)i.forEach(function(e){e.start+=n});else for(var a=r+1;a<i.length;a++)i[a].start=i[a-1].start+i[a-1].duration}(a.details,n,this.lastAVStart),a.details=n,this.setInterval(500))},n.onKeyLoaded=function(){this.state===pe.KEY_LOADING&&(this.state=pe.IDLE)},n.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag.decryptdata,r=e.frag,i=this.hls;if(this.state===pe.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&n&&n.key&&"AES-128"===n.method){var a=Pt.now();this.decrypter.decrypt(e.payload,n.key.buffer,n.iv.buffer,function(e){var t=Pt.now();i.trigger(u.default.FRAG_DECRYPTED,{frag:r,payload:e,stats:{tstart:a,tdecrypt:t}})})}},n.onLevelUpdated=function(e){var t=e.details.fragments;this.lastAVStart=t.length?t[0].start:0},n.doTick=function(){if(this.media)switch(this.state){case pe.IDLE:var e=this.config,t=this.currentTrackId,n=this.fragmentTracker,r=this.media,i=this.tracks;if(!i||!i[t]||!i[t].details)break;var a,s=e.maxBufferHole,o=e.maxFragLookUpTolerance,l=Math.min(e.maxBufferLength,e.maxMaxBufferLength),d=G.bufferedInfo(this._getBuffered(),r.currentTime,s),h=d.end,f=d.len,p=i[t].details,g=p.fragments,v=g.length,m=g[v-1].start+g[v-1].duration;if(f>l)return;var y=this.fragPrevious;h<m?(y&&p.hasProgramDateTime&&(a=le(g,y.endProgramDateTime,o)),a||(a=ue(y,g,h,o))):a=g[v-1],a&&a.encrypted?(c.logger.log("Loading key for "+a.sn),this.state=pe.KEY_LOADING,this.hls.trigger(u.default.KEY_LOADING,{frag:a})):a&&n.getState(a)===F&&(this.fragCurrent=a,this.state=pe.FRAG_LOADING,this.hls.trigger(u.default.FRAG_LOADING,{frag:a}))}else this.state=pe.IDLE},n.stopLoad=function(){this.lastAVStart=0,e.prototype.stopLoad.call(this)},n._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},n.onMediaSeeking=function(){this.fragPrevious=null},t}(ge);!function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(Lt||(Lt={}));var Ot="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Mt=function(e){function t(t){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHED,u.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,n._licenseXhrSetup=void 0,n._emeEnabled=void 0,n._requestMediaKeySystemAccess=void 0,n._drmSystemOptions=void 0,n._config=void 0,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._requestLicenseFailureCount=0,n.mediaKeysPromise=null,n._onMediaEncrypted=function(e){if(c.logger.log('Media is encrypted using "'+e.initDataType+'" init data type'),!n.mediaKeysPromise)return c.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void n.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var t=function(t){n._media&&(n._attemptSetMediaKeys(t),n._generateRequestWithPreferredKeySession(e.initDataType,e.initData))};n.mediaKeysPromise.then(t).catch(t)},n._config=t.config,n._widevineLicenseUrl=n._config.widevineLicenseUrl,n._licenseXhrSetup=n._config.licenseXhrSetup,n._emeEnabled=n._config.emeEnabled,n._requestMediaKeySystemAccess=n._config.requestMediaKeySystemAccessFunc,n._drmSystemOptions=t.config.drmSystemOptions,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.getLicenseServerUrl=function(e){switch(e){case Lt.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},n._attemptKeySystemAccess=function(e,t,n){var r=this,i=function(e,t,n,r){switch(e){case Lt.WIDEVINE:return function(e,t,n){var r={audioCapabilities:[],videoCapabilities:[]};return e.forEach(function(e){r.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:n.audioRobustness||""})}),t.forEach(function(e){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:n.videoRobustness||""})}),[r]}(t,n,r);default:throw new Error("Unknown key-system: "+e)}}(e,t,n,this._drmSystemOptions);c.logger.log("Requesting encrypted media key-system access");var a=this.requestMediaKeySystemAccess(e,i);this.mediaKeysPromise=a.then(function(t){return r._onMediaKeySystemAccessObtained(e,t)}),a.catch(function(t){c.logger.error('Failed to obtain key-system "'+e+'" access:',t)})},n._onMediaKeySystemAccessObtained=function(e,t){var n=this;c.logger.log('Access for key-system "'+e+'" obtained');var r={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(r);var i=Promise.resolve().then(function(){return t.createMediaKeys()}).then(function(t){return r.mediaKeys=t,c.logger.log('Media-keys created for key-system "'+e+'"'),n._onMediaKeysCreated(),t});return i.catch(function(e){c.logger.error("Failed to create media-keys:",e)}),i},n._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))})},n._onNewMediaKeySession=function(e){var t=this;c.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",function(n){t._onKeySessionMessage(e,n.message)},!1)},n._onKeySessionMessage=function(e,t){c.logger.log("Got EME message event, creating license request"),this._requestLicense(t,function(t){c.logger.log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)})},n._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return c.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});c.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},n._generateRequestWithPreferredKeySession=function(e,t){var n=this,r=this._mediaKeysList[0];if(!r)return c.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(r.mediaKeysSessionInitialized)c.logger.warn("Key-Session already initialized but requested again");else{var i=r.mediaKeysSession;if(!i)return c.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return c.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});c.logger.log('Generating key-session request for "'+e+'" init data type'),r.mediaKeysSessionInitialized=!0,i.generateRequest(e,t).then(function(){c.logger.debug("Key-session generation succeeded")}).catch(function(e){c.logger.error("Error generating key-session request:",e),n.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},n._createLicenseXhr=function(e,t,n){var r=new XMLHttpRequest,i=this._licenseXhrSetup;try{if(i)try{i(r,e)}catch(t){r.open("POST",e,!0),i(r,e)}r.readyState||r.open("POST",e,!0)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,e,t,n),r},n._onLicenseRequestReadyStageChange=function(e,t,n,r){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,c.logger.log("License request succeeded"),"arraybuffer"!==e.responseType&&c.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),r(e.response);else{if(c.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var i=3-this._requestLicenseFailureCount+1;c.logger.warn("Retrying license request, "+i+" attempts left"),this._requestLicense(n,r)}}},n._generateLicenseRequestChallenge=function(e,t){switch(e.mediaKeySystemDomain){case Lt.WIDEVINE:return t}throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},n._requestLicense=function(e,t){c.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return c.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var r=this.getLicenseServerUrl(n.mediaKeySystemDomain),i=this._createLicenseXhr(r,e,t);c.logger.log("Sending license request to URL: "+r);var a=this._generateLicenseRequestChallenge(n,e);i.send(a)}catch(e){c.logger.error("Failure requesting DRM license: "+e),this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},n.onMediaAttached=function(e){if(this._emeEnabled){var t=e.media;this._media=t,t.addEventListener("encrypted",this._onMediaEncrypted)}},n.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map(function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch(function(){})})).then(function(){return e.setMediaKeys(null)}).catch(function(){}))},n.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map(function(e){return e.audioCodec}),n=e.levels.map(function(e){return e.videoCodec});this._attemptKeySystemAccess(Lt.WIDEVINE,t,n)}},function(e,t,n){t&&Nt(e.prototype,t),n&&Nt(e,n)}(t,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),t}(h);function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach(function(t){Bt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jt=Ut(Ut({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Me,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Ce,bufferController:Le,capLevelController:Ie,fpsController:Ne,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:Ot,testBandwidth:!0},{cueHandler:r,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:It,subtitleTrackController:Ct,timelineController:kt,audioStreamController:qe,audioTrackController:Ue,emeController:Mt});function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach(function(t){Gt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wt(e,t,n){return t&&Kt(e.prototype,t),n&&Kt(e,n),e}var $t=function(e){function t(n){var r;void 0===n&&(n={}),(r=e.call(this)||this).config=void 0,r._autoLevelCapping=void 0,r.abrController=void 0,r.capLevelController=void 0,r.levelController=void 0,r.streamController=void 0,r.networkControllers=void 0,r.audioTrackController=void 0,r.subtitleTrackController=void 0,r.emeController=void 0,r.coreComponents=void 0,r.media=null,r.url=null;var i=t.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");r.config=Ht(Ht({},i),n);var a=Vt(r).config;if(void 0!==a.liveMaxLatencyDurationCount&&a.liveMaxLatencyDurationCount<=a.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==a.liveMaxLatencyDuration&&(void 0===a.liveSyncDuration||a.liveMaxLatencyDuration<=a.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c.enableLogs)(a.debug),r._autoLevelCapping=-1;var s=r.abrController=new a.abrController(Vt(r)),o=new a.bufferController(Vt(r)),l=r.capLevelController=new a.capLevelController(Vt(r)),u=new a.fpsController(Vt(r)),d=new O(Vt(r)),h=new N(Vt(r)),f=new M(Vt(r)),p=new Se(Vt(r)),g=r.levelController=new be(Vt(r)),v=new q(Vt(r)),m=[g,r.streamController=new ye(Vt(r),v)],y=a.audioStreamController;y&&m.push(new y(Vt(r),v)),r.networkControllers=m;var _=[d,h,f,s,o,l,u,p,v];if(y=a.audioTrackController){var b=new y(Vt(r));r.audioTrackController=b,_.push(b)}if(y=a.subtitleTrackController){var A=new y(Vt(r));r.subtitleTrackController=A,m.push(A)}if(y=a.emeController){var E=new y(Vt(r));r.emeController=E,_.push(E)}return(y=a.subtitleStreamController)&&m.push(new y(Vt(r),v)),(y=a.timelineController)&&_.push(new y(Vt(r))),r.coreComponents=_,r}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t.isSupported=function(){return function(){var e=$();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!r}()},Wt(t,null,[{key:"version",get:function(){}},{key:"Events",get:function(){return u.default}},{key:"ErrorTypes",get:function(){return o.ErrorTypes}},{key:"ErrorDetails",get:function(){return o.ErrorDetails}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:jt},set:function(e){t.defaultConfig=e}}]);var n=t.prototype;return n.destroy=function(){c.logger.log("destroy"),this.trigger(u.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},n.attachMedia=function(e){c.logger.log("attachMedia"),this.media=e,this.trigger(u.default.MEDIA_ATTACHING,{media:e})},n.detachMedia=function(){c.logger.log("detachMedia"),this.trigger(u.default.MEDIA_DETACHING),this.media=null},n.loadSource=function(e){e=s.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),c.logger.log("loadSource:"+e),this.url=e,this.trigger(u.default.MANIFEST_LOADING,{url:e})},n.startLoad=function(e){void 0===e&&(e=-1),c.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},n.stopLoad=function(){c.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},n.swapAudioCodec=function(){c.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},n.recoverMediaError=function(){c.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},n.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},Wt(t,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){c.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){c.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){c.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){c.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){c.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){c.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,r=0;r<n;r++){if((e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate)>t)return r}return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),t}(Y);$t.defaultConfig=void 0},"./src/polyfills/number.js":function(e,t,n){"use strict";n.r(t),n.d(t,"isFiniteNumber",function(){return r}),n.d(t,"MAX_SAFE_INTEGER",function(){return i});var r=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},i=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":function(e,t,n){"use strict";function r(){return"undefined"==typeof window?self:window}n.r(t),n.d(t,"getSelfScope",function(){return r})},"./src/utils/logger.js":function(e,t,n){"use strict";n.r(t),n.d(t,"enableLogs",function(){return u}),n.d(t,"logger",function(){return c});var r=n("./src/utils/get-self-scope.js");function i(){}var a={trace:i,debug:i,log:i,warn:i,info:i,error:i},s=a;var o=Object(r.getSelfScope)();function l(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){s[t]=e[t]?e[t].bind(e):function(e){var t=o.console[e];return t?function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r[0]&&(r[0]=function(e,t){return t="["+e+"] > "+t}(e,r[0])),t.apply(o.console,r)}:i}(t)})}var u=function(e){if(o.console&&!0===e||"object"==typeof e){l(e,"debug","log","info","warn","error");try{s.log()}catch(e){s=a}}else s=a},c=s}}).default})},"+w1B":function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";var r=n(8).default;t.__esModule=!0;var i=r(n(1)),a=r(n(2)),s=n(3),o=n(4),l=r(n(5)),u=r(n(6)),c=r(n(7)),d=i.default.create;function h(){var e=d();return e.compile=function(t,n){return o.compile(t,n,e)},e.precompile=function(t,n){return o.precompile(t,n,e)},e.AST=a.default,e.Compiler=o.Compiler,e.JavaScriptCompiler=l.default,e.Parser=s.parser,e.parse=s.parse,e}var f=h();f.create=h,c.default(f),f.Visitor=u.default,f.default=f,t.default=f,e.exports=t.default},function(e,t,n){"use strict";var r=n(9).default,i=n(8).default;t.__esModule=!0;var a=r(n(10)),s=i(n(11)),o=i(n(12)),l=r(n(13)),u=r(n(14)),c=i(n(7));function d(){var e=new a.HandlebarsEnvironment;return l.extend(e,a),e.SafeString=s.default,e.Exception=o.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e}var h=d();h.create=d,c.default(h),h.default=h,t.default=h,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r={Program:function(e,t,n,r){this.loc=r,this.type="Program",this.body=e,this.blockParams=t,this.strip=n},MustacheStatement:function(e,t,n,r,i,a){this.loc=a,this.type="MustacheStatement",this.path=e,this.params=t||[],this.hash=n,this.escaped=r,this.strip=i},BlockStatement:function(e,t,n,r,i,a,s,o,l){this.loc=l,this.type="BlockStatement",this.path=e,this.params=t||[],this.hash=n,this.program=r,this.inverse=i,this.openStrip=a,this.inverseStrip=s,this.closeStrip=o},PartialStatement:function(e,t,n,r,i){this.loc=i,this.type="PartialStatement",this.name=e,this.params=t||[],this.hash=n,this.indent="",this.strip=r},ContentStatement:function(e,t){this.loc=t,this.type="ContentStatement",this.original=this.value=e},CommentStatement:function(e,t,n){this.loc=n,this.type="CommentStatement",this.value=e,this.strip=t},SubExpression:function(e,t,n,r){this.loc=r,this.type="SubExpression",this.path=e,this.params=t||[],this.hash=n},PathExpression:function(e,t,n,r,i){this.loc=i,this.type="PathExpression",this.data=e,this.original=r,this.parts=n,this.depth=t},StringLiteral:function(e,t){this.loc=t,this.type="StringLiteral",this.original=this.value=e},NumberLiteral:function(e,t){this.loc=t,this.type="NumberLiteral",this.original=this.value=Number(e)},BooleanLiteral:function(e,t){this.loc=t,this.type="BooleanLiteral",this.original=this.value="true"===e},UndefinedLiteral:function(e){this.loc=e,this.type="UndefinedLiteral",this.original=this.value=void 0},NullLiteral:function(e){this.loc=e,this.type="NullLiteral",this.original=this.value=null},Hash:function(e,t){this.loc=t,this.type="Hash",this.pairs=e},HashPair:function(e,t,n){this.loc=n,this.type="HashPair",this.key=e,this.value=t},helpers:{helperExpression:function(e){return!("SubExpression"!==e.type&&!e.params.length&&!e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!r.helpers.scopedId(e)&&!e.depth}}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";var r=n(8).default,i=n(9).default;t.__esModule=!0,t.parse=function(e,t){if("Program"===e.type)return e;return a.default.yy=c,c.locInfo=function(e){return new c.SourceLocation(t&&t.srcName,e)},(new o.default).accept(a.default.parse(e))};var a=r(n(15)),s=r(n(2)),o=r(n(16)),l=i(n(17)),u=n(13);t.parser=a.default;var c={};u.extend(c,l,s.default)},function(e,t,n){"use strict";var r=n(8).default;t.__esModule=!0,t.Compiler=l,t.precompile=function(e,t,n){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new i.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0);t.compat&&(t.useDepths=!0);var r=n.parse(e,t),a=(new n.Compiler).compile(r,t);return(new n.JavaScriptCompiler).compile(a,t)},t.compile=function(e,t,n){var r=void 0===arguments[1]?{}:arguments[1];if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new i.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in r||(r.data=!0);r.compat&&(r.useDepths=!0);var a=void 0;function s(){var t=n.parse(e,r),i=(new n.Compiler).compile(t,r),a=(new n.JavaScriptCompiler).compile(i,r,void 0,!0);return n.template(a)}function o(e,t){return a||(a=s()),a.call(this,e,t)}return o._setup=function(e){return a||(a=s()),a._setup(e)},o._child=function(e,t,n,r){return a||(a=s()),a._child(e,t,n,r)},o};var i=r(n(12)),a=n(13),s=r(n(2)),o=[].slice;function l(){}function u(e,t){if(e===t)return!0;if(a.isArray(e)&&a.isArray(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!u(e[n],t[n]))return!1;return!0}}function c(e){if(!e.path.parts){var t=e.path;e.path=new s.default.PathExpression(!1,0,[t.original+""],t.original+"",t.loc)}}l.prototype={compiler:l,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||!u(r.args,i.args))return!1}t=this.children.length;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[];var n=t.knownHelpers;if(t.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},n)for(var r in n)r in n&&(t.knownHelpers[r]=n[r]);return this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[n]=t,this.useDepths=this.useDepths||t.useDepths,n},accept:function(e){this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,n=t.length,r=0;r<n;r++)this.accept(t[r]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){c(e);var t=e.program,n=e.inverse;t=t&&this.compileProgram(t),n=n&&this.compileProgram(n);var r=this.classifySexpr(e);"helper"===r?this.helperSexpr(e,t,n):"simple"===r?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,n),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},PartialStatement:function(e){this.usePartial=!0;var t=e.params;if(t.length>1)throw new i.default("Unsupported number of partial arguments: "+t.length,e);t.length||t.push({type:"PathExpression",parts:[],depth:0});var n=e.name.original,r="SubExpression"===e.name.type;r&&this.accept(e.name),this.setupFullMustacheParams(e,void 0,void 0,!0);var a=e.indent||"";this.options.preventIndent&&a&&(this.opcode("appendContent",a),a=""),this.opcode("invokePartial",r,n,a),this.opcode("append")},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){c(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,n){var r=e.path,i=r.parts[0],a=null!=t||null!=n;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.accept(r),this.opcode("invokeAmbiguous",i,a)},simpleSexpr:function(e){this.accept(e.path),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),a=e.path,o=a.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",r.length,o);else{if(this.options.knownHelpersOnly)throw new i.default("You specified knownHelpersOnly, but used the unknown helper "+o,e);a.falsy=!0,this.accept(a),this.opcode("invokeHelper",r.length,a.original,s.default.helpers.simpleId(a))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],n=s.default.helpers.scopedId(e),r=!e.depth&&!n&&this.blockParamIndex(t);r?this.opcode("lookupBlockParam",r,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts)):this.opcode("lookupOnContext",e.parts,e.falsy,n):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,n=0,r=t.length;for(this.opcode("pushHash");n<r;n++)this.pushParam(t[n].value);for(;n--;)this.opcode("assignToHash",t[n].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=s.default.helpers.simpleId(e.path),n=t&&!!this.blockParamIndex(e.path.parts[0]),r=!n&&s.default.helpers.helperExpression(e),i=!n&&(r||t);if(i&&!r){var a=e.path.parts[0],o=this.options;o.knownHelpers[a]?r=!0:o.knownHelpersOnly&&(i=!1)}return r?"helper":i?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;t<n;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var n=void 0;if(!e.parts||s.default.helpers.scopedId(e)||e.depth||(n=this.blockParamIndex(e.parts[0])),n){var r=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,r)}else(t=e.original||t).replace&&(t=t.replace(/^\.\//g,"").replace(/^\.$/g,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,n,r){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.accept(e.hash):this.opcode("emptyHash",r),i},blockParamIndex:function(e){for(var t=0,n=this.options.blockParams.length;t<n;t++){var r=this.options.blockParams[t],i=r&&a.indexOf(r,e);if(r&&i>=0)return[t,i]}}}},function(e,t,n){"use strict";var r=n(8).default;t.__esModule=!0;var i=n(10),a=r(n(12)),s=n(13),o=r(n(18));function l(e){this.value=e}function u(){}u.prototype={nameLookup:function(e,t){return u.isValidJavaScriptVariableName(t)?[e,".",t]:[e,"['",t,"']"]},depthedLookup:function(e){return[this.aliasable("this.lookup"),'(depths, "',e,'")']},compilerInfo:function(){var e=i.COMPILER_REVISION;return[e,i.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,n){return s.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:n?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},compile:function(e,t,n,r){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!r,this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var i=e.opcodes,s=void 0,o=void 0,l=void 0,u=void 0;for(l=0,u=i.length;l<u;l++)s=i[l],this.source.currentLocation=s.loc,o=o||s.loc,this[s.opcode].apply(this,s.args);if(this.source.currentLocation=o,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new a.default("Compile completed with content left on stack");var c=this.createFunctionContext(r);if(this.isChild)return c;var d={compiler:this.compilerInfo(),main:c},h=this.context.programs;for(l=0,u=h.length;l<u;l++)h[l]&&(d[l]=h[l]);return this.environment.usePartial&&(d.usePartial=!0),this.options.data&&(d.useData=!0),this.useDepths&&(d.useDepths=!0),this.useBlockParams&&(d.useBlockParams=!0),this.options.compat&&(d.compat=!0),r?d.compilerOptions=this.options:(d.compiler=JSON.stringify(d.compiler),this.source.currentLocation={start:{line:1,column:0}},d=this.objectLiteral(d),t.srcName?(d=d.toStringWithSourceMap({file:t.destName})).map=d.map&&d.map.toString():d=d.toString()),d},preamble:function(){this.lastContext=0,this.source=new o.default(this.options.srcName)},createFunctionContext:function(e){var t="",n=this.stackVars.concat(this.registers.list);n.length>0&&(t+=", "+n.join(", "));var r=0;for(var i in this.aliases){var a=this.aliases[i];this.aliases.hasOwnProperty(i)&&a.children&&a.referenceCount>1&&(t+=", alias"+ ++r+"="+i,a.children[0]="alias"+r)}var s=["depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&s.push("blockParams"),this.useDepths&&s.push("depths");var o=this.mergeSource(t);return e?(s.push(o),Function.apply(this,s)):this.source.wrap(["function(",s.join(","),") {\n  ",o,"}"])},mergeSource:function(e){var t=this.environment.isSimple,n=!this.forceBuffer,r=void 0,i=void 0,a=void 0,s=void 0;return this.source.each(function(e){e.appendToBuffer?(a?e.prepend("  + "):a=e,s=e):(a&&(i?a.prepend("buffer += "):r=!0,s.add(";"),a=s=void 0),i=!0,t||(n=!1))}),n?a?(a.prepend("return "),s.add(";")):i||this.source.push('return "";'):(e+=", buffer = "+(r?"":this.initializeBuffer()),a?(a.prepend("return buffer + "),s.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(r?"":";\n")),this.source.merge()},blockValue:function(e){var t=this.aliasable("helpers.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(e,0,n);var r=this.popStack();n.splice(1,0,r),this.push(this.source.functionCall(t,"call",n))},ambiguousBlockValue:function(){var e=this.aliasable("helpers.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var n=this.topStack();t.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("this.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n){var r=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[r++])),this.resolvePath("context",e,r,t)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t){e?this.pushStackLiteral("this.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0)},resolvePath:function(e,t,n,r){var i=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,n,r){var i=t.popStack(),a=0,s=n.length;e&&s--;for(;a<s;a++)i=t.nameLookup(i,n[a],r);return e?[t.aliasable("this.strict"),"(",i,", ",t.quotedString(n[a]),")"]:i}(this.options.strict,this,t,e));else for(var a=t.length;n<a;n++)this.replaceStack(function(a){var s=i.nameLookup(a,t[n],e);return r?[" && ",s]:[" != null ? ",s," : ",a]})},resolvePossibleLambda:function(){this.push([this.aliasable("this.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t,n){var r=this.popStack(),i=this.setupHelper(e,t),a=n?[i.name," || "]:"",s=["("].concat(a,r);this.options.strict||s.push(" || ",this.aliasable("helpers.helperMissing")),s.push(")"),this.push(this.source.functionCall(s,"call",i.callParams))},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var n=this.popStack();this.emptyHash();var r=this.setupHelper(0,e,t),i=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",n,")"];this.options.strict||(i[0]="(helper = ",i.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",i,r.paramsInit?["),(",r.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",r.callParams)," : helper))"])},invokePartial:function(e,t,n){var r=[],i=this.setupParams(t,1,r,!1);e&&(t=this.popStack(),delete i.name),n&&(i.indent=JSON.stringify(n)),i.helpers="helpers",i.partials="partials",e?r.unshift(t):r.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),r.push(i),this.push(this.source.functionCall("this.invokePartial","",r))},assignToHash:function(e){var t=this.popStack(),n=void 0,r=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(r=this.popStack(),n=this.popStack());var a=this.hash;n&&(a.contexts[e]=n),r&&(a.types[e]=r),i&&(a.ids[e]=i),a.values[e]=t},pushId:function(e,t,n){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:u,compileChildren:function(e,t){for(var n=e.children,r=void 0,i=void 0,a=0,s=n.length;a<s;a++){r=n[a],i=new this.compiler;var o=this.matchExistingProgram(r);null==o?(this.context.programs.push(""),o=this.context.programs.length,r.index=o,r.name="program"+o,this.context.programs[o]=i.compile(r,t,this.context,!this.precompile),this.context.environments[o]=r,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams):(r.index=o,r.name="program"+o,this.useDepths=this.useDepths||r.useDepths,this.useBlockParams=this.useBlockParams||r.useBlockParams)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){var t=this.environment.children[e],n=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"this.program("+n.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof l||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new l(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],n=void 0,r=void 0,i=void 0;if(!this.isInline())throw new a.default("replaceStack on non-inline");var s=this.popStack(!0);if(s instanceof l)t=["(",n=[s.value]],i=!0;else{r=!0;var o=this.incrStack();t=["((",this.push(o)," = ",s,")"],n=this.topStack()}var u=e.call(this,n);i||this.popStack(),r&&this.stackSlot--,this.push(t.concat(u,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r instanceof l)this.compileStack.push(r);else{var i=this.incrStack();this.pushSource([i," = ",r,";"]),this.compileStack.push(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof l)return n.value;if(!t){if(!this.stackSlot)throw new a.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof l?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,n){var r=[];return{params:r,paramsInit:this.setupHelperArgs(t,e,r,n),name:this.nameLookup("helpers",t,"helper"),callParams:[this.contextName(0)].concat(r)}},setupParams:function(e,t,n){var r={},i=[],a=[],s=[],o=void 0;r.name=this.quotedString(e),r.hash=this.popStack(),this.trackIds&&(r.hashIds=this.popStack()),this.stringParams&&(r.hashTypes=this.popStack(),r.hashContexts=this.popStack());var l=this.popStack(),u=this.popStack();(u||l)&&(r.fn=u||"this.noop",r.inverse=l||"this.noop");for(var c=t;c--;)o=this.popStack(),n[c]=o,this.trackIds&&(s[c]=this.popStack()),this.stringParams&&(a[c]=this.popStack(),i[c]=this.popStack());return this.trackIds&&(r.ids=this.source.generateArray(s)),this.stringParams&&(r.types=this.source.generateArray(a),r.contexts=this.source.generateArray(i)),this.options.data&&(r.data="data"),this.useBlockParams&&(r.blockParams="blockParams"),r},setupHelperArgs:function(e,t,n,r){var i=this.setupParams(e,t,n,!0);return i=this.objectLiteral(i),r?(this.useRegister("options"),n.push("options"),["options=",i]):(n.push(i),"")}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=u.RESERVED_WORDS={},n=0,r=e.length;n<r;n++)t[e[n]]=!0}(),u.isValidJavaScriptVariableName=function(e){return!u.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=u,e.exports=t.default},function(e,t,n){"use strict";var r=n(8).default;t.__esModule=!0;var i=r(n(12)),a=r(n(2));function s(){this.parents=[]}s.prototype={constructor:s,mutating:!1,acceptKey:function(e,t){var n=this.accept(e[t]);if(this.mutating){if(n&&(!n.type||!a.default[n.type]))throw new i.default('Unexpected node type "'+n.type+'" found when accepting '+t+" on "+e.type);e[t]=n}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new i.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,n=e.length;t<n;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,n--)},accept:function(e){if(e){this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")},BlockStatement:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash"),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")},PartialStatement:function(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")},PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t.default=s,e.exports=t.default},function(e,t,n){(function(n){"use strict";t.__esModule=!0,t.default=function(e){var t=void 0!==n?n:window,r=t.Handlebars;e.noConflict=function(){t.Handlebars===e&&(t.Handlebars=r)}},e.exports=t.default}).call(t,function(){return this}())},function(e,t,n){"use strict";t.default=function(e){return e&&e.__esModule?e:{default:e}},t.__esModule=!0},function(e,t,n){"use strict";t.default=function(e){if(e&&e.__esModule)return e;var t={};if("object"==typeof e&&null!==e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},t.__esModule=!0},function(e,t,n){"use strict";var r=n(9).default,i=n(8).default;t.__esModule=!0,t.HandlebarsEnvironment=c,t.createFrame=f;var a=r(n(13)),s=i(n(12));t.VERSION="3.0.1";t.COMPILER_REVISION=6;t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};var o=a.isArray,l=a.isFunction,u=a.toString;function c(e,t){this.helpers=e||{},this.partials=t||{},function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new s.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}),e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse,i=n.fn;if(!0===t)return i(this);if(!1===t||null==t)return r(this);if(o(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):r(this);if(n.data&&n.ids){var s=f(n.data);s.contextPath=a.appendContextPath(n.data.contextPath,n.name),n={data:s}}return i(t,n)}),e.registerHelper("each",function(e,t){if(!t)throw new s.default("Must pass iterator to #each");var n=t.fn,r=t.inverse,i=0,u="",c=void 0,d=void 0;function h(t,r,i){c&&(c.key=t,c.index=r,c.first=0===r,c.last=!!i,d&&(c.contextPath=d+t)),u+=n(e[t],{data:c,blockParams:a.blockParams([e[t],t],[d+t,null])})}if(t.data&&t.ids&&(d=a.appendContextPath(t.data.contextPath,t.ids[0])+"."),l(e)&&(e=e.call(this)),t.data&&(c=f(t.data)),e&&"object"==typeof e)if(o(e))for(var p=e.length;i<p;i++)h(i,i,i===e.length-1);else{var g=void 0;for(var v in e)e.hasOwnProperty(v)&&(g&&h(g,i-1),g=v,i++);g&&h(g,i-1,!0)}return 0===i&&(u=r(this)),u}),e.registerHelper("if",function(e,t){return l(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||a.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){l(e)&&(e=e.call(this));var n=t.fn;if(a.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var r=f(t.data);r.contextPath=a.appendContextPath(t.data.contextPath,t.ids[0]),t={data:r}}return n(e,t)}),e.registerHelper("log",function(t,n){var r=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(r,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}(this)}c.prototype={constructor:c,logger:d,log:h,registerHelper:function(e,t){if("[object Object]"===u.call(e)){if(t)throw new s.default("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("[object Object]"===u.call(e))a.extend(this.partials,e);else{if(void 0===t)throw new s.default("Attempting to register a partial as undefined");this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]}};var d={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(e,t){if("undefined"!=typeof console&&d.level<=e){var n=d.methodMap[e];(console[n]||console.log).call(console,t)}}};t.logger=d;var h=d.log;function f(e){var t=a.extend({},e);return t._parent=e,t}t.log=h},function(e,t,n){"use strict";function r(e){this.string=e}t.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},t.default=r,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];function i(e,t){var n=t&&t.loc,a=void 0,s=void 0;n&&(e+=" - "+(a=n.start.line)+":"+(s=n.start.column));for(var o=Error.prototype.constructor.call(this,e),l=0;l<r.length;l++)this[r[l]]=o[r[l]];Error.captureStackTrace&&Error.captureStackTrace(this,i),n&&(this.lineNumber=a,this.column=s)}i.prototype=new Error,t.default=i,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.extend=function(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e},t.indexOf=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!a.test(e))return e;return e.replace(i,s)},t.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,a=/[&<>"'`]/;function s(e){return r[e]}var o,l=Object.prototype.toString;t.toString=l,(o=function(e){return"function"==typeof e})(/x/)&&(t.isFunction=o=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)}),t.isFunction=o;var u=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===l.call(e)};t.isArray=u},function(e,t,n){"use strict";var r=n(9).default,i=n(8).default;t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=o.COMPILER_REVISION;if(t!==n){if(t<n){var r=o.REVISION_CHANGES[n],i=o.REVISION_CHANGES[t];throw new s.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new s.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},t.template=function(e,t){if(!t)throw new s.default("No environment passed to template");if(!e||!e.main)throw new s.default("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n={strict:function(e,t){if(!(t in e))throw new s.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,r=0;r<n;r++)if(e[r]&&null!=e[r][t])return e[r][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:a.escapeExpression,invokePartial:function(n,r,i){i.hash&&(r=a.extend({},r,i.hash));n=t.VM.resolvePartial.call(this,n,r,i);var o=t.VM.invokePartial.call(this,n,r,i);null==o&&t.compile&&(i.partials[i.name]=t.compile(n,e.compilerOptions,t),o=i.partials[i.name](r,i));if(null!=o){if(i.indent){for(var l=o.split("\n"),u=0,c=l.length;u<c&&(l[u]||u+1!==c);u++)l[u]=i.indent+l[u];o=l.join("\n")}return o}throw new s.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")},fn:function(t){return e[t]},programs:[],program:function(e,t,n,r,i){var a=this.programs[e],s=this.fn(e);return t||i||r||n?a=l(this,e,s,t,n,r,i):a||(a=this.programs[e]=l(this,e,s)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=a.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler};function r(t){var i=void 0===arguments[1]?{}:arguments[1],a=i.data;r._setup(i),!i.partial&&e.useData&&(a=function(e,t){t&&"root"in t||((t=t?o.createFrame(t):{}).root=e);return t}(t,a));var s=void 0,l=e.useBlockParams?[]:void 0;return e.useDepths&&(s=i.depths?[t].concat(i.depths):[t]),e.main.call(n,t,n.helpers,n.partials,a,l,s)}return r.isTop=!0,r._setup=function(r){r.partial?(n.helpers=r.helpers,n.partials=r.partials):(n.helpers=n.merge(r.helpers,t.helpers),e.usePartial&&(n.partials=n.merge(r.partials,t.partials)))},r._child=function(t,r,i,a){if(e.useBlockParams&&!i)throw new s.default("must pass block params");if(e.useDepths&&!a)throw new s.default("must pass parent depths");return l(n,t,e[t],r,0,i,a)},r},t.wrapProgram=l,t.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e=n.partials[n.name];return e},t.invokePartial=function(e,t,n){if(n.partial=!0,void 0===e)throw new s.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=function(){return""};var a=r(n(13)),s=i(n(12)),o=n(10);function l(e,t,n,r,i,a,s){function o(t){var i=void 0===arguments[1]?{}:arguments[1];return n.call(e,t,e.helpers,e.partials,i.data||r,a&&[i.blockParams].concat(a),s&&[t].concat(s))}return o.program=t,o.depth=s?s.length:0,o.blockParams=i||0,o}},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,content:12,COMMENT:13,CONTENT:14,openRawBlock:15,END_RAW_BLOCK:16,OPEN_RAW_BLOCK:17,helperName:18,openRawBlock_repetition0:19,openRawBlock_option0:20,CLOSE_RAW_BLOCK:21,openBlock:22,block_option0:23,closeBlock:24,openInverse:25,block_option1:26,OPEN_BLOCK:27,openBlock_repetition0:28,openBlock_option0:29,openBlock_option1:30,CLOSE:31,OPEN_INVERSE:32,openInverse_repetition0:33,openInverse_option0:34,openInverse_option1:35,openInverseChain:36,OPEN_INVERSE_CHAIN:37,openInverseChain_repetition0:38,openInverseChain_option0:39,openInverseChain_option1:40,inverseAndProgram:41,INVERSE:42,inverseChain:43,inverseChain_option0:44,OPEN_ENDBLOCK:45,OPEN:46,mustache_repetition0:47,mustache_option0:48,OPEN_UNESCAPED:49,mustache_repetition1:50,mustache_option1:51,CLOSE_UNESCAPED:52,OPEN_PARTIAL:53,partialName:54,partial_repetition0:55,partial_option0:56,param:57,sexpr:58,OPEN_SEXPR:59,sexpr_repetition0:60,sexpr_option0:61,CLOSE_SEXPR:62,hash:63,hash_repetition_plus0:64,hashSegment:65,ID:66,EQUALS:67,blockParams:68,OPEN_BLOCK_PARAMS:69,blockParams_repetition_plus0:70,CLOSE_BLOCK_PARAMS:71,path:72,dataName:73,STRING:74,NUMBER:75,BOOLEAN:76,UNDEFINED:77,NULL:78,DATA:79,pathSegments:80,SEP:81,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"COMMENT",14:"CONTENT",16:"END_RAW_BLOCK",17:"OPEN_RAW_BLOCK",21:"CLOSE_RAW_BLOCK",27:"OPEN_BLOCK",31:"CLOSE",32:"OPEN_INVERSE",37:"OPEN_INVERSE_CHAIN",42:"INVERSE",45:"OPEN_ENDBLOCK",46:"OPEN",49:"OPEN_UNESCAPED",52:"CLOSE_UNESCAPED",53:"OPEN_PARTIAL",59:"OPEN_SEXPR",62:"CLOSE_SEXPR",66:"ID",67:"EQUALS",69:"OPEN_BLOCK_PARAMS",71:"CLOSE_BLOCK_PARAMS",74:"STRING",75:"NUMBER",76:"BOOLEAN",77:"UNDEFINED",78:"NULL",79:"DATA",81:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[12,1],[10,3],[15,5],[9,4],[9,4],[22,6],[25,6],[36,6],[41,2],[43,3],[43,1],[24,3],[8,5],[8,5],[11,5],[57,1],[57,1],[58,5],[63,1],[65,3],[68,3],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[54,1],[54,1],[73,2],[72,1],[80,3],[80,1],[6,0],[6,2],[19,0],[19,2],[20,0],[20,1],[23,0],[23,1],[26,0],[26,1],[28,0],[28,2],[29,0],[29,1],[30,0],[30,1],[33,0],[33,2],[34,0],[34,1],[35,0],[35,1],[38,0],[38,2],[39,0],[39,1],[40,0],[40,1],[44,0],[44,1],[47,0],[47,2],[48,0],[48,1],[50,0],[50,2],[51,0],[51,1],[55,0],[55,2],[56,0],[56,1],[60,0],[60,2],[61,0],[61,1],[64,1],[64,2],[70,1],[70,2]],performAction:function(e,t,n,r,i,a,s){var o=a.length-1;switch(i){case 1:return a[o-1];case 2:this.$=new r.Program(a[o],null,{},r.locInfo(this._$));break;case 3:case 4:case 5:case 6:case 7:this.$=a[o];break;case 8:this.$=new r.CommentStatement(r.stripComment(a[o]),r.stripFlags(a[o],a[o]),r.locInfo(this._$));break;case 9:this.$=new r.ContentStatement(a[o],r.locInfo(this._$));break;case 10:this.$=r.prepareRawBlock(a[o-2],a[o-1],a[o],this._$);break;case 11:this.$={path:a[o-3],params:a[o-2],hash:a[o-1]};break;case 12:this.$=r.prepareBlock(a[o-3],a[o-2],a[o-1],a[o],!1,this._$);break;case 13:this.$=r.prepareBlock(a[o-3],a[o-2],a[o-1],a[o],!0,this._$);break;case 14:case 15:case 16:this.$={path:a[o-4],params:a[o-3],hash:a[o-2],blockParams:a[o-1],strip:r.stripFlags(a[o-5],a[o])};break;case 17:this.$={strip:r.stripFlags(a[o-1],a[o-1]),program:a[o]};break;case 18:var l=r.prepareBlock(a[o-2],a[o-1],a[o],a[o],!1,this._$),u=new r.Program([l],null,{},r.locInfo(this._$));u.chained=!0,this.$={strip:a[o-2].strip,program:u,chain:!0};break;case 19:this.$=a[o];break;case 20:this.$={path:a[o-1],strip:r.stripFlags(a[o-2],a[o])};break;case 21:case 22:this.$=r.prepareMustache(a[o-3],a[o-2],a[o-1],a[o-4],r.stripFlags(a[o-4],a[o]),this._$);break;case 23:this.$=new r.PartialStatement(a[o-3],a[o-2],a[o-1],r.stripFlags(a[o-4],a[o]),r.locInfo(this._$));break;case 24:case 25:this.$=a[o];break;case 26:this.$=new r.SubExpression(a[o-3],a[o-2],a[o-1],r.locInfo(this._$));break;case 27:this.$=new r.Hash(a[o],r.locInfo(this._$));break;case 28:this.$=new r.HashPair(r.id(a[o-2]),a[o],r.locInfo(this._$));break;case 29:this.$=r.id(a[o-1]);break;case 30:case 31:this.$=a[o];break;case 32:this.$=new r.StringLiteral(a[o],r.locInfo(this._$));break;case 33:this.$=new r.NumberLiteral(a[o],r.locInfo(this._$));break;case 34:this.$=new r.BooleanLiteral(a[o],r.locInfo(this._$));break;case 35:this.$=new r.UndefinedLiteral(r.locInfo(this._$));break;case 36:this.$=new r.NullLiteral(r.locInfo(this._$));break;case 37:case 38:this.$=a[o];break;case 39:this.$=r.preparePath(!0,a[o],this._$);break;case 40:this.$=r.preparePath(!1,a[o],this._$);break;case 41:a[o-2].push({part:r.id(a[o]),original:a[o],separator:a[o-1]}),this.$=a[o-2];break;case 42:this.$=[{part:r.id(a[o]),original:a[o]}];break;case 43:this.$=[];break;case 44:a[o-1].push(a[o]);break;case 45:this.$=[];break;case 46:a[o-1].push(a[o]);break;case 53:this.$=[];break;case 54:a[o-1].push(a[o]);break;case 59:this.$=[];break;case 60:a[o-1].push(a[o]);break;case 65:this.$=[];break;case 66:a[o-1].push(a[o]);break;case 73:this.$=[];break;case 74:a[o-1].push(a[o]);break;case 77:this.$=[];break;case 78:a[o-1].push(a[o]);break;case 81:this.$=[];break;case 82:a[o-1].push(a[o]);break;case 85:this.$=[];break;case 86:a[o-1].push(a[o]);break;case 89:this.$=[a[o]];break;case 90:a[o-1].push(a[o]);break;case 91:this.$=[a[o]];break;case 92:a[o-1].push(a[o])}},table:[{3:1,4:2,5:[2,43],6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],46:[2,43],49:[2,43],53:[2,43]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:[1,11],14:[1,18],15:16,17:[1,21],22:14,25:15,27:[1,19],32:[1,20],37:[2,2],42:[2,2],45:[2,2],46:[1,12],49:[1,13],53:[1,17]},{1:[2,1]},{5:[2,44],13:[2,44],14:[2,44],17:[2,44],27:[2,44],32:[2,44],37:[2,44],42:[2,44],45:[2,44],46:[2,44],49:[2,44],53:[2,44]},{5:[2,3],13:[2,3],14:[2,3],17:[2,3],27:[2,3],32:[2,3],37:[2,3],42:[2,3],45:[2,3],46:[2,3],49:[2,3],53:[2,3]},{5:[2,4],13:[2,4],14:[2,4],17:[2,4],27:[2,4],32:[2,4],37:[2,4],42:[2,4],45:[2,4],46:[2,4],49:[2,4],53:[2,4]},{5:[2,5],13:[2,5],14:[2,5],17:[2,5],27:[2,5],32:[2,5],37:[2,5],42:[2,5],45:[2,5],46:[2,5],49:[2,5],53:[2,5]},{5:[2,6],13:[2,6],14:[2,6],17:[2,6],27:[2,6],32:[2,6],37:[2,6],42:[2,6],45:[2,6],46:[2,6],49:[2,6],53:[2,6]},{5:[2,7],13:[2,7],14:[2,7],17:[2,7],27:[2,7],32:[2,7],37:[2,7],42:[2,7],45:[2,7],46:[2,7],49:[2,7],53:[2,7]},{5:[2,8],13:[2,8],14:[2,8],17:[2,8],27:[2,8],32:[2,8],37:[2,8],42:[2,8],45:[2,8],46:[2,8],49:[2,8],53:[2,8]},{18:22,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:33,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:34,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{4:35,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{12:36,14:[1,18]},{18:38,54:37,58:39,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,9],13:[2,9],14:[2,9],16:[2,9],17:[2,9],27:[2,9],32:[2,9],37:[2,9],42:[2,9],45:[2,9],46:[2,9],49:[2,9],53:[2,9]},{18:41,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:42,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:43,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[2,73],47:44,59:[2,73],66:[2,73],74:[2,73],75:[2,73],76:[2,73],77:[2,73],78:[2,73],79:[2,73]},{21:[2,30],31:[2,30],52:[2,30],59:[2,30],62:[2,30],66:[2,30],69:[2,30],74:[2,30],75:[2,30],76:[2,30],77:[2,30],78:[2,30],79:[2,30]},{21:[2,31],31:[2,31],52:[2,31],59:[2,31],62:[2,31],66:[2,31],69:[2,31],74:[2,31],75:[2,31],76:[2,31],77:[2,31],78:[2,31],79:[2,31]},{21:[2,32],31:[2,32],52:[2,32],59:[2,32],62:[2,32],66:[2,32],69:[2,32],74:[2,32],75:[2,32],76:[2,32],77:[2,32],78:[2,32],79:[2,32]},{21:[2,33],31:[2,33],52:[2,33],59:[2,33],62:[2,33],66:[2,33],69:[2,33],74:[2,33],75:[2,33],76:[2,33],77:[2,33],78:[2,33],79:[2,33]},{21:[2,34],31:[2,34],52:[2,34],59:[2,34],62:[2,34],66:[2,34],69:[2,34],74:[2,34],75:[2,34],76:[2,34],77:[2,34],78:[2,34],79:[2,34]},{21:[2,35],31:[2,35],52:[2,35],59:[2,35],62:[2,35],66:[2,35],69:[2,35],74:[2,35],75:[2,35],76:[2,35],77:[2,35],78:[2,35],79:[2,35]},{21:[2,36],31:[2,36],52:[2,36],59:[2,36],62:[2,36],66:[2,36],69:[2,36],74:[2,36],75:[2,36],76:[2,36],77:[2,36],78:[2,36],79:[2,36]},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],78:[2,40],79:[2,40],81:[1,45]},{66:[1,32],80:46},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{50:47,52:[2,77],59:[2,77],66:[2,77],74:[2,77],75:[2,77],76:[2,77],77:[2,77],78:[2,77],79:[2,77]},{23:48,36:50,37:[1,52],41:51,42:[1,53],43:49,45:[2,49]},{26:54,41:55,42:[1,53],45:[2,51]},{16:[1,56]},{31:[2,81],55:57,59:[2,81],66:[2,81],74:[2,81],75:[2,81],76:[2,81],77:[2,81],78:[2,81],79:[2,81]},{31:[2,37],59:[2,37],66:[2,37],74:[2,37],75:[2,37],76:[2,37],77:[2,37],78:[2,37],79:[2,37]},{31:[2,38],59:[2,38],66:[2,38],74:[2,38],75:[2,38],76:[2,38],77:[2,38],78:[2,38],79:[2,38]},{18:58,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{28:59,31:[2,53],59:[2,53],66:[2,53],69:[2,53],74:[2,53],75:[2,53],76:[2,53],77:[2,53],78:[2,53],79:[2,53]},{31:[2,59],33:60,59:[2,59],66:[2,59],69:[2,59],74:[2,59],75:[2,59],76:[2,59],77:[2,59],78:[2,59],79:[2,59]},{19:61,21:[2,45],59:[2,45],66:[2,45],74:[2,45],75:[2,45],76:[2,45],77:[2,45],78:[2,45],79:[2,45]},{18:65,31:[2,75],48:62,57:63,58:66,59:[1,40],63:64,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{66:[1,70]},{21:[2,39],31:[2,39],52:[2,39],59:[2,39],62:[2,39],66:[2,39],69:[2,39],74:[2,39],75:[2,39],76:[2,39],77:[2,39],78:[2,39],79:[2,39],81:[1,45]},{18:65,51:71,52:[2,79],57:72,58:66,59:[1,40],63:73,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{24:74,45:[1,75]},{45:[2,50]},{4:76,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{45:[2,19]},{18:77,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:78,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{24:79,45:[1,75]},{45:[2,52]},{5:[2,10],13:[2,10],14:[2,10],17:[2,10],27:[2,10],32:[2,10],37:[2,10],42:[2,10],45:[2,10],46:[2,10],49:[2,10],53:[2,10]},{18:65,31:[2,83],56:80,57:81,58:66,59:[1,40],63:82,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{59:[2,85],60:83,62:[2,85],66:[2,85],74:[2,85],75:[2,85],76:[2,85],77:[2,85],78:[2,85],79:[2,85]},{18:65,29:84,31:[2,55],57:85,58:66,59:[1,40],63:86,64:67,65:68,66:[1,69],69:[2,55],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,31:[2,61],34:87,57:88,58:66,59:[1,40],63:89,64:67,65:68,66:[1,69],69:[2,61],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,20:90,21:[2,47],57:91,58:66,59:[1,40],63:92,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[1,93]},{31:[2,74],59:[2,74],66:[2,74],74:[2,74],75:[2,74],76:[2,74],77:[2,74],78:[2,74],79:[2,74]},{31:[2,76]},{21:[2,24],31:[2,24],52:[2,24],59:[2,24],62:[2,24],66:[2,24],69:[2,24],74:[2,24],75:[2,24],76:[2,24],77:[2,24],78:[2,24],79:[2,24]},{21:[2,25],31:[2,25],52:[2,25],59:[2,25],62:[2,25],66:[2,25],69:[2,25],74:[2,25],75:[2,25],76:[2,25],77:[2,25],78:[2,25],79:[2,25]},{21:[2,27],31:[2,27],52:[2,27],62:[2,27],65:94,66:[1,95],69:[2,27]},{21:[2,89],31:[2,89],52:[2,89],62:[2,89],66:[2,89],69:[2,89]},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],67:[1,96],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{21:[2,41],31:[2,41],52:[2,41],59:[2,41],62:[2,41],66:[2,41],69:[2,41],74:[2,41],75:[2,41],76:[2,41],77:[2,41],78:[2,41],79:[2,41],81:[2,41]},{52:[1,97]},{52:[2,78],59:[2,78],66:[2,78],74:[2,78],75:[2,78],76:[2,78],77:[2,78],78:[2,78],79:[2,78]},{52:[2,80]},{5:[2,12],13:[2,12],14:[2,12],17:[2,12],27:[2,12],32:[2,12],37:[2,12],42:[2,12],45:[2,12],46:[2,12],49:[2,12],53:[2,12]},{18:98,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{36:50,37:[1,52],41:51,42:[1,53],43:100,44:99,45:[2,71]},{31:[2,65],38:101,59:[2,65],66:[2,65],69:[2,65],74:[2,65],75:[2,65],76:[2,65],77:[2,65],78:[2,65],79:[2,65]},{45:[2,17]},{5:[2,13],13:[2,13],14:[2,13],17:[2,13],27:[2,13],32:[2,13],37:[2,13],42:[2,13],45:[2,13],46:[2,13],49:[2,13],53:[2,13]},{31:[1,102]},{31:[2,82],59:[2,82],66:[2,82],74:[2,82],75:[2,82],76:[2,82],77:[2,82],78:[2,82],79:[2,82]},{31:[2,84]},{18:65,57:104,58:66,59:[1,40],61:103,62:[2,87],63:105,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{30:106,31:[2,57],68:107,69:[1,108]},{31:[2,54],59:[2,54],66:[2,54],69:[2,54],74:[2,54],75:[2,54],76:[2,54],77:[2,54],78:[2,54],79:[2,54]},{31:[2,56],69:[2,56]},{31:[2,63],35:109,68:110,69:[1,108]},{31:[2,60],59:[2,60],66:[2,60],69:[2,60],74:[2,60],75:[2,60],76:[2,60],77:[2,60],78:[2,60],79:[2,60]},{31:[2,62],69:[2,62]},{21:[1,111]},{21:[2,46],59:[2,46],66:[2,46],74:[2,46],75:[2,46],76:[2,46],77:[2,46],78:[2,46],79:[2,46]},{21:[2,48]},{5:[2,21],13:[2,21],14:[2,21],17:[2,21],27:[2,21],32:[2,21],37:[2,21],42:[2,21],45:[2,21],46:[2,21],49:[2,21],53:[2,21]},{21:[2,90],31:[2,90],52:[2,90],62:[2,90],66:[2,90],69:[2,90]},{67:[1,96]},{18:65,57:112,58:66,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,22],13:[2,22],14:[2,22],17:[2,22],27:[2,22],32:[2,22],37:[2,22],42:[2,22],45:[2,22],46:[2,22],49:[2,22],53:[2,22]},{31:[1,113]},{45:[2,18]},{45:[2,72]},{18:65,31:[2,67],39:114,57:115,58:66,59:[1,40],63:116,64:67,65:68,66:[1,69],69:[2,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,23],13:[2,23],14:[2,23],17:[2,23],27:[2,23],32:[2,23],37:[2,23],42:[2,23],45:[2,23],46:[2,23],49:[2,23],53:[2,23]},{62:[1,117]},{59:[2,86],62:[2,86],66:[2,86],74:[2,86],75:[2,86],76:[2,86],77:[2,86],78:[2,86],79:[2,86]},{62:[2,88]},{31:[1,118]},{31:[2,58]},{66:[1,120],70:119},{31:[1,121]},{31:[2,64]},{14:[2,11]},{21:[2,28],31:[2,28],52:[2,28],62:[2,28],66:[2,28],69:[2,28]},{5:[2,20],13:[2,20],14:[2,20],17:[2,20],27:[2,20],32:[2,20],37:[2,20],42:[2,20],45:[2,20],46:[2,20],49:[2,20],53:[2,20]},{31:[2,69],40:122,68:123,69:[1,108]},{31:[2,66],59:[2,66],66:[2,66],69:[2,66],74:[2,66],75:[2,66],76:[2,66],77:[2,66],78:[2,66],79:[2,66]},{31:[2,68],69:[2,68]},{21:[2,26],31:[2,26],52:[2,26],59:[2,26],62:[2,26],66:[2,26],69:[2,26],74:[2,26],75:[2,26],76:[2,26],77:[2,26],78:[2,26],79:[2,26]},{13:[2,14],14:[2,14],17:[2,14],27:[2,14],32:[2,14],37:[2,14],42:[2,14],45:[2,14],46:[2,14],49:[2,14],53:[2,14]},{66:[1,125],71:[1,124]},{66:[2,91],71:[2,91]},{13:[2,15],14:[2,15],17:[2,15],27:[2,15],32:[2,15],42:[2,15],45:[2,15],46:[2,15],49:[2,15],53:[2,15]},{31:[1,126]},{31:[2,70]},{31:[2,29]},{66:[2,92],71:[2,92]},{13:[2,16],14:[2,16],17:[2,16],27:[2,16],32:[2,16],37:[2,16],42:[2,16],45:[2,16],46:[2,16],49:[2,16],53:[2,16]}],defaultActions:{4:[2,1],49:[2,50],51:[2,19],55:[2,52],64:[2,76],73:[2,80],78:[2,17],82:[2,84],92:[2,48],99:[2,18],100:[2,72],105:[2,88],107:[2,58],110:[2,64],111:[2,11],123:[2,70],124:[2,29]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,n=[0],r=[null],i=[],a=this.table,s="",o=0,l=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;i.push(c);var d=this.lexer.options&&this.lexer.options.ranges;function h(){var e;return"number"!=typeof(e=t.lexer.lex()||1)&&(e=t.symbols_[e]||e),e}"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var f,p,g,v,m,y,_,b,A,E={};;){if(g=n[n.length-1],this.defaultActions[g]?v=this.defaultActions[g]:(null!==f&&void 0!==f||(f=h()),v=a[g]&&a[g][f]),void 0===v||!v.length||!v[0]){var w="";if(!u){for(y in A=[],a[g])this.terminals_[y]&&y>2&&A.push("'"+this.terminals_[y]+"'");w=this.lexer.showPosition?"Parse error on line "+(o+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+A.join(", ")+", got '"+(this.terminals_[f]||f)+"'":"Parse error on line "+(o+1)+": Unexpected "+(1==f?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(w,{text:this.lexer.match,token:this.terminals_[f]||f,line:this.lexer.yylineno,loc:c,expected:A})}}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+f);switch(v[0]){case 1:n.push(f),r.push(this.lexer.yytext),i.push(this.lexer.yylloc),n.push(v[1]),f=null,p?(f=p,p=null):(l=this.lexer.yyleng,s=this.lexer.yytext,o=this.lexer.yylineno,c=this.lexer.yylloc,u>0&&u--);break;case 2:if(_=this.productions_[v[1]][1],E.$=r[r.length-_],E._$={first_line:i[i.length-(_||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(_||1)].first_column,last_column:i[i.length-1].last_column},d&&(E._$.range=[i[i.length-(_||1)].range[0],i[i.length-1].range[1]]),void 0!==(m=this.performAction.call(E,s,l,o,this.yy,v[1],r,i)))return m;_&&(n=n.slice(0,-1*_*2),r=r.slice(0,-1*_),i=i.slice(0,-1*_)),n.push(this.productions_[v[1]][0]),r.push(E.$),i.push(E._$),b=a[n[n.length-2]][n[n.length-1]],n.push(b);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,n,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length&&(!(n=this._input.match(this.rules[a[s]]))||t&&!(n[0].length>t[0].length)||(t=n,r=s,this.options.flex));s++);return t?((i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,a[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,n,r){function i(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return t.yytext=t.yytext.substr(5,t.yyleng-9),this.popState(),16;case 4:return 14;case 5:return this.popState(),13;case 6:return 59;case 7:return 62;case 8:return 17;case 9:return this.popState(),this.begin("raw"),21;case 10:return 53;case 11:return 27;case 12:return 45;case 13:case 14:return this.popState(),42;case 15:return 32;case 16:return 37;case 17:return 49;case 18:return 46;case 19:this.unput(t.yytext),this.popState(),this.begin("com");break;case 20:return this.popState(),13;case 21:return 46;case 22:return 67;case 23:case 24:return 66;case 25:return 81;case 26:break;case 27:return this.popState(),52;case 28:return this.popState(),31;case 29:return t.yytext=i(1,2).replace(/\\"/g,'"'),74;case 30:return t.yytext=i(1,2).replace(/\\'/g,"'"),74;case 31:return 79;case 32:case 33:return 76;case 34:return 77;case 35:return 78;case 36:return 75;case 37:return 69;case 38:return 71;case 39:case 40:return 66;case 41:return"INVALID";case 42:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,42],inclusive:!0}}};return e}();function n(){this.yy={}}return e.lexer=t,n.prototype=e,e.Parser=n,new n}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";var r=n(8).default;t.__esModule=!0;var i=r(n(6));function a(){}function s(e,t,n){void 0===t&&(t=e.length);var r=e[t-1],i=e[t-2];return r?"ContentStatement"===r.type?(i||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(r.original):void 0:n}function o(e,t,n){void 0===t&&(t=-1);var r=e[t+1],i=e[t+2];return r?"ContentStatement"===r.type?(i||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(r.original):void 0:n}function l(e,t,n){var r=e[null==t?0:t+1];if(r&&"ContentStatement"===r.type&&(n||!r.rightStripped)){var i=r.value;r.value=r.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),r.rightStripped=r.value!==i}}function u(e,t,n){var r=e[null==t?e.length-1:t-1];if(r&&"ContentStatement"===r.type&&(n||!r.leftStripped)){var i=r.value;return r.value=r.value.replace(n?/\s+$/:/[ \t]+$/,""),r.leftStripped=r.value!==i,r.leftStripped}}a.prototype=new i.default,a.prototype.Program=function(e){var t=!this.isRootSeen;this.isRootSeen=!0;for(var n=e.body,r=0,i=n.length;r<i;r++){var a=n[r],c=this.accept(a);if(c){var d=s(n,r,t),h=o(n,r,t),f=c.openStandalone&&d,p=c.closeStandalone&&h,g=c.inlineStandalone&&d&&h;c.close&&l(n,r,!0),c.open&&u(n,r,!0),g&&(l(n,r),u(n,r)&&"PartialStatement"===a.type&&(a.indent=/([ \t]+$)/.exec(n[r-1].original)[1])),f&&(l((a.program||a.inverse).body),u(n,r)),p&&(l(n,r),u((a.inverse||a.program).body))}}return e},a.prototype.BlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,n=e.program&&e.inverse,r=n,i=n;if(n&&n.chained)for(r=n.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var a={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:o(t.body),closeStandalone:s((r||t).body)};if(e.openStrip.close&&l(t.body,null,!0),n){var c=e.inverseStrip;c.open&&u(t.body,null,!0),c.close&&l(r.body,null,!0),e.closeStrip.open&&u(i.body,null,!0),s(t.body)&&o(r.body)&&(u(t.body),l(r.body))}else e.closeStrip.open&&u(t.body,null,!0);return a},a.prototype.MustacheStatement=function(e){return e.strip},a.prototype.PartialStatement=a.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=n(8).default;t.__esModule=!0,t.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},t.id=function(e){return/^\[.*\]$/.test(e)?e.substr(1,e.length-2):e},t.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},t.stripComment=function(e){return e.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")},t.preparePath=function(e,t,n){n=this.locInfo(n);for(var r=e?"@":"",a=[],s=0,o=0,l=t.length;o<l;o++){var u=t[o].part,c=t[o].original!==u;if(r+=(t[o].separator||"")+u,c||".."!==u&&"."!==u&&"this"!==u)a.push(u);else{if(a.length>0)throw new i.default("Invalid path: "+r,{loc:n});".."===u&&(s++,"../")}}return new this.PathExpression(e,s,a,r,n)},t.prepareMustache=function(e,t,n,r,i,a){var s=r.charAt(3)||r.charAt(2),o="{"!==s&&"&"!==s;return new this.MustacheStatement(e,t,n,o,i,this.locInfo(a))},t.prepareRawBlock=function(e,t,n,r){if(e.path.original!==n){var a={loc:e.path.loc};throw new i.default(e.path.original+" doesn't match "+n,a)}r=this.locInfo(r);var s=new this.Program([t],null,{},r);return new this.BlockStatement(e.path,e.params,e.hash,s,void 0,{},{},{},r)},t.prepareBlock=function(e,t,n,r,a,s){if(r&&r.path&&e.path.original!==r.path.original){var o={loc:e.path.loc};throw new i.default(e.path.original+" doesn't match "+r.path.original,o)}t.blockParams=e.blockParams;var l=void 0,u=void 0;n&&(n.chain&&(n.program.body[0].closeStrip=r.strip),u=n.strip,l=n.program);a&&(a=l,l=t,t=a);return new this.BlockStatement(e.path,e.params,e.hash,t,l,e.strip,u,r&&r.strip,this.locInfo(s))};var i=r(n(12))},function(e,t,n){"use strict";t.__esModule=!0;var r=n(13),i=void 0;try{}catch(e){}function a(e,t,n){if(r.isArray(e)){for(var i=[],a=0,s=e.length;a<s;a++)i.push(t.wrap(e[a],n));return i}return"boolean"==typeof e||"number"==typeof e?e+"":e}function s(e){this.srcFile=e,this.source=[]}i||((i=function(e,t,n,r){this.src="",r&&this.add(r)}).prototype={add:function(e){r.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){r.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),s.prototype={prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,n=this.source.length;t<n;t++)e(this.source[t])},empty:function(){var e=void 0===arguments[0]?this.currentLocation||{start:{}}:arguments[0];return new i(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof i?e:(e=a(e,this,t),new i(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,n){return n=this.generateList(n),this.wrap([e,t?"."+t+"(":"(",n,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=a(e[n],this);"undefined"!==r&&t.push([this.quotedString(n),":",r])}var i=this.generateList(t);return i.prepend("{"),i.add("}"),i},generateList:function(e,t){for(var n=this.empty(t),r=0,i=e.length;r<i;r++)r&&n.add(","),n.add(a(e[r],this,t));return n},generateArray:function(e,t){var n=this.generateList(e,t);return n.prepend("["),n.add("]"),n}},t.default=s,e.exports=t.default}])})},"/YDJ":function(e,t,n){"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){r.default(e)};var r=function(e){return e&&e.__esModule?e:{default:e}}(n("hGk8"))},"/xXU":function(e,t,n){"use strict";var r,i;r=[n("O074"),n("5cge"),n("MaNa"),n("npc9"),n("ecIC"),n("f9M/")],void 0===(i=function(e,t,n,r,i){return n.extend({play:function(){this.state.set("activated",!0),this.$player.player("play")},pause:function(){this.$player.player("pause")},talk:function(e){this.$player.player("talk",e.get("id"))},mute:function(){this.$player.player("mute",!0)},unmute:function(){this.$player.player("mute",!1)},volume:function(e){this.$player.player("volume",e)},subtitle:function(e){this.$player.player("subtitle",e)},fullscreen:function(){this.$player.player("requestFullScreen",this.fullscreenElement||this.el)},smallscreen:function(){this.$player.player("cancelFullScreen",this.fullscreenElement||this.el)},seek:function(e){this.$player.player("seek",e)},fullscreenElement:null,playerModes:null,className:"Embeddable__player",events:{playererror:function(e,t){var n=t.error,r="client"===n.type?"client":null;"abortive"===n.severity&&this.state.set("error",r||"init"),"fatal"===n.severity&&this.state.set("error",r||"fatal")},playerready:function(){this.state.set("ready",!0),this._checkCapabilities()},playerplay:function(){this.state.set("playing",!0),this.state.set("paused",!1),this.state.set("ended",!1)},playerpause:function(){this.state.set("paused",!0),this.state.set("playing",!1)},playerduration:function(e,t){var n=this.$player.player("talk").id;this.talks.get(n).set("duration",t.duration),this.state.set("duration",t.duration)},playercurrenttime:function(e,t){this.state.set("currentTime",t.currentTime)},playertalk:function(e,t){this.state.set("postrolling",!1),this.state.set("talk",this.talks.get(t.id))},playerended:function(){this.state.set("paused",!1),this.state.set("playing",!1),this.state.set("ended",!0)},playervolume:function(e,t){this.state.set("volume",t.volume)},playermuted:function(e,t){this.state.set("muted",t.muted)},playersubtitle:function(e,t){this.state.set("subtitle",t&&t.subtitle&&t.subtitle.languageCode)},playerenterfullscreen:function(){this.state.set("fullscreen",!0)},playerexitfullscreen:function(){this.state.set("fullscreen",!1)},playerpostrollstart:function(){this.state.set("postrolling",!0)},playerpostrollcomplete:function(){this.state.set("postrolling",!1)}},propsDefaults:{defaultSubtitles:!1,hideAdvertising:!1,nativeLanguage:"en",maiAdUnitId:void 0},stateDefaults:{nativeControls:!1,activated:!1,ended:!1,error:!1,ready:!1,playing:!1,paused:!1,duration:null,currentTime:null,talk:null,volume:.5,canVolume:!1,muted:!1,subtitle:!1,canSubtitle:!1,fullscreen:!1,canFullscreen:!1,postrolling:!1},stateEvents:{"change:nativeControls":function(e,t){t?this.find("video").attr("controls","controls"):this.find("video").removeAttr("controls")},"on:activated":function(){this.$el.addClass("Embeddable__player--activated")}},initialize:function(e){this.talks=e.talks,this.fullscreenElement=e.fullscreenElement||null,this.playerModes=e.playerModes||void 0,this.initializeState(),this.initializeProps()},render:function(){var e=this.props.get("hideAdvertising");return this.$el.html(i()),this.$player=this.$el.find("div.Embeddable__player__object"),this.$player.player({breakpoint:!1,defaultSubtitles:this.props.get("defaultSubtitles"),mai:!e,maiAdUnitId:e?null:this.props.get("maiAdUnitId"),modes:this.playerModes,nativeLanguage:this.props.get("nativeLanguage"),subproperty:"embed",talks:this.talks.toPlayer(),recordInIdentity:!1,uncropped:!1}),this},_canFullscreen:function(){return!!this.$player.player("canFullScreen")&&!r()},_checkCapabilities:function(){var e=this._canFullscreen(),t=this.$player.player("canSubtitle"),n=this.$player.player("canVolume"),r=String(window.navigator&&window.navigator.userAgent||"");this.state.set("canFullscreen",e),this.state.set("canVolume",n),this.state.set("canSubtitle",t),r.match(/\bKaiOS\/([\d\.]+)/gi)&&this.state.set("nativeControls",!0)}})}.apply(t,r))||(e.exports=i)},"/xml":function(e,t,n){"use strict";var r,i;r=[n("+w1B"),n("K37z")],void 0===(i=function(e,t){return e.registerHelper("formatDuration",t),t}.apply(t,r))||(e.exports=i)},10:function(e,t,n){n("sDZe"),e.exports=n("v4rn")},"1Jdc":function(e,t,n){"use strict";var r,i;r=[n("O074"),n("5cge"),n("KsRy"),n("z/83"),n("Nh48"),n("/xXU"),n("m8S9"),n("lzPn"),n("eJwn")],void 0===(i=function(e,t,n,r,i,a,s,o){function l(t){var l=e(t.el),u=new r(t.talks),c=new a({fullscreenElement:t.el,playerModes:t.playerModes,talks:u}),d=new i({talks:u}),h=new s,f=new o;function p(){h.props.set("enabled",d.props.get("activated")&&!d.props.get("postrolling")&&!d.props.get("hideBranding")),h.props.set("visible",d.props.get("hovering")&&!d.props.get("fullscreen")||c.state.get("paused"))}function g(){d.props.set("visible",d.props.get("hovering")||c.state.get("paused"))}d.props.set("hideBranding",t.hideBranding),f.props.set("hideNewsletter",t.hideNewsletter),f.props.set("disableCampaigns",t.disableCampaigns),c.props.set("hideAdvertising",t.hideAdvertising),c.props.set("nativeLanguage",t.nativeLanguage),c.props.set("defaultSubtitles",t.defaultSubtitles),c.props.set("maiAdUnitId",t.maiAdUnitId),h.props.set("url",t.canonicalUrl),d.props.set("url",t.canonicalUrl),c.state.on("change:error",function(e,r){l.html(n({isClient:"client"===r,isInit:"init"===r,isFatal:"fatal"===r,url:t.canonicalUrl}))}),c.state.on("change:nativeControls",function(e,t){d.props.set("enabled",!t)}),c.state.on("change:activated",function(e,t){l.addClass("Embeddable--activated"),l.removeClass("Embeddable--activating"),d.props.set("activated",t)}),c.state.on("change:playing",function(e,t){d.props.set("playing",t)}),c.state.on("change:paused",function(e,t){d.props.set("paused",t)}),c.state.on("change:duration",function(e,t){d.props.set("duration",t)}),c.state.on("change:currentTime",function(e,t){d.props.set("currentTime",t)}),c.state.on("change:ended",function(e,t){f.props.set("activated",t)}),c.state.on("change:talk",function(e,t){d.props.set("talk",t),d.props.set("next",u.after(t)||null),d.props.set("prev",u.before(t)||null)}),c.state.on("change:volume",function(e,t){d.props.set("volume",t)}),c.state.on("change:canVolume",function(e,t){d.props.set("canVolume",t)}),c.state.on("change:muted",function(e,t){d.props.set("muted",t)}),c.state.on("change:subtitle",function(e,t){d.props.set("subtitle",t)}),c.state.on("change:canSubtitle",function(e,t){d.props.set("canSubtitle",t)}),c.state.on("change:fullscreen",function(e,t){d.props.set("fullscreen",t)}),c.state.on("change:canFullscreen",function(e,t){d.props.set("canFullscreen",t)}),c.state.on("change:postrolling",function(e,t){d.props.set("postrolling",t)}),d.state.on("change:playPending",function(e,t){t&&c.play()}),d.state.on("change:pausePending",function(e,t){t&&c.pause()}),d.state.on("change:pendingTalk",function(e,t){t&&c.talk(t)}),d.state.on("change:mutePending",function(e,t){t&&c.mute()}),d.state.on("change:unmutePending",function(e,t){t&&c.unmute()}),d.state.on("change:pendingVolume",function(e,t){null!==t&&c.volume(t)}),d.state.on("change:pendingSubtitle",function(e,t){null!==t&&(t?c.subtitle(t):c.subtitle(!1))}),d.state.on("change:fullscreenPending",function(e,t){t&&c.fullscreen()}),d.state.on("change:smallscreenPending",function(e,t){t&&c.smallscreen()}),d.state.on("change:pendingSeek",function(e,t){null!==t&&c.seek(t)}),f.state.on("change:rewatchPending",function(e,t){t&&(c.seek(0),c.play())}),d.props.on("change:activated",p),d.props.on("change:hovering",p),d.props.on("change:postrolling",p),d.props.on("change:fullscreen",p),c.state.on("change:paused",p),d.props.on("change:hovering",g),d.state.on("change:paused",g),l.hover().on("hoverstart",function(){d.props.set("hovering",!0)}).on("hoverstop",function(){d.props.set("hovering",!1)}),this.$el=l,this.talks=u,this.player=c,this.chrome=d,this.canonball=h,this.ended=f}return t.extend(l.prototype,{activate:function(){this.$el.addClass("Embeddable--activating"),this.player.play()},render:function(){this.$el.prepend(this.player.$el),this.$el.append(this.canonball.$el),this.$el.append(this.chrome.$el),this.$el.append(this.ended.$el),this.ended.render(),this.chrome.render(),this.player.render()}}),l.init=function(e){var n=new l({defaultSubtitles:!!e.defaultSubtitles,el:e.el,canonicalUrl:e.canonicalUrl,disableCampaigns:!!e.disableCampaigns,hideAdvertising:!!e.hideAdvertising,hideBranding:!!e.hideBranding,hideNewsletter:!!e.hideNewsletter,maiAdUnitId:e.maiAdUnitId,nativeLanguage:e.nativeLanguage,playerModes:e.playerModes,talks:e.talks});n.$el.data("embeddable",n),n.render(),n.player.state.once("change:ready",function(){n.$el.removeClass("Embeddable--loading"),window[e.activate]=t.once(function(){n.activate()})})},l}.apply(t,r))||(e.exports=i)},"1TA+":function(e,t,n){var r=n("mp5j");function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,r,a,s){var o=null!=t?t:e.nullContext||{},l=e.escapeExpression;return'\n<div class="Embeddable__expandable__content Embeddable__volume__inner">\n  <div class="Embeddable__volume__meter"><div class="Embeddable__volume__meter__level"></div><div class="Embeddable__volume__slider"></div></div>\n\n  <a class="Embeddable__volume__unmute Embeddable__button Embeddable__button--effective" href="#">'+l(i(n("3fiq")).call(o,"control-mute","Mute","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'</a>\n  <a class="Embeddable__volume__mute Embeddable__button" href="#">'+l(i(n("3fiq")).call(o,"control-mute","Mute","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+"</a>\n</div>\n"},useData:!0})},"20JI":function(e,t,n){"use strict";t.__esModule=!0;var r=n("82EY"),i=function(e){return e&&e.__esModule?e:{default:e}}(n("AIJh"));t.default=function(e){e.registerHelper("each",function(e,t){if(!t)throw new i.default("Must pass iterator to #each");var n=t.fn,a=t.inverse,s=0,o="",l=void 0,u=void 0;function c(t,i,a){l&&(l.key=t,l.index=i,l.first=0===i,l.last=!!a,u&&(l.contextPath=u+t)),o+=n(e[t],{data:l,blockParams:r.blockParams([e[t],t],[u+t,null])})}if(t.data&&t.ids&&(u=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),r.isFunction(e)&&(e=e.call(this)),t.data&&(l=r.createFrame(t.data)),e&&"object"==typeof e)if(r.isArray(e))for(var d=e.length;s<d;s++)s in e&&c(s,s,s===e.length-1);else{var h=void 0;for(var f in e)e.hasOwnProperty(f)&&(void 0!==h&&c(h,s-1),h=f,s++);void 0!==h&&c(h,s-1,!0)}return 0===s&&(o=a(this)),o})},e.exports=t.default},"2gKN":function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};if(!window.TED||!window.TED.zone||!window.TED.zone.hide_advertising){var a=window.ns_=window.ns_||{};a.StreamSense=a.StreamSense||function(){function e(e,t){var a=e||"",o="undefined",l=n.comScore||n.sitestat||function(e){var t,a,l,u,c,h="comScore=",f=r.cookie,p="",g="indexOf",m="length",y=s.browserAcceptsLargeURLs()?v.URL_LENGTH_LIMIT:v.RESTRICTED_URL_LENGTH_LIMIT,_="&ns_",b=n.encodeURIComponent||escape;if(f[g](h)+1)for(u=0,c=(l=f.split(";"))[m];u<c;u++)(a=l[u][g](h))+1&&(p="&"+unescape(l[u].substring(a+h[m])));(e+=_+"_t="+ +new Date+_+"c="+(r.characterSet||r.defaultCharset||"")+p).length>y&&e.indexOf("&")>0&&(t=e.substr(0,y-8).lastIndexOf("&"),e=(e.substring(0,t)+_+"cut="+b(e.substring(t+1))).substr(0,y)),d.httpGet(e),("undefined"==typeof ns_p?"undefined":i(ns_p))===o&&(ns_p={src:e}),ns_p.lastMeasurement=e};if((void 0===t?"undefined":i(t))!==o){var u=[],c=n.encodeURIComponent||escape;for(var h in t)t.hasOwnProperty(h)&&u.push(c(h)+"="+c(t[h]));/[\?\&]$/.test(a)||(a+="&"),a+=u.join("&")}return l(a)}function t(e,t){for(var i,a=n.encodeURIComponent||escape,o=[],l=v.LABELS_ORDER,u=e.split("?"),c=u[0],d=u[1].split("&"),h=0,f=d.length;h<f;h++){var p=d[h].split("="),g=unescape(p[0]),m=unescape(p[1]);g&&(t[g]=m)}var y={};for(h=0,f=l.length;h<f;h++){var _=l[h];if(t.hasOwnProperty(_))void 0!==(b=t[_])&&null!=b&&(y[_]=!0,o.push(a(_)+"="+a(t[_])))}for(var _ in t){var b;if(!y[_])if(t.hasOwnProperty(_))void 0!==(b=t[_])&&null!=b&&o.push(a(_)+"="+a(t[_]))}i=(i=c+"?"+o.join("&"))+(i.indexOf("&c8=")<0?"&c8="+a(r.title):"")+(i.indexOf("&c7=")<0?"&c7="+a(r.URL):"")+(i.indexOf("&c9=")<0?"&c9="+a(r.referrer):"");var A=s.browserAcceptsLargeURLs()?v.URL_LENGTH_LIMIT:v.RESTRICTED_URL_LENGTH_LIMIT;if(i.length>A&&i.indexOf("&")>0){var E=i.substr(0,A-8).lastIndexOf("&");i=(i.substring(0,E)+"&ns_cut="+a(i.substring(E+1))).substr(0,A)}return i}var n,r,s=function(){var e={uid:function(){var e=1;return function(){return+new Date+"_"+e++}}(),filter:function(e,t){var n={};for(var r in t)t.hasOwnProperty(r)&&e(t[r])&&(n[r]=t[r]);return n},extend:function(e){var t,n=arguments.length;e=e||{};for(var r=1;r<n;r++)if(t=arguments[r])for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},getString:function(e,t){var n=String(e);return null==e?t||"na":n},getLong:function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},getInteger:function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},getBoolean:function(e,t){var n="true"==String(e).toLowerCase();return null==e?t||!1:n},isNotEmpty:function(e){return void 0!==e&&null!=e&&void 0!==e.length&&e.length>0},indexOf:function(t,n){var r=-1;return e.forEach(n,function(e,n){e==t&&(r=n)}),r},forEach:function(e,t,n){try{if("function"==typeof t)if(n=void 0!==n?n:null,"number"!=typeof e.length||void 0===e[0]){var r=void 0!==e.__proto__;for(var i in e)(!r||r&&void 0===e.__proto__[i])&&"function"!=typeof e[i]&&t.call(n,e[i],i)}else{i=0;for(var a=e.length;i<a;i++)t.call(n,e[i],i)}}catch(e){}},regionMatches:function(e,t,n,r,i){if(t<0||r<0||t+i>e.length||r+i>n.length)return!1;for(;--i>=0;){if(e.charAt(t++)!=n.charAt(r++))return!1}return!0},size:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},log:function(e,t){if(void 0!==t&&t){var n=new Date,r=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();console.log(r,e)}},isTrue:function(e){return void 0!==e&&("string"==typeof e?"true"===(e=e.toLowerCase())||"1"===e||"on"===e:!!e)},toString:function(t){if(void 0===t)return"undefined";if("string"==typeof t)return t;if("[object Array]"===Object.prototype.toString.call(t))return t.join(",");if(e.size(t)>0){var n="";for(var r in t)t.hasOwnProperty(r)&&(n+=r+":"+t[r]+";");return n}return t.toString()},exists:function(e){return void 0!==e&&null!=e},firstGreaterThan0:function(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];if(n>0)return n}return 0},cloneObject:function(e){if(null==e||"object"!=(void 0===e?"undefined":i(e)))return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},safeGet:function(t,n){return n=e.exists(n)?n:"",e.exists(t)?t:n},getBrowserName:function(){var e,t,n=navigator.userAgent,r=navigator.appName;return-1!=(t=n.indexOf("Opera"))||-1!=(t=n.indexOf("OPR/"))?r="Opera":-1!=(t=n.indexOf("Android"))?r="Android":-1!=(t=n.indexOf("Chrome"))?r="Chrome":-1!=(t=n.indexOf("Safari"))?r="Safari":-1!=(t=n.indexOf("Firefox"))?r="Firefox":-1!=(t=n.indexOf("IEMobile"))?r="Internet Explorer Mobile":"Microsoft Internet Explorer"==r||"Netscape"==r?r="Internet Explorer":(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&((r=n.substring(e,t)).toLowerCase()==r.toUpperCase()&&(r=navigator.appName)),r},getBrowserFullVersion:function(){var e,t,n,r=navigator.userAgent,i=navigator.appName,a=""+parseFloat(navigator.appVersion);return-1!=(t=r.indexOf("Opera"))?(a=r.substring(t+6),-1!=(t=r.indexOf("Version"))&&(a=r.substring(t+8))):-1!=(t=r.indexOf("OPR/"))?a=r.substring(t+4):-1!=(t=r.indexOf("Android"))?a=r.substring(t+11):-1!=(t=r.indexOf("Chrome"))?a=r.substring(t+7):-1!=(t=r.indexOf("Safari"))?(a=r.substring(t+7),-1!=(t=r.indexOf("Version"))&&(a=r.substring(t+8))):-1!=(t=r.indexOf("Firefox"))?a=r.substring(t+8):"Microsoft Internet Explorer"==i?null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(r)&&(a=parseFloat(RegExp.$1)):"Netscape"==i?null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(r)&&(a=parseFloat(RegExp.$1)):r.lastIndexOf(" ")+1<(t=r.lastIndexOf("/"))&&(a=r.substring(t+1)),-1!=(n=(a=a.toString()).indexOf(";"))&&(a=a.substring(0,n)),-1!=(n=a.indexOf(" "))&&(a=a.substring(0,n)),-1!=(n=a.indexOf(")"))&&(a=a.substring(0,n)),e=parseInt(""+a,10),isNaN(e)&&(a=""+parseFloat(navigator.appVersion)),a},browserAcceptsLargeURLs:function(){return null===window.ActiveXObject||!0}};return e}(),o=function(){var e="cs_";return function(){var t="undefined"!=typeof localStorage?localStorage:{};s.extend(this,{get:function(n){return t[e+n]},set:function(n,r){t[e+n]=r},has:function(n){return e+n in t},remove:function(n){delete t[e+n]},clear:function(){for(var e in t)t.hasOwnProperty(e)&&delete t[e]}})}}(),l=function(e,t,n){n&&setTimeout(n,0)},u={dir:function(e){return null},append:function(e,t,n){},write:function(e,t,n){},deleteFile:function(e,t){return!1},read:function(e,t){return null}},c=function(e,t){"undefined"!=typeof engine&&t&&setTimeout(t,0),engine.createHttpClient().createRequest("GET",e,null).start(),t&&setTimeout(t,0)},d={PLATFORM:"generic",httpGet:function(e,t){var n=new Image;n.onload=function(){t&&t(200)},n.onerror=function(){t&&t()},n.src=e},httpPost:l,Storage:o,IO:u,getCrossPublisherId:function(){return null},getAppName:function(){return Constants.UNKNOWN_VALUE},getAppVersion:function(e){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return""},getPlatformVersion:function(){return""},getPlatformName:function(){return"js"},getRuntimeName:function(){return""},getRuntimeVersion:function(){return""},getResolution:function(){return""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},isCrossPublisherIdChanged:function(){return!1}},h=function(){function e(){return s.isNotEmpty(engine.stats.device.id)?engine.stats.device.id:s.isNotEmpty(engine.stats.network.mac)?engine.stats.network.mac:null}function t(){if(null==n){var t=e();null!=t?(n=t,r="31",i=t):(n=+new Date+~~(1e3*Math.random()),r="72",i=null)}}var n=null,r=null,i=null;return{PLATFORM:"trilithium",httpGet:c,httpPost:l,Storage:o,IO:u,getCrossPublisherId:function(){return t(),i},getAppName:function(){return s.isNotEmpty(engine.stats.application.name)?engine.stats.application.name:Constants.UNKNOWN_VALUE},getAppVersion:function(e){return s.isNotEmpty(engine.stats.application.version)?engine.stats.application.version:Constants.UNKNOWN_VALUE},getVisitorId:function(){return t(),n},getVisitorIdSuffix:function(){return r},getDeviceName:function(){return s.safeGet(engine.stats.device.platform,"")},getPlatformVersion:function(){return s.safeGet(engine.stats.device.version,"")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"trilithium"},getRuntimeVersion:function(){return""},getResolution:function(){return"undefined"!=typeof screen&&void 0!==screen.height&&void 0!==screen.width?screen.height+"x"+screen.width:""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:function(){return"undefined"!=typeof engine&&void 0!==engine.stats}}}();d.autoSelect=function(){h.isCompatible()&&s.extend(d,h)},"undefined"!=typeof window&&"undefined"!=typeof document?(n=window,r=document):(n={},r={location:{href:""},title:"",URL:"",referrer:"",cookie:""}),(s=s||{}).filterMap=function(e,t){for(var n in e)-1==s.indexOf(n,t)&&delete e[n]},s.getKeys=function(e,t){var n,r=[];for(n in e)(!t||t.test(n))&&e.hasOwnProperty(n)&&(r[r.length]=n);return r};var f=function(){var e=["play","pause","end","buffer","keep-alive","hb","custom","ad_play","ad_pause","ad_end","ad_click"];return{PLAY:0,PAUSE:1,END:2,BUFFER:3,KEEP_ALIVE:4,HEART_BEAT:5,CUSTOM:6,AD_PLAY:7,AD_PAUSE:8,AD_END:9,AD_CLICK:10,toString:function(t){return e[t]}}}(),p=function(){var e=[f.END,f.PLAY,f.PAUSE,f.BUFFER];return{IDLE:0,PLAYING:1,PAUSED:2,BUFFERING:3,toEventType:function(t){return e[t]}}}(),g={ADPLAY:f.AD_PLAY,ADPAUSE:f.AD_PAUSE,ADEND:f.AD_END,ADCLICK:f.AD_CLICK},v={STREAMSENSE_VERSION:"4.1412.05",DEFAULT_PLAYERNAME:"streamsense",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sq","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_pt","ns_st_pa","ns_st_ad","ns_st_li","ns_st_ci","ns_ap_jb","ns_ap_res","ns_ap_c12m","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_bt","ns_st_bp","ns_st_pc","ns_st_pp","ns_st_br","ns_st_ub","ns_st_vo","ns_st_ws","ns_st_pl","ns_st_pr","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9"]},m=function(){function e(e,t){var r=t[e];null!=r&&(n[e]=r)}var t,n,r=this,i=0,a=0,o=0,l=0,u=0,c=0;s.extend(this,{reset:function(e){null!=e&&e.length>0?s.filterMap(n,e):n={},n.hasOwnProperty("ns_st_cl")||(n.ns_st_cl="0"),n.hasOwnProperty("ns_st_pn")||(n.ns_st_pn="1"),n.hasOwnProperty("ns_st_tp")||(n.ns_st_tp="1"),r.setPauses(0),r.setStarts(0),r.setBufferingTime(0),r.setBufferingTimestamp(-1),r.setPlaybackTime(0),r.setPlaybackTimestamp(-1)},setLabels:function(e,t){null!=e&&s.extend(n,e),r.setRegisters(n,t)},getLabels:function(){return n},setLabel:function(e,t){var n={};n[e]=t,r.setLabels(n,null)},getLabel:function(e){return n[e]},getClipId:function(){return(void 0===t||null==t)&&r.setClipId("1"),t},setClipId:function(e){t=e},setRegisters:function(t,n){var s=t.ns_st_cn;null!=s&&(r.setClipId(s),delete t.ns_st_cn),null!=(s=t.ns_st_bt)&&(o=Number(s),delete t.ns_st_bt),e("ns_st_cl",t),e("ns_st_pn",t),e("ns_st_tp",t),e("ns_st_ub",t),e("ns_st_br",t),n!=p.PLAYING&&null!=n||null!=(s=t.ns_st_sq)&&(a=Number(s),delete t.ns_st_sq),n!=p.BUFFERING&&null!=(s=t.ns_st_pt)&&(u=Number(s),delete t.ns_st_pt),n!=p.PAUSED&&n!=p.IDLE&&null!=n||null!=(s=t.ns_st_pc)&&(i=Number(s),delete t.ns_st_pc)},createLabels:function(e,t){var n=t||{};return n.ns_st_cn=r.getClipId(),n.ns_st_bt=String(r.getBufferingTime()),e!=f.PLAY&&null!=e||(n.ns_st_sq=String(a)),e!=f.PAUSE&&e!=f.END&&e!=f.KEEP_ALIVE&&e!=f.HEART_BEAT&&null!=e||(n.ns_st_pt=String(r.getPlaybackTime()),n.ns_st_pc=String(i)),s.extend(n,r.getLabels()),n},incrementPauses:function(){i++},incrementStarts:function(){a++},getBufferingTime:function(){var e=o;return l>=0&&(e+=+new Date-l),e},setBufferingTime:function(e){o=e},getPlaybackTime:function(){var e=u;return c>=0&&(e+=+new Date-c),e},setPlaybackTime:function(e){u=e},getPlaybackTimestamp:function(){return c},setPlaybackTimestamp:function(e){c=e},getBufferingTimestamp:function(){return l},setBufferingTimestamp:function(e){l=e},getPauses:function(){return i},setPauses:function(e){i=e},getStarts:function(){return a},setStarts:function(e){a=e}}),n={},r.reset()},y=function(){var e,t,n=this,r=null,i=0,a=0,o=0,l=0,u=0,c=0,d=!1;s.extend(this,{reset:function(e){null!=e&&e.length>0?s.filterMap(t,e):t={},n.setPlaylistId(+new Date+"_"+c),n.setBufferingTime(0),n.setPlaybackTime(0),n.setPauses(0),n.setStarts(0),n.setRebufferCount(0),d=!1},setLabels:function(e,r){null!=e&&s.extend(t,e),n.setRegisters(t,r)},getLabels:function(){return t},setLabel:function(e,t){var r={};r[e]=t,n.setLabels(r,null)},getLabel:function(e){return t[e]},getClip:function(){return r},getPlaylistId:function(){return e},setPlaylistId:function(t){e=t},setRegisters:function(t,n){var r=t.ns_st_sp;null!=r&&(i=Number(r),delete t.ns_st_sp),null!=(r=t.ns_st_bc)&&(o=Number(r),delete t.ns_st_bc),null!=(r=t.ns_st_bp)&&(l=Number(r),delete t.ns_st_bp),null!=(r=t.ns_st_id)&&(e=r,delete t.ns_st_id),n!=p.BUFFERING&&null!=(r=t.ns_st_pa)&&(u=Number(r),delete t.ns_st_pa),n!=p.PAUSED&&n!=p.IDLE&&null!=n||null!=(r=t.ns_st_pp)&&(a=Number(r),delete t.ns_st_pp)},createLabels:function(t,r){var l=r||{};return l.ns_st_bp=String(n.getBufferingTime()),l.ns_st_sp=String(i),l.ns_st_id=String(e),o>0&&(l.ns_st_bc=String(o)),t!=f.PAUSE&&t!=f.END&&t!=f.KEEP_ALIVE&&t!=f.HEART_BEAT&&null!=t||(l.ns_st_pa=String(n.getPlaybackTime()),l.ns_st_pp=String(a)),t!=f.PLAY&&null!=t||n.didFirstPlayOccurred()||(l.ns_st_pb="1",n.setFirstPlayOccurred(!0)),s.extend(l,n.getLabels()),l},incrementStarts:function(){i++},incrementPauses:function(){a++,r.incrementPauses()},setPlaylistCounter:function(e){c=e},incrementPlaylistCounter:function(){c++},addPlaybackTime:function(e){if(r.getPlaybackTimestamp()>=0){var t=e-r.getPlaybackTimestamp();r.setPlaybackTimestamp(-1),r.setPlaybackTime(r.getPlaybackTime()+t),n.setPlaybackTime(n.getPlaybackTime()+t)}},addBufferingTime:function(e){if(r.getBufferingTimestamp()>=0){var t=e-r.getBufferingTimestamp();r.setBufferingTimestamp(-1),r.setBufferingTime(r.getBufferingTime()+t),n.setBufferingTime(n.getBufferingTime()+t)}},getBufferingTime:function(){var e=l;return r.getBufferingTimestamp()>=0&&(e+=+new Date-r.getBufferingTimestamp()),e},setBufferingTime:function(e){l=e},getPlaybackTime:function(){var e=u;return r.getPlaybackTimestamp()>=0&&(e+=+new Date-r.getPlaybackTimestamp()),e},setPlaybackTime:function(e){u=e},getStarts:function(){return i},setStarts:function(e){i=e},getPauses:function(){return a},setPauses:function(e){a=e},getRebufferCount:function(){return o},incrementRebufferCount:function(){o++},setRebufferCount:function(e){o=e},didFirstPlayOccurred:function(){return d},setFirstPlayOccurred:function(e){d=e}}),r=new m,t={},n.reset()},_=function(){var n=function(n,r){function i(e){var t=0;if(null!=re)for(var n=0;n<re.length;n++){var r=re[n],i=r.playingtime;if(!i||e<i){t=r.interval;break}}return t}function o(){h();var e=i(ee.getClip().getPlaybackTime());e>0&&(H=setTimeout(c,se>0?se:e));se=0}function l(){h();var e=i(ee.getClip().getPlaybackTime());se=e-ee.getClip().getPlaybackTime()%e,null!=H&&h()}function u(){se=0,0,oe=0}function c(){oe++,x(N(f.HEART_BEAT,null)),se=0,o()}function h(){null!=H&&(clearTimeout(H),H=null)}function g(){_(),q=setTimeout(m,ie)}function m(){x(N(f.KEEP_ALIVE,null)),Z++,g()}function _(){null!=q&&(clearTimeout(q),q=null)}function b(){E(),z.isPauseOnBufferingEnabled()&&R(p.PAUSED)&&(j=setTimeout(A,ae))}function A(){G==p.PLAYING&&(ee.incrementRebufferCount(),ee.incrementPauses(),x(N(f.PAUSE,null)),Z++,G=p.PAUSED)}function E(){null!=j&&(clearTimeout(j),j=null)}function w(e){return e==p.PLAYING||e==p.PAUSED}function S(){F&&(clearTimeout(F),F=null)}function T(e,t,n){if(S(),n)F=setTimeout(function(e,t){return function(){T(e,t)}}(e,t),n);else if(function(e){return null!=e&&I()!=e}(e)){var r=I(),i=Q,a=P(t),o=i>=0?a-i:0;(function(e,t){var n=P(t);if(e==p.PLAYING)ee.addPlaybackTime(n),l(),_();else if(e==p.BUFFERING)ee.addBufferingTime(n),E();else if(e==p.IDLE){var r=s.getKeys(ee.getClip().getLabels());ee.getClip().reset(r)}})(I(),t),C(e,t),O(I()),function(e){U=e,Q=+new Date}(e);for(var u=0,c=$.length;u<c;u++)$[u](r,e,t,o);k(t),ee.setRegisters(t,e),ee.getClip().setRegisters(t,e);var d=N(p.toEventType(e),t);s.extend(d,t),R(U)&&(x(d),G=U,Z++)}}function k(e){var t=e.ns_st_mp;null!=t&&(V=t,delete e.ns_st_mp),null!=(t=e.ns_st_mv)&&(K=t,delete e.ns_st_mv),null!=(t=e.ns_st_ec)&&(Z=Number(t),delete e.ns_st_ec)}function x(e,n){void 0===n&&(n=!0),n&&D(e);var r=z.getPixelURL();if(B){if(!function(){var e=B.getAppContext(),t=B.getSalt(),n=B.getPixelURL();return null==e||null==t||0==t.length||null==n||0==n.length}()){var i=ue.am,a=ue.et,s=i.newApplicationMeasurement(B,a.HIDDEN,e,r);B.getQueue().offer(s)}}else r&&d.httpGet(t(r,e))}function D(e){W=N(null),s.extend(W,e)}function C(e,t){var n=P(t),r=L(t);J=r,e==p.PLAYING?(o(),g(),ee.getClip().setPlaybackTimestamp(n),R(e)&&(ee.getClip().incrementStarts(),ee.getStarts()<1&&ee.setStarts(1))):e==p.PAUSED?R(e)&&ee.incrementPauses():e==p.BUFFERING?(ee.getClip().setBufferingTimestamp(n),ne&&b()):e==p.IDLE&&u()}function R(e){return(e!=p.PAUSED&&e!=p.IDLE||G!=p.IDLE&&null!=G)&&(e!=p.BUFFERING&&G!=e)}function L(e){var t=-1;return e.hasOwnProperty("ns_st_po")&&(t=s.getInteger(e.ns_st_po)),t}function P(e){var t=-1;return e.hasOwnProperty("ns_ts")&&(t=Number(e.ns_ts)),t}function I(){return U}function O(e){e}function N(){var e,t;1==arguments.length?(e=p.toEventType(U),t=arguments[0]):(e=arguments[0],t=arguments[1]);var n={};if("undefined"!=typeof document){var r=document;n.c7=r.URL,n.c8=r.title,n.c9=r.referrer}return null!=t&&s.extend(n,t),n.hasOwnProperty("ns_ts")||(n.ns_ts=String(+new Date)),null!=e&&!n.hasOwnProperty("ns_st_ev")&&(n.ns_st_ev=f.toString(e)),z.isPersistentLabelsShared()&&B&&s.extend(n,B.getLabels()),s.extend(n,z.getLabels()),function(e,t){var n=t||{};if(n.ns_st_ec=String(Z),!n.hasOwnProperty("ns_st_po")){var r=J,i=P(n);(e==f.PLAY||e==f.KEEP_ALIVE||e==f.HEART_BEAT||null==e&&U==p.PLAYING)&&(r+=i-ee.getClip().getPlaybackTimestamp()),n.ns_st_po=s.getInteger(r)}e==f.HEART_BEAT&&(n.ns_st_hc=String(oe))}(e,n),ee.createLabels(e,n),ee.getClip().createLabels(e,n),n.hasOwnProperty("ns_st_mp")||(n.ns_st_mp=V),n.hasOwnProperty("ns_st_mv")||(n.ns_st_mv=K),n.hasOwnProperty("ns_st_ub")||(n.ns_st_ub="0"),n.hasOwnProperty("ns_st_br")||(n.ns_st_br="0"),n.hasOwnProperty("ns_st_pn")||(n.ns_st_pn="1"),n.hasOwnProperty("ns_st_tp")||(n.ns_st_tp="1"),n.hasOwnProperty("ns_st_it")||(n.ns_st_it="c"),n.ns_st_sv=v.STREAMSENSE_VERSION,n.ns_type="hidden",n}var M,F,U,B,j,q,H,G,V,K,W,$,z=this,Y=500,X=null,Q=0,J=0,Z=0,ee=null,te=!0,ne=!0,re=v.DEFAULT_HEARTBEAT_INTERVAL,ie=v.DEFAULT_KEEP_ALIVE_INTERVAL,ae=v.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,se=0,oe=0,le=!1,ue={};d.autoSelect(),s.extend(this,{reset:function(e){ee.reset(e),ee.setPlaylistCounter(0),ee.setPlaylistId(+new Date+"_1"),ee.getClip().reset(e),null==e||e.isEmpty()?M={}:s.filterMap(M,e),Z=1,oe=0,l(),u(),_(),E(),S(),U=p.IDLE,null,Q=-1,G=null,V=v.DEFAULT_PLAYERNAME,K=v.STREAMSENSE_VERSION,W=null},setPauseOnBufferingInterval:function(e){ae=e},getPauseOnBufferingInterval:function(){return ae},setKeepAliveInterval:function(e){ie=e},getKeepAliveInterval:function(){return ie},setHeartbeatIntervals:function(e){re=e},notify:function(){var e,t,n,r;t=arguments[0],3==arguments.length?(n=arguments[1],r=arguments[2]):(n={},r=arguments[1]),e=function(e){return e==f.PLAY?p.PLAYING:e==f.PAUSE?p.PAUSED:e==f.BUFFER?p.BUFFERING:e==f.END?p.IDLE:null}(t);var i=s.extend({},n);if(function(e){P(e)<0&&(e.ns_ts=String(+new Date))}(i),i.hasOwnProperty("ns_st_po")||(i.ns_st_po=s.getInteger(r).toString()),t==f.PLAY||t==f.PAUSE||t==f.BUFFER||t==f.END)z.isPausePlaySwitchDelayEnabled()&&w(U)&&w(e)&&(U!=p.PLAYING||e!=p.PAUSED||F)?T(e,i,Y):T(e,i);else{var a=N(t,i);s.extend(a,i),x(a,!1),Z++}},getLabels:function(){return M},getState:function(){return U},setLabels:function(e){null!=e&&(null==M?M=e:s.extend(M,e))},getLabel:function(e){return M[e]},setLabel:function(e,t){null==t?delete M[e]:M[e]=t},setPixelURL:function(e){if(null==e||0==e.length)return null;var t=decodeURIComponent||unescape,n=e.indexOf("?");if(n>=0){if(n<e.length-1){for(var r=e.substring(n+1).split("&"),i=0,a=r.length;i<a;i++){var s=r[i].split("=");2==s.length?z.setLabel(s[0],t(s[1])):1==s.length&&z.setLabel(v.PAGE_NAME_LABEL,t(s[0]))}e=e.substring(0,n+1)}}else e+="?";return X=e},getPixelURL:function(){return X||("undefined"!=typeof ns_p&&"string"==typeof ns_p.src?X=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?X=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null)},isPersistentLabelsShared:function(){return te},setPersistentLabelsShared:function(e){te=e},isPauseOnBufferingEnabled:function(){return ne},setPauseOnBufferingEnabled:function(e){ne=e},isPausePlaySwitchDelayEnabled:function(){return le},setPausePlaySwitchDelayEnabled:function(e){le=e},setPausePlaySwitchDelay:function(e){e&&e>0&&(Y=e)},getPausePlaySwitchDelay:function(){return Y},setClip:function(e,t){var n=!1;return U==p.IDLE&&(ee.getClip().reset(),ee.getClip().setLabels(e,null),t&&ee.incrementStarts(),n=!0),n},setPlaylist:function(e){var t=!1;return U==p.IDLE&&(ee.incrementPlaylistCounter(),ee.reset(),ee.getClip().reset(),ee.setLabels(e,null),t=!0),t},importState:function(e){reset();var t=s.extend({},e);ee.setRegisters(t,null),ee.getClip().setRegisters(t,null),k(t),Z++},exportState:function(){return W},getVersion:function(){return v.STREAMSENSE_VERSION},addListener:function(e){$.push(e)},removeListener:function(e){$.splice(s.indexOf(e,$),1)},getClip:function(){return ee.getClip()},getPlaylist:function(){return ee}}),s.extend(this,{adNotify:function(e,t,n){(t=t||{}).ns_st_ad=1,e>=f.AD_PLAY&&e<=f.AD_CLICK&&z.notify(e,t,n)},customNotify:function(e,t){z.notify(f.CUSTOM,e,t)},viewNotify:function(t,n){(t=t||z.getPixelURL())&&e(t,n)}}),a.comScore&&(ue=a.comScore.exports,B=ue.c()),M={},Z=1,U=p.IDLE,ee=new y,j=null,ne=!0,H=null,oe=0,u(),q=null,F=null,le=!1,G=null,J=0,$=[],z.reset(),n&&z.setLabels(n),r&&z.setPixelURL(r)};return function(e){function t(e,t){return l[c]||r(e,t)}function n(){c=-1;for(var e=0;e<=u;e++)if(l.hasOwnProperty(e)){c=e;break}return a.StreamSense.activeIndex=c,c}function r(e,t){return e=e||null,t=t||null,e&&"object"==(void 0===e?"undefined":i(e))&&(t=e,e=null),l[++u]=new a.StreamSense(t,e),n(),l[u]}function o(){var e=!1,t=c;if("number"==typeof arguments[0]&&isFinite(arguments[0]))t=arguments[0];else if(arguments[0]instanceof a.StreamSense)for(var r in l)if(l[r]===arguments[0]){t=r;break}return l.hasOwnProperty(t)&&(e=l[t],delete l[t],e.reset(),n()),e}var l={},u=-1,c=-1;s.extend(e,{activeIndex:c,newInstance:r,new:r,destroyInstance:o,destroy:o,newPlaylist:function(e){return e=e||{},t().setPlaylist(e),t().getPlaylist()},newClip:function(e,n,r){return e=e||{},"number"==typeof n&&(e.ns_st_cn=n),t().setClip(e,r),t().getClip()},notify:function(e,n,r){return void 0!==e&&(r=r||null,n=n||{},t().notify(e,n,r))},setLabels:function(e){void 0!==e&&t().setLabels(e)},getLabels:function(){return t().getLabels()},setPlaylistLabels:function(e){void 0!==e&&t().getPlaylist().setLabels(e)},getPlaylistLabels:function(){return t().getPlaylist().getLabels()},setClipLabels:function(e){void 0!==e&&t().getClip().setLabels(e)},getClipLabels:function(){return t().getClip().getLabels()},resetInstance:function(e){return t().reset(e||{})},resetPlaylist:function(e){return t().getPlaylist().reset(e||{})},resetClip:function(e){return t().getClip().reset(e||{})},viewEvent:function(e){return e=e||{},t().viewNotify(null,e)},customEvent:function(e,n){return arguments.length>2&&(e=arguments[1],n=arguments[2]),e=e||{},"number"==typeof n&&(e.ns_st_po=n),t().customNotify(e,n)},exportState:function(){return t().exportState()},importState:function(e){t().importState(e)}})}(n),n}();return _.AdEvents=g,_.PlayerEvents=f,a.StreamingTag=a.StreamingTag||function(){var e=function(e){function t(e){return s.exists(e)||(e={}),s.exists(e.ns_st_ci)||(e.ns_st_ci="0"),s.exists(e.c3)||(e.c3="*null"),s.exists(e.c4)||(e.c4="*null"),s.exists(e.c6)||(e.c6="*null"),e}function n(e){return d>0&&e>=d?h+=e-d:h=0,h}function r(e){m.getState()!=p.IDLE&&m.getState()!=p.PAUSED?m.notify(f.END,n(e)):m.getState()==p.PAUSED&&m.notify(f.END,h)}function i(e,t,n){if(s.exists(e)&&s.exists(t)&&s.exists(n)){var r=t[e],i=n[e];return s.exists(r)&&s.exists(i)&&r===i}return!1}function o(e,t){r(e);var n={ns_st_cn:++c,ns_st_pn:"1",ns_st_tp:"0"};s.extend(n,t),m.setClip(n),g=t,d=e,h=0,m.notify(f.PLAY,h)}function l(e){var n=+new Date;r(n),c++,e=t(e);var i={ns_st_cn:c,ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};s.extend(i,e),m.setClip(i),h=0,m.notify(f.PLAY,h),d=n,v=!1}function u(e,n){var r=+new Date;e=t(e),A==b.None&&(A=n),v&&A==n&&function(e){return i("ns_st_ci",g,e)&&i("c3",g,e)&&i("c4",g,e)&&i("c6",g,e)}(e)?(m.getClip().setLabels(e),m.getState()!=p.PLAYING&&(d=r,m.notify(f.PLAY,h))):o(r,e),v=!0,A=n}var c=0,d=0,h=0,g=null,v=!1,m=new _,y=!1,b={None:0,AudioContent:1,VideoContent:2},A=b.None;s.extend(this,{playAdvertisement:function(){y&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead."),l({ns_st_ct:"va"})},playVideoAdvertisement:function(e){var t={ns_st_ct:"va"};e&&s.extend(t,e),l(t)},playAudioAdvertisement:function(e){var t={ns_st_ct:"aa"};e&&s.extend(t,e),l(t)},playContentPart:function(e){y&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var t={ns_st_ct:"vc"};e&&s.extend(t,e),u(t,b.VideoContent)},playVideoContentPart:function(e){var t={ns_st_ct:"vc"};e&&s.extend(t,e),u(t,b.VideoContent)},playAudioContentPart:function(e){var t={ns_st_ct:"ac"};e&&s.extend(t,e),u(t,b.AudioContent)},stop:function(){var e=+new Date;m.notify(f.PAUSE,n(e))}}),function(){if(!a.comScore&&s.exists(e))if(y=s.isTrue(e.debug),s.exists(e.customerC2)){var t=e.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");m.setPixelURL(t+".scorecardresearch.com/p?c1=2"),m.setLabel("c2",e.customerC2)}else m.setPixelURL(""),y&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.");m.setLabel("ns_st_it","r")}()};return e}(),_}()}void 0===(r=function(){return window.ns_}.call(t,n,t,e))||(e.exports=r)},"3EqX":function(e,t,n){"use strict";var r,i;r=[n("5cge"),n("lDDm"),n("2gKN"),t],void 0===(i=function(e,t,n,r){r.init=function(e){this._init(),this._setContext(e)},r.start=function(){this._play()},r.stop=function(){this._tag&&this._tag.stop()},r.startAd=function(){this._asset.isInAd=!0,this._play()},r.stopAd=function(){this._asset.isInAd=!1,this._play()},r._meta=null,r._asset=null,r._tag=null,r._init=e.once(function(){n&&n.StreamingTag&&(r._tag=new n.StreamingTag({customerC2:t("csClientId")}))}),r._setContext=function(e){var t={};e.talkId&&(t.ns_st_ci=e.talkId),this._meta=t,this._asset={isInAd:!1,isVideo:!0}},r._reset=function(){r._meta=null,r._asset=null,r._tag=null},r._play=function(){this._tag&&(this._asset.isInAd?this._asset.isVideo?this._tag.playVideoAdvertisement():this._tag.playAudioAdvertisement():this._asset.isVideo?this._tag.playVideoContentPart(this._meta):this._tag.playAudioContentPart(this._meta))}}.apply(t,r))||(e.exports=i)},"3fiq":function(e,t,n){"use strict";var r,i;r=[n("+w1B"),n("Ivfv"),n("BaCQ")],void 0===(i=function(e,t,n){function r(){return new e.SafeString(n.apply(window,t(arguments)))}return e.registerHelper("icon",r),r}.apply(t,r))||(e.exports=i)},"3t64":function(e,t,n){"use strict";var r,i;r=[n("MaNa"),n("nDlD"),n("9n26"),n("K37z"),n("ggSm")],void 0===(i=function(e,t,n,r,i){return e.extend({className:"Embeddable__controls",propsDefaults:{unskipEnabled:!1,playEnabled:!1,pauseEnabled:!1,skipEnabled:!1,volumeActive:!1,volumeEnabled:!1,volumeMuted:!1,timingEnabled:!0,subtitlesEnabled:!1,subtitlesActive:!1,subtitlesEffective:!1,playlistEnabled:!1,playlistActive:!1,fullscreenEnabled:!1,fullscreen:!1,url:"https://www.ted.com/"},propsEvents:{"change:unskipEnabled":"renderUnskip","change:playEnabled":"renderPlay","change:pauseEnabled":"renderPause","change:skipEnabled":"renderSkip","change:volumeEnabled":"renderVolume","change:volumeMuted":"renderVolume","change:volumeActive":t("a.Embeddable__controls__volume","Embeddable__button--active"),"change:timingEnabled":n("span.Embeddable__controls__timing","Embeddable__controls__timing--inapplicable"),"change:subtitlesEnabled":"renderSubtitles","change:subtitlesActive":t("a.Embeddable__controls__subtitles","Embeddable__button--active"),"change:subtitlesEffective":t("a.Embeddable__controls__subtitles","Embeddable__button--effective"),"change:playlistActive":t("a.Embeddable__controls__playlist","Embeddable__button--active"),"change:playlistEnabled":"renderPlaylist","change:fullscreenEnabled":"renderFullscreen","change:fullscreen":"renderFullscreen","change:url":"renderUrl"},render:function(){return this.$el.html(i()),this.renderUnskip(),this.renderPlay(),this.renderPause(),this.renderSkip(),this.renderVolume(),this.renderSubtitles(),this.renderPlaylist(),this.renderFullscreen(),this.renderUrl(),this},renderCurrent:function(e){this.find("span.Embeddable__controls__current").text(r(e))},renderDuration:function(e){this.find("span.Embeddable__controls__duration").text(r(e))},renderUnskip:n("a.Embeddable__controls__unskip","Embeddable__button--disabled"),renderPlay:n("a.Embeddable__controls__play","Embeddable__button--inapplicable"),renderPause:n("a.Embeddable__controls__pause","Embeddable__button--inapplicable"),renderSkip:n("a.Embeddable__controls__skip","Embeddable__button--disabled"),renderSubtitles:n("a.Embeddable__controls__subtitles","Embeddable__button--inapplicable"),renderPlaylist:n("a.Embeddable__controls__skip,a.Embeddable__controls__unskip,a.Embeddable__controls__playlist","Embeddable__button--inapplicable"),renderVolume:function(){var e=this.props.get("volumeEnabled"),t=this.props.get("volumeMuted");this.find("a.Embeddable__controls__volume")[e?"removeClass":"addClass"]("Embeddable__button--inapplicable")[t?"addClass":"removeClass"]("Embeddable__button--effective")},renderUrl:function(){var e=this.props.get("url")||this.propsDefaults.url;this.find("a.Embeddable__controls__outbound").attr("href",e)},renderFullscreen:function(){var e=this.props.get("fullscreen"),t=this.props.get("fullscreenEnabled");this.$el[t&&e?"addClass":"removeClass"]("Embeddable__controls--fullscreen"),this.find("a.Embeddable__controls__fullscreen")[!t||e?"addClass":"removeClass"]("Embeddable__button--inapplicable"),this.find("a.Embeddable__controls__smallscreen")[t&&e?"removeClass":"addClass"]("Embeddable__button--inapplicable"),this.find("a.Embeddable__controls__outbound")[t?"addClass":"removeClass"]("Embeddable__button--inapplicable")}})}.apply(t,r))||(e.exports=i)},"5cge":function(e,t,n){"use strict";(function(e,r){var i;void 0===(i=function(e,t){var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s){var o,l=[],u=[],c=0,d={},h=+new Date+"",f=75,p=40,g=/\b__p \+= '';/g,v=/\b(__p \+=) '' \+/g,m=/(__e\(.*?\)|\b__t\)) \+\n'';/g,y=/&(?:amp|lt|gt|quot|#39);/g,_=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,b=/\w*$/,A=/<%=([\s\S]+?)%>/g,E=(E=/\bthis\b/)&&E.test(le)&&E,w=" \t\v\f\ufeff\n\r\u2028\u2029",S=RegExp("^["+w+"]*0+(?=.$)"),T=/($^)/,x=/[&<>"']/g,D=/['\n\r\t\u2028\u2029\\]/g,C=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],R=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],L=0,P="[object Arguments]",I="[object Array]",O="[object Boolean]",N="[object Date]",M="[object Error]",F="[object Function]",U="[object Number]",B="[object Object]",j="[object RegExp]",q="[object String]",H={};H[F]=!1,H[P]=H[I]=H[O]=H[N]=H[U]=H[B]=H[j]=H[q]=!0;var G={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},V={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},K=G[a(t)]&&t,W=G[a(e)]&&e&&e.exports==K&&e,$=G[void 0===r?"undefined":a(r)]&&r;function z(e,t,n){for(var r=(n||0)-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function Y(e,t){var n=void 0===t?"undefined":a(t);if(e=e.cache,"boolean"==n||null==t)return e[t];"number"!=n&&"string"!=n&&(n="object");var r="number"==n?t:h+t;return e=e[n]||(e[n]={}),"object"==n?e[r]&&z(e[r],t)>-1?0:-1:e[r]?0:-1}function X(e){var t=this.cache,n=void 0===e?"undefined":a(e);if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?e:h+e,i=t[n]||(t[n]={});"object"==n?(i[r]||(i[r]=[])).push(e)==this.array.length&&(t[n]=!1):i[r]=!0}}function Q(e){return e.charCodeAt(0)}function J(e,t){var n=e.index,r=t.index;if((e=e.criteria)!==(t=t.criteria)){if(e>t||void 0===e)return 1;if(e<t||void 0===t)return-1}return n<r?-1:1}function Z(e){var t=-1,n=e.length,r=ne();r.false=r.null=r.true=r[void 0]=!1;var i=ne();for(i.array=e,i.cache=r,i.push=X;++t<n;)i.push(e[t]);return!1===r.object?(se(i),null):i}function ee(e){return"\\"+V[e]}function te(){return l.pop()||[]}function ne(){return u.pop()||{args:"",array:null,bottom:"",cache:null,criteria:null,false:!1,firstArg:"",index:0,init:"",leading:!1,loop:"",maxWait:0,null:!1,number:null,object:null,push:null,shadowedProps:null,string:null,top:"",trailing:!1,true:!1,undefined:!1,useHas:!1,useKeys:!1,value:null}}function re(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function ie(){}function ae(e){e.length=0,l.length<p&&l.push(e)}function se(e){var t=e.cache;t&&se(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,u.length<p&&u.push(e)}function oe(e,t,n){t||(t=0),void 0===n&&(n=e?e.length:0);for(var r=-1,i=n-t||0,a=Array(i<0?0:i);++r<i;)a[r]=e[t+r];return a}function le(e){var t=(e=e?ue.defaults(s.Object(),e,ue.pick(s,C)):s).Array,n=e.Boolean,r=e.Date,i=e.Error,l=e.Function,u=e.Math,p=e.Number,V=e.Object,K=e.RegExp,$=e.String,X=e.TypeError,ce=[],de=i.prototype,he=V.prototype,fe=$.prototype,pe=e._,ge=K("^"+$(he.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),ve=u.ceil,me=e.clearTimeout,ye=ce.concat,_e=u.floor,be=l.prototype.toString,Ae=ge.test(Ae=V.getPrototypeOf)&&Ae,Ee=he.hasOwnProperty,we=ce.push,Se=he.propertyIsEnumerable,Te=e.setImmediate,ke=e.setTimeout,xe=he.toString,De=ge.test(De=xe.bind)&&De,Ce=ge.test(Ce=V.create)&&Ce,Re=ge.test(Re=t.isArray)&&Re,Le=e.isFinite,Pe=e.isNaN,Ie=ge.test(Ie=V.keys)&&Ie,Oe=u.max,Ne=u.min,Me=e.parseInt,Fe=u.random,Ue=ce.slice,Be=ge.test(e.attachEvent),je=De&&!/\n|true/.test(De+Be),qe={};qe[I]=t,qe[O]=n,qe[N]=r,qe[F]=l,qe[B]=V,qe[U]=p,qe[j]=K,qe[q]=$;var He={};function Ge(e){return e&&"object"==(void 0===e?"undefined":a(e))&&!at(e)&&Ee.call(e,"__wrapped__")?e:new Ve(e)}function Ve(e){this.__wrapped__=e}He[I]=He[N]=He[U]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},He[O]=He[q]={constructor:!0,toString:!0,valueOf:!0},He[M]=He[F]=He[j]={constructor:!0,toString:!0},He[B]={constructor:!0},function(){for(var e=R.length;e--;){var t=R[e];for(var n in He)Ee.call(He,n)&&!Ee.call(He[n],t)&&(He[n][t]=!1)}}(),Ve.prototype=Ge.prototype;var Ke=Ge.support={};!function(){var e=function(){this.x=1},n={0:1,length:1},r=[];for(var i in e.prototype={valueOf:1,y:1},new e)r.push(i);for(i in arguments);Ke.argsObject=arguments.constructor==V&&!(arguments instanceof t),Ke.argsClass=it(arguments),Ke.enumErrorProps=Se.call(de,"message")||Se.call(de,"name"),Ke.enumPrototypes=Se.call(e,"prototype"),Ke.fastBind=De&&!je,Ke.ownLast="x"!=r[0],Ke.nonEnumArgs=0!=i,Ke.nonEnumShadows=!/valueOf/.test(r),Ke.spliceObjects=(ce.splice.call(n,0,1),!n[0]),Ke.unindexedChars="x"[0]+V("x")[0]!="xx";try{Ke.nodeClass=!(xe.call(document)==B&&!({toString:0}+""))}catch(e){Ke.nodeClass=!0}}(1),Ge.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:A,variable:"",imports:{_:Ge}};var We=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(t+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",Ke.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):Ke.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),Ke.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),Ke.enumErrorProps&&(t+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];if(Ke.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),Ke.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),e.useHas&&e.useKeys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }  ";else if(t+="\n  for (index in iterable) {\n",e.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }    ",Ke.nonEnumShadows){for(t+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;k<7;k++)t+="\n    index = '"+e.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(t+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),t+=") {\n      "+e.loop+";\n    }      ";t+="\n  }    "}return(e.array||Ke.nonEnumArgs)&&(t+="\n}"),t+=e.bottom+";\nreturn result"},$e={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},ze={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : lodash.createCallback(callback, thisArg)",array:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},Ye={top:"if (!objectTypes[typeof iterable]) return result;\n"+ze.top,array:!1};function Xe(e,t,n,r){var i=_t(e),a=!n,s=t;if(a){var o=r;n=t}else if(!i){if(!r)throw new X;t=e}return function r(){var l=arguments,u=a?this:t;if(i||(e=t[s]),n.length&&(l=l.length?(l=Ue.call(l),o?l.concat(n):n.concat(l)):n),this instanceof r){u=Je(e.prototype);var c=e.apply(u,l);return bt(c)?c:u}return e.apply(u,l)}}function Qe(){var e=ne();e.shadowedProps=R,e.array=e.bottom=e.loop=e.top="",e.init="iterable",e.useHas=!0,e.useKeys=!!ot;for(var t,n=0;t=arguments[n];n++)for(var r in t)e[r]=t[r];var i=e.args;e.firstArg=/^[^,]+/.exec(i)[0];var a=l("errorClass, errorProto, hasOwnProperty, isArguments, isArray, isString, keys, lodash, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+i+") {\n"+We(e)+"\n}");return se(e),a(M,de,Ee,it,at,wt,ot,Ge,he,G,He,q,fe,xe)}function Je(e){return bt(e)?Ce(e):{}}if(!Ce)var Je=function(e){if(bt(e)){ie.prototype=e;var t=new ie;ie.prototype=null}return t||{}};function Ze(e){return ut[e]}function et(e,t,n){var r=(r=Ge.indexOf)===jt?z:r;return r}function tt(e){return function(t,n,r,i){return"boolean"!=typeof n&&null!=n&&(r=(i=r)&&i[n]===t?o:n,n=!1),null!=r&&(r=Ge.createCallback(r,i)),e(t,n,r,i)}}function nt(e){var t,n;return!(!e||xe.call(e)!=B||_t(t=e.constructor)&&!(t instanceof t)||!Ke.argsClass&&it(e)||!Ke.nodeClass&&re(e))&&(Ke.ownLast?(pt(e,function(e,t,r){return n=Ee.call(r,t),!1}),!1!==n):(pt(e,function(e,t){n=t}),n===o||Ee.call(e,n)))}function rt(e){return ct[e]}function it(e){return xe.call(e)==P}Ke.argsClass||(it=function(e){return!!e&&Ee.call(e,"callee")});var at=Re||function(e){return!!e&&("object"==(void 0===e?"undefined":a(e))&&xe.call(e)==I)},st=Qe({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),ot=Ie?function(e){return bt(e)?Ke.enumPrototypes&&"function"==typeof e||Ke.nonEnumArgs&&e.length&&it(e)?st(e):Ie(e):[]}:st,lt=Qe(ze),ut={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ct=mt(ut),dt=Qe($e,{top:$e.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = lodash.createCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"});function ht(e,t,n,r,i,a){var s=e;if("boolean"!=typeof t&&null!=t&&(r=n,n=t,t=!1),"function"==typeof n){if(n=void 0===r?n:Ge.createCallback(n,r,1),void 0!==(s=n(s)))return s;s=e}var l=bt(s);if(l){var u=xe.call(s);if(!H[u]||!Ke.nodeClass&&re(s))return s;var c=at(s)}if(!l||!t)return l?c?oe(s):dt({},s):s;var d=qe[u];switch(u){case O:case N:return new d(+s);case U:case q:return new d(s);case j:return d(s.source,b.exec(s))}var h=!i;i||(i=te()),a||(a=te());for(var f=i.length;f--;)if(i[f]==e)return a[f];return s=c?d(s.length):{},c&&(Ee.call(e,"index")&&(s.index=e.index),Ee.call(e,"input")&&(s.input=e.input)),i.push(e),a.push(s),(c?lt:gt)(e,function(e,r){s[r]=ht(e,t,n,o,i,a)}),h&&(ae(i),ae(a)),s}var ft=Qe($e);var pt=Qe(ze,Ye,{useHas:!1}),gt=Qe(ze,Ye);function vt(e){var t=[];return pt(e,function(e,n){_t(e)&&t.push(n)}),t.sort()}function mt(e){for(var t=-1,n=ot(e),r=n.length,i={};++t<r;){var a=n[t];i[e[a]]=a}return i}function yt(e,t,n,r,i,s){var o=n===d;if("function"==typeof n&&!o){var l=(n=Ge.createCallback(n,r,2))(e,t);if(void 0!==l)return!!l}if(e===t)return 0!==e||1/e==1/t;var u=void 0===e?"undefined":a(e),c=void 0===t?"undefined":a(t);if(e==e&&(!e||"function"!=u&&"object"!=u)&&(!t||"function"!=c&&"object"!=c))return!1;if(null==e||null==t)return e===t;var h=xe.call(e),f=xe.call(t);if(h==P&&(h=B),f==P&&(f=B),h!=f)return!1;switch(h){case O:case N:return+e==+t;case U:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case j:case q:return e==$(t)}var p=h==I;if(!p){if(Ee.call(e,"__wrapped__ ")||Ee.call(t,"__wrapped__"))return yt(e.__wrapped__||e,t.__wrapped__||t,n,r,i,s);if(h!=B||!Ke.nodeClass&&(re(e)||re(t)))return!1;var g=!Ke.argsObject&&it(e)?V:e.constructor,v=!Ke.argsObject&&it(t)?V:t.constructor;if(g!=v&&!(_t(g)&&g instanceof g&&_t(v)&&v instanceof v))return!1}var m=!i;i||(i=te()),s||(s=te());for(var y=i.length;y--;)if(i[y]==e)return s[y]==t;var _=0;if(l=!0,i.push(e),s.push(t),p){if(y=e.length,_=t.length,!(l=_==e.length)&&!o)return l;for(;_--;){var b=y,A=t[_];if(o)for(;b--&&!(l=yt(e[b],A,n,r,i,s)););else if(!(l=yt(e[_],A,n,r,i,s)))break}return l}return pt(t,function(t,a,o){if(Ee.call(o,a))return _++,l=Ee.call(e,a)&&yt(e[a],t,n,r,i,s)}),l&&!o&&pt(e,function(e,t,n){if(Ee.call(n,t))return l=--_>-1}),m&&(ae(i),ae(s)),l}function _t(e){return"function"==typeof e}function bt(e){return!(!e||!G[void 0===e?"undefined":a(e)])}function At(e){return"number"==typeof e||xe.call(e)==U}_t(/x/)&&(_t=function(e){return"function"==typeof e&&xe.call(e)==F});var Et=Ae?function(e){if(!e||xe.call(e)!=B||!Ke.argsClass&&it(e))return!1;var t=e.valueOf,n="function"==typeof t&&(n=Ae(t))&&Ae(n);return n?e==n||Ae(e)==n:nt(e)}:nt;function wt(e){return"string"==typeof e||xe.call(e)==q}function St(e){for(var n=-1,r=ot(e),i=r.length,a=t(i);++n<i;)a[n]=e[r[n]];return a}function Tt(e,t,n){var r=-1,i=et(),a=e?e.length:0,s=!1;return n=(n<0?Oe(0,a+n):n)||0,a&&"number"==typeof a?s=(wt(e)?e.indexOf(t,n):i(e,t,n))>-1:lt(e,function(e){if(++r>=n)return!(s=e===t)}),s}function kt(e,t,n){var r=!0;if(t=Ge.createCallback(t,n),at(e))for(var i=-1,a=e.length;++i<a&&(r=!!t(e[i],i,e)););else lt(e,function(e,n,i){return r=!!t(e,n,i)});return r}function xt(e,t,n){var r=[];if(t=Ge.createCallback(t,n),at(e))for(var i=-1,a=e.length;++i<a;){var s=e[i];t(s,i,e)&&r.push(s)}else lt(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function Dt(e,t,n){var r;if(t=Ge.createCallback(t,n),!at(e))return lt(e,function(e,n,i){if(t(e,n,i))return r=e,!1}),r;for(var i=-1,a=e.length;++i<a;){var s=e[i];if(t(s,i,e))return s}}function Ct(e,t,n){if(t&&void 0===n&&at(e))for(var r=-1,i=e.length;++r<i&&!1!==t(e[r],r,e););else lt(e,t,n);return e}function Rt(e,n,r){var i=-1,a=e?e.length:0,s=t("number"==typeof a?a:0);if(n=Ge.createCallback(n,r),at(e))for(;++i<a;)s[i]=n(e[i],i,e);else lt(e,function(e,t,r){s[++i]=n(e,t,r)});return s}function Lt(e,t,n){var r=-1/0,i=r;if(!t&&at(e))for(var a=-1,s=e.length;++a<s;){var o=e[a];o>i&&(i=o)}else t=!t&&wt(e)?Q:Ge.createCallback(t,n),lt(e,function(e,n,a){var s=t(e,n,a);s>r&&(r=s,i=e)});return i}var Pt=Rt;function It(e,t,n,r){var i=arguments.length<3;if(t=Ge.createCallback(t,r,4),at(e)){var a=-1,s=e.length;for(i&&(n=e[++a]);++a<s;)n=t(n,e[a],a,e)}else lt(e,function(e,r,a){n=i?(i=!1,e):t(n,e,r,a)});return n}function Ot(e,t,n,r){var i=e,a=e?e.length:0,s=arguments.length<3;if("number"!=typeof a){var o=ot(e);a=o.length}else Ke.unindexedChars&&wt(e)&&(i=e.split(""));return t=Ge.createCallback(t,r,4),Ct(e,function(e,r,l){r=o?o[--a]:--a,n=s?(s=!1,i[r]):t(n,i[r],r,l)}),n}function Nt(e,t,n){var r;if(t=Ge.createCallback(t,n),at(e))for(var i=-1,a=e.length;++i<a&&!(r=t(e[i],i,e)););else lt(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}var Mt=xt;function Ft(e){var t=-1,n=et(),r=e?e.length:0,i=ye.apply(ce,Ue.call(arguments,1)),a=[],s=r>=f&&n===z;if(s){var o=Z(i);o?(n=Y,i=o):s=!1}for(;++t<r;){var l=e[t];n(i,l)<0&&a.push(l)}return s&&se(i),a}function Ut(e,t,n){if(e){var r=0,i=e.length;if("number"!=typeof t&&null!=t){var a=-1;for(t=Ge.createCallback(t,n);++a<i&&t(e[a],a,e);)r++}else if(null==(r=t)||n)return e[0];return oe(e,0,Ne(Oe(0,r),i))}}var Bt=tt(function e(t,n,r){for(var i=-1,a=t?t.length:0,s=[];++i<a;){var o=t[i];r&&(o=r(o,i,t)),at(o)?we.apply(s,n?o:e(o)):s.push(o)}return s});function jt(e,t,n){if("number"==typeof n){var r=e?e.length:0;n=n<0?Oe(0,r+n):n||0}else if(n){var i=Ht(e,t);return e[i]===t?i:-1}return e?z(e,t,n):-1}function qt(e,t,n){if("number"!=typeof t&&null!=t){var r=0,i=-1,a=e?e.length:0;for(t=Ge.createCallback(t,n);++i<a&&t(e[i],i,e);)r++}else r=null==t||n?1:Oe(0,t);return oe(e,r)}function Ht(e,t,n,r){var i=0,a=e?e.length:i;for(t=(n=n?Ge.createCallback(n,r,1):Yt)(t);i<a;){var s=i+a>>>1;n(e[s])<t?i=s+1:a=s}return i}var Gt=tt(function(e,t,n){var r=-1,i=et(),a=e?e.length:0,s=[],o=!t&&a>=f&&i===z,l=n||o?te():s;if(o){var u=Z(l);u?(i=Y,l=u):(o=!1,l=n?l:(ae(l),s))}for(;++r<a;){var c=e[r],d=n?n(c,r,e):c;(t?!r||l[l.length-1]!==d:i(l,d)<0)&&((n||o)&&l.push(d),s.push(c))}return o?(ae(l.array),se(l)):n&&ae(l),s});function Vt(e){for(var n=-1,r=e?Lt(Pt(e,"length")):0,i=t(r<0?0:r);++n<r;)i[n]=Pt(e,n);return i}function Kt(e,t){for(var n=-1,r=e?e.length:0,i={};++n<r;){var a=e[n];t?i[a]=t[n]:i[a[0]]=a[1]}return i}function Wt(e,t){return Ke.fastBind||De&&arguments.length>2?De.call.apply(De,arguments):Xe(e,t,Ue.call(arguments,2))}function $t(e,t,n){var i,a,s,o=0,l=0,u=!1,c=null,d=null,h=!0;function f(){me(c),me(d),o=0,c=d=null}function p(){var t=h&&(!v||o>1);f(),t&&(!1!==u&&(l=new r),a=e.apply(s,i))}function g(){f(),(h||u!==t)&&(l=new r,a=e.apply(s,i))}if(t=Oe(0,t||0),!0===n){var v=!0;h=!1}else bt(n)&&(v=n.leading,u="maxWait"in n&&Oe(t,n.maxWait||0),h="trailing"in n?n.trailing:h);return function(){if(i=arguments,s=this,o++,me(d),!1===u)v&&o<2&&(a=e.apply(s,i));else{var n=new r;c||v||(l=n);var h=u-(n-l);h<=0?(me(c),c=null,l=n,a=e.apply(s,i)):c||(c=ke(g,h))}return t!==u&&(d=ke(p,t)),a}}function zt(e){var t=Ue.call(arguments,1);return ke(function(){e.apply(o,t)},1)}function Yt(e){return e}function Xt(e){Ct(vt(e),function(t){var n=Ge[t]=e[t];Ge.prototype[t]=function(){var e=this.__wrapped__,t=[e];we.apply(t,arguments);var r=n.apply(Ge,t);return e&&"object"==(void 0===e?"undefined":a(e))&&e===r?this:new Ve(r)}})}je&&W&&"function"==typeof Te&&(zt=Wt(Te,e));var Qt=8==Me(w+"08")?Me:function(e,t){return Me(wt(e)?e.replace(S,""):e,t||0)};function Jt(){return this.__wrapped__}return Ge.after=function(e,t){return e<1?t():function(){if(--e<1)return t.apply(this,arguments)}},Ge.assign=dt,Ge.at=function(e){var n=-1,r=ye.apply(ce,Ue.call(arguments,1)),i=r.length,a=t(i);for(Ke.unindexedChars&&wt(e)&&(e=e.split(""));++n<i;)a[n]=e[r[n]];return a},Ge.bind=Wt,Ge.bindAll=function(e){for(var t=arguments.length>1?ye.apply(ce,Ue.call(arguments,1)):vt(e),n=-1,r=t.length;++n<r;){var i=t[n];e[i]=Wt(e[i],e)}return e},Ge.bindKey=function(e,t){return Xe(e,t,Ue.call(arguments,2),d)},Ge.compact=function(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i)}return r},Ge.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}},Ge.countBy=function(e,t,n){var r={};return t=Ge.createCallback(t,n),Ct(e,function(e,n,i){n=$(t(e,n,i)),Ee.call(r,n)?r[n]++:r[n]=1}),r},Ge.createCallback=function(e,t,n){if(null==e)return Yt;var r=void 0===e?"undefined":a(e);if("function"!=r){if("object"!=r)return function(t){return t[e]};var i=ot(e);return function(t){for(var n=i.length,r=!1;n--&&(r=yt(t[i[n]],e[i[n]],d)););return r}}return void 0===t||E&&!E.test(be.call(e))?e:1===n?function(n){return e.call(t,n)}:2===n?function(n,r){return e.call(t,n,r)}:4===n?function(n,r,i,a){return e.call(t,n,r,i,a)}:function(n,r,i){return e.call(t,n,r,i)}},Ge.debounce=$t,Ge.defaults=ft,Ge.defer=zt,Ge.delay=function(e,t){var n=Ue.call(arguments,2);return ke(function(){e.apply(o,n)},t)},Ge.difference=Ft,Ge.filter=xt,Ge.flatten=Bt,Ge.forEach=Ct,Ge.forIn=pt,Ge.forOwn=gt,Ge.functions=vt,Ge.groupBy=function(e,t,n){var r={};return t=Ge.createCallback(t,n),Ct(e,function(e,n,i){n=$(t(e,n,i)),(Ee.call(r,n)?r[n]:r[n]=[]).push(e)}),r},Ge.initial=function(e,t,n){if(!e)return[];var r=0,i=e.length;if("number"!=typeof t&&null!=t){var a=i;for(t=Ge.createCallback(t,n);a--&&t(e[a],a,e);)r++}else r=null==t||n?1:t||r;return oe(e,0,Ne(Oe(0,i-r),i))},Ge.intersection=function(e){for(var t=arguments,n=t.length,r=-1,i=te(),a=-1,s=et(),o=e?e.length:0,l=[],u=te();++r<n;){var c=t[r];i[r]=s===z&&(c?c.length:0)>=f&&Z(r?t[r]:u)}e:for(;++a<o;){var d=i[0];if(c=e[a],(d?Y(d,c):s(u,c))<0){for(r=n,(d||u).push(c);--r;)if(((d=i[r])?Y(d,c):s(t[r],c))<0)continue e;l.push(c)}}for(;n--;)(d=i[n])&&se(d);return ae(i),ae(u),l},Ge.invert=mt,Ge.invoke=function(e,n){var r=Ue.call(arguments,2),i=-1,a="function"==typeof n,s=e?e.length:0,o=t("number"==typeof s?s:0);return Ct(e,function(e){o[++i]=(a?n:e[n]).apply(e,r)}),o},Ge.keys=ot,Ge.map=Rt,Ge.max=Lt,Ge.memoize=function(e,t){function n(){var r=n.cache,i=h+(t?t.apply(this,arguments):arguments[0]);return Ee.call(r,i)?r[i]:r[i]=e.apply(this,arguments)}return n.cache={},n},Ge.merge=function e(t,n,r){var i=arguments,a=0,s=2;if(!bt(t))return t;if(r===d)var o=i[3],l=i[4],u=i[5];else{var c=!0;l=te(),u=te(),"number"!=typeof r&&(s=i.length),s>3&&"function"==typeof i[s-2]?o=Ge.createCallback(i[--s-1],i[s--],2):s>2&&"function"==typeof i[s-1]&&(o=i[--s])}for(;++a<s;)(at(i[a])?Ct:gt)(i[a],function(n,r){var i,a,s=n,c=t[r];if(n&&((a=at(n))||Et(n))){for(var h,f=l.length;f--;)if(i=l[f]==n){c=u[f];break}i||(o&&(h=void 0!==(s=o(c,n)))&&(c=s),h||(c=a?at(c)?c:[]:Et(c)?c:{}),l.push(n),u.push(c),h||(c=e(c,n,d,o,l,u)))}else o&&void 0===(s=o(c,n))&&(s=n),void 0!==s&&(c=s);t[r]=c});return c&&(ae(l),ae(u)),t},Ge.min=function(e,t,n){var r=1/0,i=r;if(!t&&at(e))for(var a=-1,s=e.length;++a<s;){var o=e[a];o<i&&(i=o)}else t=!t&&wt(e)?Q:Ge.createCallback(t,n),lt(e,function(e,n,a){var s=t(e,n,a);s<r&&(r=s,i=e)});return i},Ge.omit=function(e,t,n){var r=et(),i="function"==typeof t,a={};if(i)t=Ge.createCallback(t,n);else var s=ye.apply(ce,Ue.call(arguments,1));return pt(e,function(e,n,o){(i?!t(e,n,o):r(s,n)<0)&&(a[n]=e)}),a},Ge.once=function(e){var t,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},Ge.pairs=function(e){for(var n=-1,r=ot(e),i=r.length,a=t(i);++n<i;){var s=r[n];a[n]=[s,e[s]]}return a},Ge.partial=function(e){return Xe(e,Ue.call(arguments,1))},Ge.partialRight=function(e){return Xe(e,Ue.call(arguments,1),null,d)},Ge.pick=function(e,t,n){var r={};if("function"!=typeof t)for(var i=-1,a=ye.apply(ce,Ue.call(arguments,1)),s=bt(e)?a.length:0;++i<s;){var o=a[i];o in e&&(r[o]=e[o])}else t=Ge.createCallback(t,n),pt(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r},Ge.pluck=Pt,Ge.range=function(e,n,r){e=+e||0,r=+r||1,null==n&&(n=e,e=0);for(var i=-1,a=Oe(0,ve((n-e)/r)),s=t(a);++i<a;)s[i]=e,e+=r;return s},Ge.reject=function(e,t,n){return t=Ge.createCallback(t,n),xt(e,function(e,n,r){return!t(e,n,r)})},Ge.rest=qt,Ge.shuffle=function(e){var n=-1,r=e?e.length:0,i=t("number"==typeof r?r:0);return Ct(e,function(e){var t=_e(Fe()*(++n+1));i[n]=i[t],i[t]=e}),i},Ge.sortBy=function(e,n,r){var i=-1,a=e?e.length:0,s=t("number"==typeof a?a:0);for(n=Ge.createCallback(n,r),Ct(e,function(e,t,r){var a=s[++i]=ne();a.criteria=n(e,t,r),a.index=i,a.value=e}),a=s.length,s.sort(J);a--;){var o=s[a];s[a]=o.value,se(o)}return s},Ge.tap=function(e,t){return t(e),e},Ge.throttle=function(e,t,n){var r=!0,i=!0;!1===n?r=!1:bt(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),(n=ne()).leading=r,n.maxWait=t,n.trailing=i;var a=$t(e,t,n);return se(n),a},Ge.times=function(e,n,r){e=(e=+e)>-1?e:0;var i=-1,a=t(e);for(n=Ge.createCallback(n,r,1);++i<e;)a[i]=n(i);return a},Ge.toArray=function(e){return e&&"number"==typeof e.length?Ke.unindexedChars&&wt(e)?e.split(""):oe(e):St(e)},Ge.transform=function(e,t,n,r){var i=at(e);if(t=Ge.createCallback(t,r,4),null==n)if(i)n=[];else{var a=e&&e.constructor,s=a&&a.prototype;n=Je(s)}return(i?lt:gt)(e,function(e,r,i){return t(n,e,r,i)}),n},Ge.union=function(e){return at(e)||(arguments[0]=e?Ue.call(e):ce),Gt(ye.apply(ce,arguments))},Ge.uniq=Gt,Ge.unzip=Vt,Ge.values=St,Ge.where=Mt,Ge.without=function(e){return Ft(e,Ue.call(arguments,1))},Ge.wrap=function(e,t){return function(){var n=[e];return we.apply(n,arguments),t.apply(this,n)}},Ge.zip=function(e){return e?Vt(arguments):[]},Ge.zipObject=Kt,Ge.collect=Rt,Ge.drop=qt,Ge.each=Ct,Ge.extend=dt,Ge.methods=vt,Ge.object=Kt,Ge.select=xt,Ge.tail=qt,Ge.unique=Gt,Xt(Ge),Ge.chain=Ge,Ge.prototype.chain=function(){return this},Ge.clone=ht,Ge.cloneDeep=function(e,t,n){return ht(e,!0,t,n)},Ge.contains=Tt,Ge.escape=function(e){return null==e?"":$(e).replace(x,Ze)},Ge.every=kt,Ge.find=Dt,Ge.findIndex=function(e,t,n){var r=-1,i=e?e.length:0;for(t=Ge.createCallback(t,n);++r<i;)if(t(e[r],r,e))return r;return-1},Ge.findKey=function(e,t,n){var r;return t=Ge.createCallback(t,n),gt(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r},Ge.has=function(e,t){return!!e&&Ee.call(e,t)},Ge.identity=Yt,Ge.indexOf=jt,Ge.isArguments=it,Ge.isArray=at,Ge.isBoolean=function(e){return!0===e||!1===e||xe.call(e)==O},Ge.isDate=function(e){return!!e&&"object"==(void 0===e?"undefined":a(e))&&xe.call(e)==N},Ge.isElement=function(e){return!!e&&1===e.nodeType},Ge.isEmpty=function(e){var t=!0;if(!e)return t;var n=xe.call(e),r=e.length;return n==I||n==q||(Ke.argsClass?n==P:it(e))||n==B&&"number"==typeof r&&_t(e.splice)?!r:(gt(e,function(){return t=!1}),t)},Ge.isEqual=yt,Ge.isFinite=function(e){return Le(e)&&!Pe(parseFloat(e))},Ge.isFunction=_t,Ge.isNaN=function(e){return At(e)&&e!=+e},Ge.isNull=function(e){return null===e},Ge.isNumber=At,Ge.isObject=bt,Ge.isPlainObject=Et,Ge.isRegExp=function(e){return!(!e||!G[void 0===e?"undefined":a(e)])&&xe.call(e)==j},Ge.isString=wt,Ge.isUndefined=function(e){return void 0===e},Ge.lastIndexOf=function(e,t,n){var r=e?e.length:0;for("number"==typeof n&&(r=(n<0?Oe(0,r+n):Ne(n,r-1))+1);r--;)if(e[r]===t)return r;return-1},Ge.mixin=Xt,Ge.noConflict=function(){return e._=pe,this},Ge.parseInt=Qt,Ge.random=function(e,t){null==e&&null==t&&(t=1),e=+e||0,null==t?(t=e,e=0):t=+t||0;var n=Fe();return e%1||t%1?e+Ne(n*(t-e+parseFloat("1e-"+((n+"").length-1))),t):e+_e(n*(t-e+1))},Ge.reduce=It,Ge.reduceRight=Ot,Ge.result=function(e,t){var n=e?e[t]:o;return _t(n)?e[t]():n},Ge.runInContext=le,Ge.size=function(e){var t=e?e.length:0;return"number"==typeof t?t:ot(e).length},Ge.some=Nt,Ge.sortedIndex=Ht,Ge.template=function(e,t,n){var r=Ge.templateSettings;e||(e=""),n=ft({},n,r);var i,a=ft({},n.imports,r.imports),s=ot(a),u=St(a),c=0,d=n.interpolate||T,h="__p += '",f=K((n.escape||T).source+"|"+d.source+"|"+(d===A?_:T).source+"|"+(n.evaluate||T).source+"|$","g");e.replace(f,function(t,n,r,a,s,o){return r||(r=a),h+=e.slice(c,o).replace(D,ee),n&&(h+="' +\n__e("+n+") +\n'"),s&&(i=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=o+t.length,t}),h+="';\n";var p=n.variable,y=p;y||(h="with ("+(p="obj")+") {\n"+h+"\n}\n"),h=(i?h.replace(g,""):h).replace(v,"$1").replace(m,"$1;"),h="function("+p+") {\n"+(y?"":p+" || ("+p+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var b="\n/*\n//@ sourceURL="+(n.sourceURL||"/lodash/template/source["+L+++"]")+"\n*/";try{var E=l(s,"return "+h+b).apply(o,u)}catch(e){throw e.source=h,e}return t?E(t):(E.source=h,E)},Ge.unescape=function(e){return null==e?"":$(e).replace(y,rt)},Ge.uniqueId=function(e){var t=++c;return $(null==e?"":e)+t},Ge.all=kt,Ge.any=Nt,Ge.detect=Dt,Ge.findWhere=Dt,Ge.foldl=It,Ge.foldr=Ot,Ge.include=Tt,Ge.inject=It,gt(Ge,function(e,t){Ge.prototype[t]||(Ge.prototype[t]=function(){var t=[this.__wrapped__];return we.apply(t,arguments),e.apply(Ge,t)})}),Ge.first=Ut,Ge.last=function(e,t,n){if(e){var r=0,i=e.length;if("number"!=typeof t&&null!=t){var a=i;for(t=Ge.createCallback(t,n);a--&&t(e[a],a,e);)r++}else if(null==(r=t)||n)return e[i-1];return oe(e,Oe(0,i-r))}},Ge.take=Ut,Ge.head=Ut,gt(Ge,function(e,t){Ge.prototype[t]||(Ge.prototype[t]=function(t,n){var r=e(this.__wrapped__,t,n);return null==t||n&&"function"!=typeof t?r:new Ve(r)})}),Ge.VERSION="1.3.1",Ge.prototype.toString=function(){return $(this.__wrapped__)},Ge.prototype.value=Jt,Ge.prototype.valueOf=Jt,lt(["join","pop","shift"],function(e){var t=ce[e];Ge.prototype[e]=function(){return t.apply(this.__wrapped__,arguments)}}),lt(["push","reverse","sort","unshift"],function(e){var t=ce[e];Ge.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),lt(["concat","slice","splice"],function(e){var t=ce[e];Ge.prototype[e]=function(){return new Ve(t.apply(this.__wrapped__,arguments))}}),Ke.spliceObjects||lt(["pop","shift","splice"],function(e){var t=ce[e],n="splice"==e;Ge.prototype[e]=function(){var e=this.__wrapped__,r=t.apply(e,arguments);return 0===e.length&&delete e[0],n?new Ve(r):r}}),Ge}!$||$.global!==$&&$.window!==$||(s=$);var ue=le();"object"==a(n("K2jg"))&&n("K2jg")?(s._=ue,(i=function(){return ue}.call(t,n,t,e))===o||(e.exports=i)):K&&!K.nodeType?W?(W.exports=ue)._=ue:K._=ue:s._=ue}(void 0)}.apply(t,[e,t]))||(e.exports=i)}).call(this,n("RoC8")(e),n("pCvA"))},"6+Qq":function(e,t,n){"use strict";(function(n){t.__esModule=!0,t.default=function(e){var t=void 0!==n?n:window,r=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=r),e}},e.exports=t.default}).call(this,n("pCvA"))},"7UkH":function(e,t,n){"use strict";t.__esModule=!0;var r=n("82EY");t.default=function(e){e.registerHelper("if",function(e,t){return r.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t.default},"82EY":function(e,t,n){"use strict";t.__esModule=!0,t.extend=o,t.indexOf=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!a.test(e))return e;return e.replace(i,s)},t.isEmpty=function(e){return!e&&0!==e||!(!c(e)||0!==e.length)},t.createFrame=function(e){var t=o({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},i=/[&<>"'`=]/g,a=/[&<>"'`=]/;function s(e){return r[e]}function o(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var l=Object.prototype.toString;t.toString=l;var u=function(e){return"function"==typeof e};u(/x/)&&(t.isFunction=u=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)}),t.isFunction=u;var c=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===l.call(e)};t.isArray=c},"9Icy":function(e,t,n){(function(t){e.exports=t.$=n("KLVm")}).call(this,n("pCvA"))},"9n26":function(e,t,n){"use strict";var r;void 0===(r=function(){return function(e,t){return function(n,r){this.toggleClass(e,t,!r)}}}.call(t,n,t,e))||(e.exports=r)},AIJh:function(e,t,n){"use strict";t.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];function i(e,t){var n=t&&t.loc,a=void 0,s=void 0;n&&(e+=" - "+(a=n.start.line)+":"+(s=n.start.column));for(var o=Error.prototype.constructor.call(this,e),l=0;l<r.length;l++)this[r[l]]=o[r[l]];Error.captureStackTrace&&Error.captureStackTrace(this,i);try{n&&(this.lineNumber=a,Object.defineProperty?Object.defineProperty(this,"column",{value:s,enumerable:!0}):this.column=s)}catch(e){}}i.prototype=new Error,t.default=i,e.exports=t.default},AQSU:function(e,t,n){var r,i;r=[n("O074"),n("ikLi")],void 0===(i=function(e,t){return function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"@VERSION",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=1===t.which,a=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(i&&!a&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(e),e}.apply(t,r))||(e.exports=i)},BaCQ:function(e,t,n){"use strict";var r,i;r=[n("+w1B")],void 0===(i=function(e){var t=e.Utils.escapeExpression;return function(e,n,r){return e=t(e),n=t(n),'<i class="icon icon_'+e+" "+((r=t(r))||"")+'">'+(n?"<span class=screen-reader-text>"+n+"</span>":"")+"</i>"}}.apply(t,r))||(e.exports=i)},BjwM:function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=18)}([function(e,t,n){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(t,n(6))},function(e,t){function n(e,t){var n=E(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&o(e)}(e)&&v.call(e,"callee")&&(!y.call(e,"callee")||m.call(e)==d)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,a=!!r;for(var s in e)!t&&!v.call(e,s)||a&&("length"==s||i(s,r))||n.push(s);return n}function r(e,t,n){var r=e[t];v.call(e,t)&&s(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function i(e,t){return!!(t=null==t?c:t)&&("number"==typeof e||p.test(e))&&e>-1&&e%1==0&&e<t}function a(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||g)}function s(e,t){return e===t||e!=e&&t!=t}function o(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}(e.length)&&!function(e){var t=l(e)?m.call(e):"";return t==h||t==f}(e)}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){return o(e)?n(e):function(e){if(!a(e))return _(e);var t=[];for(var n in Object(e))v.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}var c=9007199254740991,d="[object Arguments]",h="[object Function]",f="[object GeneratorFunction]",p=/^(?:0|[1-9]\d*)$/,g=Object.prototype,v=g.hasOwnProperty,m=g.toString,y=g.propertyIsEnumerable,_=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),b=Math.max,A=!y.call({valueOf:1},"valueOf"),E=Array.isArray,w=function(e){return function(e,t){return t=b(void 0===t?e.length-1:t,0),function(){for(var n=arguments,r=-1,i=b(n.length-t,0),a=Array(i);++r<i;)a[r]=n[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=n[r];return s[t]=a,function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}(function(t,n){var r=-1,a=n.length,u=a>1?n[a-1]:void 0,c=a>2?n[2]:void 0;for(u=e.length>3&&"function"==typeof u?(a--,u):void 0,c&&function(e,t,n){if(!l(n))return!1;var r=typeof t;return!!("number"==r?o(n)&&i(t,n.length):"string"==r&&t in n)&&s(n[t],e)}(n[0],n[1],c)&&(u=a<3?void 0:u,a=1),t=Object(t);++r<a;){var d=n[r];d&&e(t,d)}return t})}(function(e,t){if(A||a(t)||o(t))!function(e,t,n,i){n||(n={});for(var a=-1,s=t.length;++a<s;){var o=t[a],l=i?i(n[o],e[o],o,n,e):void 0;r(n,o,void 0===l?e[o]:l)}}(t,u(t),e);else for(var n in t)v.call(t,n)&&r(e,n,t[n])});e.exports=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){n=void 0===n?1:n,e[t]=e[t]||0,e[t]+=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a={now:function(){var e=i.default.performance,t=e&&e.timing;return t&&"number"==typeof t.navigationStart&&"function"==typeof e.now?t.navigationStart+e.now():Date.now()}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=i.default.methodFactory;i.default.methodFactory=function(e,t,n){var r=a(e,t,n);return function(){for(var e=["[mux]"],t=0;t<arguments.length;t++)e.push(arguments[t]);r.apply(void 0,e)}},i.default.setLevel(i.default.getLevel()),t.default=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if("string"!=typeof e||""===e)return["localhost"];var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[],n=t[4],r=void 0;return n&&(r=(n.match(/[^\.]+\.[^\.]+$/)||[])[0]),[n,r]};t.extractHostnameAndDomain=r,t.extractHostname=function(e){return r(e)[0]},t.extractDomain=function(e){return r(e)[1]}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},t.generateShortID=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=(e=e||"").match(/[^\r\n]+/g)||[];for(var t={},n=0;n<e.length;n++){var r=e[n].split(/\s*:\s*(.+)/);3===r.length&&(t[r[0]]=r[1])}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findMediaElement=t.getMuxPlayerId=void 0;var r=n(7),i=function(e){return e&&void 0!==e.nodeName?(e.muxId||(e.muxId=e.id||(0,r.generateShortID)()),e.muxId):e};t.getMuxPlayerId=i,t.findMediaElement=function(e){var t=void 0;return e&&void 0!==e.nodeName?e=i(t=e):t=document.querySelector(e),[t,e,t&&t.nodeName?t.nodeName.toLowerCase():""]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return"1"===(i.default.doNotTrack||i.default.navigator&&(i.default.navigator.doNotTrack||i.default.navigator.msDoNotTrack))};var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a={exists:function(){var e=i.default.performance;return void 0!==(e&&e.timing)},domContentLoadedEventEnd:function(){var e=i.default.performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},navigationStart:function(){var e=i.default.performance,t=e&&e.timing;return t&&t.navigationStart}};t.default=a},function(e,t,n){(function(t){var r,i=void 0!==t?t:"undefined"!=typeof window?window:{},a=n(23);"undefined"!=typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=r}).call(t,n(6))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r=n(42),i=n(43),a=n(16);e.exports={formats:a,parse:i,stringify:r}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},t.merge=function(e,n,i){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];(i.plainObjects||i.allowPrototypes||!r.call(Object.prototype,n))&&(e[n]=!0)}return e}if("object"!=typeof e)return[e].concat(n);var a=e;return Array.isArray(e)&&!Array.isArray(n)&&(a=t.arrayToObject(e,i)),Array.isArray(e)&&Array.isArray(n)?(n.forEach(function(n,a){r.call(e,a)?e[a]&&"object"==typeof e[a]?e[a]=t.merge(e[a],n,i):e.push(n):e[a]=n}),e):Object.keys(n).reduce(function(e,a){var s=n[a];return r.call(e,a)?e[a]=t.merge(e[a],s,i):e[a]=s,e},a)},t.assign=function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",r=0;r<t.length;++r){var a=t.charCodeAt(r);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?n+=t.charAt(r):a<128?n+=i[a]:a<2048?n+=i[192|a>>6]+i[128|63&a]:a<55296||a>=57344?n+=i[224|a>>12]+i[128|a>>6&63]+i[128|63&a]:(r+=1,a=65536+((1023&a)<<10|1023&t.charCodeAt(r)),n+=i[240|a>>18]+i[128|a>>12&63]+i[128|a>>6&63]+i[128|63&a])}return n},t.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],a=i.obj[i.prop],s=Object.keys(a),o=0;o<s.length;++o){var l=s[o],u=a[l];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:a,prop:l}),n.push(u))}return function(e){for(var t;e.length;){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var r=[],i=0;i<t.length;++i)void 0!==t[i]&&r.push(t[i]);n.obj[n.prop]=r}}return t}(t)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,n){"use strict";var r=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,i,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={},n={};return Object.keys(e).forEach(function(r){var i=!1;if(e.hasOwnProperty(r)&&void 0!==e[r]){var a=r.split("_"),o=a[0],l=u[o];l||(s.default.info("Data key word `"+a[0]+"` not expected in "+r),l=o+"_"),a.splice(1).forEach(function(e){"url"===e&&(i=!0),c[e]?l+=c[e]:(s.default.info("Data key word `"+e+"` not expected in "+r),l+="_"+e+"_")}),i?n[l]=e[r]:t[l]=e[r]}}),(0,l.default)(t,n)};var a=n(4),s=r(a),o=n(1),l=r(o),u=i({a:"env",b:"beacon",d:"ad",e:"event",f:"experiment",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),c=i({ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",ca:"cached",cb:"cancel",cd:"code",cg:"category",ch:"changed",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",du:"duration",dv:"device",ec:"encoding",en:"end",eg:"engine",em:"embed",er:"error",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",fi:"first",fm:"family",ft:"format",fq:"frequency",fr:"frame",fs:"fullscreen",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mx:"mux",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",po:"poster",pr:"preload",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",ta:"tag",tc:"tech",te:"text",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"})},function(e,t,n){"use strict";e.exports=n(19).default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),s=r(a),o=n(9),l=n(4),u=r(l),c=n(10),d=r(c),h=n(3),f=r(h),p=n(21),g=r(p),v=n(50),m=r(v),y=n(51),_=r(y),b={},A=function e(t){var n=arguments;"string"==typeof t?e.hasOwnProperty(t)?s.default.setTimeout(function(){n=Array.prototype.splice.call(n,1),e[t].apply(null,n)},0):u.default.warn("`"+t+"` is an unknown task"):"function"==typeof t?s.default.setTimeout(function(){t(e)},0):u.default.warn("`"+t+"` is invalid.")};A.loaded=f.default.now(),A.VERSION="3.2.0",A.API_VERSION="2.1",A.PLAYER_TRACKED=!1,A.monitor=function(e,t){return(0,m.default)(A,e,t)},A.destroyMonitor=function(e){var t=(0,o.findMediaElement)(e),n=i(t,1),r=n[0];r&&r.mux&&"function"==typeof r.mux.destroy?r.mux.destroy():u.default.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},A.addHLSJS=function(e,t){var n=(0,o.getMuxPlayerId)(e);b[n]?b[n].addHLSJS(t):u.default.error("A monitor for `"+n+"` has not been initialized.")},A.addDashJS=function(e,t){var n=(0,o.getMuxPlayerId)(e);b[n]?b[n].addDashJS(t):u.default.error("A monitor for `"+n+"` has not been initialized.")},A.removeHLSJS=function(e){var t=(0,o.getMuxPlayerId)(e);b[t]?b[t].removeHLSJS():u.default.error("A monitor for `"+t+"` has not been initialized.")},A.removeDashJS=function(e,t){var n=(0,o.getMuxPlayerId)(e);b[n]?b[n].removeDashJS(t):u.default.error("A monitor for `"+n+"` has not been initialized.")},A.init=function(e,t){(0,d.default)()&&t&&t.respectDoNotTrack&&u.default.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var n=(0,o.getMuxPlayerId)(e);b[n]=new g.default(A,n,t)},A.emit=function(e,t,n){var r=(0,o.getMuxPlayerId)(e);b[r]?(b[r].emit(t,n),"destroy"===t&&delete b[r]):u.default.error("A monitor for `"+r+"` has not been initialized.")},void 0!==s.default&&"function"==typeof s.default.addEventListener&&s.default.addEventListener("unload",function(){A.WINDOW_UNLOADING=!0},!1),A.checkDoNotTrack=d.default,A.log=u.default,A.utils=_.default,t.default=A},function(e,t,n){var r,i;!function(a,s){"use strict";void 0!==(i="function"==typeof(r=function(){function e(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function t(t){return"debug"===t&&(t="log"),typeof console!==o&&(void 0!==console[t]?e(console,t):void 0!==console.log?e(console,"log"):s)}function n(e,t){for(var n=0;n<l.length;n++){var r=l[n];this[r]=n<e?s:this.methodFactory(r,e,t)}this.log=this.debug}function r(e,t,r){return function(){typeof console!==o&&(n.call(this,t,r),this[e].apply(this,arguments))}}function i(e,n,i){return t(e)||r.apply(this,arguments)}function a(e,t,r){function a(){var e;if(typeof window!==o){try{e=window.localStorage[c]}catch(e){}if(typeof e===o)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(c)+"=");n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}}var s,u=this,c="loglevel";e&&(c+=":"+e),u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=r||i,u.getLevel=function(){return s},u.setLevel=function(t,r){if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=u.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(s=t,!1!==r&&function(e){var t=(l[e]||"silent").toUpperCase();if(typeof window!==o){try{return void(window.localStorage[c]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+t+";"}catch(e){}}}(t),n.call(u,t,e),typeof console===o&&t<u.levels.SILENT)return"No console available for logging"},u.setDefaultLevel=function(e){a()||u.setLevel(e,!1)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)};var d=a();null==d&&(d=null==t?"WARN":t),u.setLevel(d,!1)}var s=function(){},o="undefined",l=["trace","debug","info","warn","error"],u=new a,c={};u.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=c[e];return t||(t=c[e]=new a(e,u.getLevel(),u.methodFactory)),t};var d=typeof window!==o?window.log:void 0;return u.noConflict=function(){return typeof window!==o&&window.log===u&&(window.log=d),u},u})?r.call(t,n,t,e):r)&&(e.exports=i)}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(4),s=r(a),o=n(1),l=r(o),u=n(7),c=n(5),d=n(0),h=r(d),f=n(11),p=r(f),g=n(2),v=r(g),m=n(22),y=r(m),_=n(25),b=n(26),A=n(27),E=r(A),w=n(28),S=r(w),T=n(29),k=r(T),x=n(30),D=r(x),C=n(31),R=r(C),L=n(32),P=r(L),I=n(33),O=r(I),N=n(34),M=r(N),F=n(35),U=r(F),B=n(36),j=r(B),q=n(37),H=r(q),G=n(38),V=r(G),K=n(39),W=r(K),$=n(40),z=r($),Y=n(49),X=r(Y),Q=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],J=function(e,t,n){var r=this;this.DOM_CONTENT_LOADED_EVENT_END=p.default.domContentLoadedEventEnd(),this.NAVIGATION_START=p.default.navigationStart(),this.mux=e,this.id=t,(n=(0,l.default)({debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,errorTranslator:function(e){return e}},n)).data=n.data||{},n.data.property_key&&(n.data.env_key=n.data.property_key,delete n.data.property_key),s.default.setLevel(n.debug?"debug":"warn"),this.getPlayheadTime=n.getPlayheadTime,this.getStateData=n.getStateData||function(){},this.getAdData=n.getAdData||function(){},this.minimumRebufferDuration=n.minimumRebufferDuration,this.sustainedRebufferThreshold=n.sustainedRebufferThreshold,this.playbackHeartbeatTime=n.playbackHeartbeatTime,this.errorTranslator=n.errorTranslator,this.playbackEventDispatcher=new z.default(e,n.data.env_key,n),this.data={player_instance_id:(0,u.generateUUID)(),mux_sample_rate:n.sampleRate,beacon_domain:n.beaconDomain},this.data.view_sequence_number=1,this.data.player_sequence_number=1,this.oldEmit=this.emit,this.emit=function(e,t){t=(0,l.default)({viewer_time:this.mux.utils.now()},t),this.oldEmit(e,t)};var i=function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind(this);this.on("viewinit",function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),(0,l.default)(this.data,t),this._initializeViewData(),this.one("play",i),this.one("adbreakstart",i)});var a=function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}.bind(this);this.on("videochange",function(e,t){a(t)}),this.on("programchange",function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),a((0,l.default)(t,{view_program_changed:!0})),i()}),this.on("destroy",this.destroy);var o=this.destroy.bind(this);void 0!==h.default&&"function"==typeof h.default.addEventListener&&h.default.addEventListener("unload",o,!1),this.on("destroy",function(){void 0!==h.default&&"function"==typeof h.default.removeEventListener&&h.default.removeEventListener("unload",o)}),this.on("playerready",function(e,t){(0,l.default)(this.data,t)}),Q.forEach(function(e){r.on(e,function(t,n){0!==e.indexOf("ad")&&this._updateStateData(),(0,l.default)(this.data,n),this._sanitizeData()}),r.on("after"+e,function(){("error"!==e||this.viewErrored)&&this.send(e)})}),this.on("viewend",function(e,t){(0,l.default)(r.data,t)}),this.one("playerready",function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time}),k.default.apply(this),W.default.apply(this),j.default.apply(this),P.default.apply(this),S.default.apply(this),U.default.apply(this),D.default.apply(this),R.default.apply(this),H.default.apply(this),O.default.apply(this),M.default.apply(this),V.default.apply(this),X.default.apply(this),n.hlsjs&&this.addHLSJS(n),n.dashjs&&this.addDashJS(n),this.emit("viewinit",n.data)};(0,l.default)(J.prototype,E.default.prototype),(0,l.default)(J.prototype,P.default.prototype),(0,l.default)(J.prototype,j.default.prototype),(0,l.default)(J.prototype,S.default.prototype),(0,l.default)(J.prototype,D.default.prototype),(0,l.default)(J.prototype,R.default.prototype),(0,l.default)(J.prototype,H.default.prototype),(0,l.default)(J.prototype,O.default.prototype),(0,l.default)(J.prototype,M.default.prototype),J.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),h.default.clearTimeout(this._heartBeatTimeout))},J.prototype.send=function(e){var t=(0,l.default)({},this.data);if(1===t.player_error_code&&(delete t.player_error_code,delete t.player_error_message),t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var n=(0,c.extractHostnameAndDomain)(t.video_source_url),r=i(n,2),a=r[0],s=r[1];t.video_source_domain=s,t.video_source_hostname=a}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,this._restartHeartBeat()},J.prototype._updateStateData=function(){(0,l.default)(this.data,this.getStateData()),this.getPlayheadTime&&(this.data.player_playhead_time=this.getPlayheadTime()),this._sanitizeData()},J.prototype._sanitizeData=function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach(function(t){var n=parseInt(e.data[t],10);e.data[t]=isNaN(n)?void 0:n}),["player_source_url","video_source_url"].forEach(function(t){e.data[t]&&0===e.data[t].toLowerCase().indexOf("data:")&&(e.data[t]="MSE style URL")})},J.prototype._resetVideoData=function(e,t){var n=this;Object.keys(this.data).forEach(function(e){0===e.indexOf("video_")&&delete n.data[e]})},J.prototype._resetViewData=function(){var e=this;Object.keys(this.data).forEach(function(t){0===t.indexOf("view_")&&delete e.data[t]}),this.data.view_sequence_number=1},J.prototype._resetErrorData=function(e,t){delete this.data.player_error_code,delete this.data.player_error_message},J.prototype._initializeViewData=function(){var e=this,t=this.data.view_id=(0,u.generateUUID)();this.data.video_id||(this.data.video_id=(0,y.default)(this.data.player_source_url));var n=function(){t===e.data.view_id&&(0,v.default)(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",n):n()},J.prototype._restartHeartBeat=function(){var e=this;h.default.clearTimeout(this._heartBeatTimeout),this.viewErrored||(this._heartBeatTimeout=h.default.setTimeout(function(){e.data.player_is_paused||e.emit("hb")},1e4))},J.prototype.addHLSJS=function(e){return e.hlsjs?this.hlsjs?void this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,void(0,_.monitorHlsJs)(this.mux,this.id,e.hlsjs,{},e.Hls||h.default.Hls)):void this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")},J.prototype.removeHLSJS=function(){this.hlsjs&&((0,_.stopMonitoringHlsJs)(this.hlsjs),this.hlsjs=void 0)},J.prototype.addDashJS=function(e){return e.dashjs?this.dashjs?void this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,void(0,b.monitorDashJS)(this.mux,this.id,e.dashjs)):void this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")},J.prototype.removeDashJS=function(){this.dashjs&&((0,b.stopMonitoringDashJS)(this.dashjs),this.dashjs=void 0)},t.default=J},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=a.default.createElement("a");t.href=e;var n=t.pathname.replace(/\.[^\/.]+$/,"");return o.default.encode(t.host+n).split("=")[0]};var i=n(12),a=r(i),s=n(24),o=r(s)},function(e,t){},function(e,t,n){(function(e,r){var i;!function(r){"object"==typeof e&&e&&e.exports;var a=function(e){this.message=e};(a.prototype=new Error).name="InvalidCharacterError";var s=function(e){throw new a(e)},o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,u={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,r,i,a=e.length%3,l="",u=-1,c=e.length-a;++u<c;)t=e.charCodeAt(u)<<16,n=e.charCodeAt(++u)<<8,r=e.charCodeAt(++u),l+=o.charAt((i=t+n+r)>>18&63)+o.charAt(i>>12&63)+o.charAt(i>>6&63)+o.charAt(63&i);return 2==a?(t=e.charCodeAt(u)<<8,n=e.charCodeAt(++u),l+=o.charAt((i=t+n)>>10)+o.charAt(i>>4&63)+o.charAt(i<<2&63)+"="):1==a&&(i=e.charCodeAt(u),l+=o.charAt(i>>2)+o.charAt(i<<4&63)+"=="),l},decode:function(e){var t=(e=String(e).replace(l,"")).length;t%4==0&&(e=e.replace(/==?$/,""),t=e.length),(t%4==1||/[^+a-zA-Z0-9\/]/.test(e))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,i=0,a="",u=-1;++u<t;)r=o.indexOf(e.charAt(u)),n=i%4?64*n+r:r,i++%4&&(a+=String.fromCharCode(255&n>>(-2*i&6)));return a},version:"0.1.0"};void 0!==(i=function(){return u}.call(t,n,t,e))&&(e.exports=i)}()}).call(t,n(13)(e),n(6))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.stopMonitoringHlsJs=t.monitorHlsJs=void 0;var i=n(8),a=r(i),s=n(11),o=r(s),l=n(5),u=function(e){if(!e)return{};var t=o.default.navigationStart();return{bytesLoaded:e.total,requestStart:Math.round(t+e.trequest),responseStart:Math.round(t+e.tfirst),responseEnd:Math.round(t+e.tload)}},c=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return(0,a.default)(e.getAllResponseHeaders())};t.monitorHlsJs=function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments[4]),i=e.log;if(o.default.exists()){var a=function(n,r){return e.emit(t,n,r)},s=function(e,t){var n=t.levels,r=t.audioTracks,i=t.url,s=t.stats,o=t.networkDetails,d={},h={};n.forEach(function(e,t){d[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}}),r.forEach(function(e,t){h[t]={name:e.name,language:e.lang,bitrate:e.bitrate}});var f=u(s),p=f.bytesLoaded,g=f.requestStart,v=f.responseStart,m=f.responseEnd;a("requestcompleted",{request_event_type:e,request_bytes_loaded:p,request_start:g,request_response_start:v,request_response_end:m,request_type:"manifest",request_hostname:(0,l.extractHostname)(i),request_response_headers:c(o),request_rendition_lists:{media:d,audio:h,video:{}}})};n.on(r.Events.MANIFEST_LOADED,s);var d=function(e,t){var n=t.details,r=t.level,i=t.networkDetails,s=t.stats,o=u(s),d=o.bytesLoaded,h=o.requestStart,f=o.responseStart,p=o.responseEnd;a("requestcompleted",{request_event_type:e,request_bytes_loaded:d,request_start:h,request_response_start:f,request_response_end:p,request_current_level:r,request_type:"manifest",request_hostname:(0,l.extractHostname)(n.url),request_response_headers:c(i)})};n.on(r.Events.LEVEL_LOADED,d);var h=function(e,t){var n=t.details,r=t.networkDetails,i=t.stats,s=u(i),o=s.bytesLoaded,d=s.requestStart,h=s.responseStart,f=s.responseEnd;a("requestcompleted",{request_event_type:e,request_bytes_loaded:o,request_start:d,request_response_start:h,request_response_end:f,request_type:"manifest",request_hostname:(0,l.extractHostname)(n.url),request_response_headers:c(r)})};n.on(r.Events.AUDIO_TRACK_LOADED,h);var f=function(e,t){var r=t.stats,i=t.networkDetails,s=t.frag,o=u(r),d=o.bytesLoaded,h=o.requestStart,f=o.responseStart,p=o.responseEnd,g={request_event_type:e,request_bytes_loaded:d,request_start:h,request_response_start:f,request_response_end:p,request_hostname:i?(0,l.extractHostname)(i.responseURL):void 0,request_response_headers:c(i),request_media_duration:s.duration};"main"===s.type?(g.request_type="media",g.request_current_level=s.level,g.request_video_width=(n.levels[s.level]||{}).width,g.request_video_height=(n.levels[s.level]||{}).height):g.request_type=s.type,a("requestcompleted",g)};n.on(r.Events.FRAG_LOADED,f);var p=function(e,t){var n=t.details,i=t.response,s=t.context,o=t.frag;if(n===r.ErrorDetails.MANIFEST_LOAD_ERROR||n===r.ErrorDetails.MANIFEST_LOAD_TIMEOUT||n===r.ErrorDetails.FRAG_LOAD_ERROR||n===r.ErrorDetails.FRAG_LOAD_TIMEOUT||n===r.ErrorDetails.LEVEL_LOAD_ERROR||n===r.ErrorDetails.LEVEL_LOAD_TIMEOUT){var u=o&&o.url||s&&s.url||"";a("requestfailed",{request_error:n,request_url:u,request_hostname:(0,l.extractHostname)(u),request_type:n===r.ErrorDetails.FRAG_LOAD_ERROR||n===r.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":"manifest",request_error_code:i&&i.code,request_error_text:i&&i.text})}};n.on(r.Events.ERROR,p);var g=function(e,t){var n=t.frag,r=n&&n._url||"";a("requestcanceled",{request_cancel:e,request_url:r,request_type:"media",request_hostname:(0,l.extractHostname)(r)})};n.on(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,g);var v=function(e,t){var r=t.level,s=n.levels.find(function(e){return e.level===r});if(s&&s.attrs.BANDWIDTH){var o=s.attrs.BANDWIDTH;o?a("renditionchange",{video_source_bitrate:o,video_source_width:s.width,video_source_height:s.height}):i.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};n.on(r.Events.LEVEL_SWITCHED,v),n._stopMuxMonitor=function(){n.off(r.Events.MANIFEST_LOADED,s),n.off(r.Events.LEVEL_LOADED,d),n.off(r.Events.AUDIO_TRACK_LOADED,h),n.off(r.Events.FRAG_LOADED,f),n.off(r.Events.ERROR,p),n.off(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,g),n.off(r.Events.LEVEL_SWITCHED,v),n.off(r.Events.DESTROYING,n._stopMuxMonitor),delete n._stopMuxMonitor},n.on(r.Events.DESTROYING,n._stopMuxMonitor)}else i.warn("performance timing not supported. Not tracking HLS.js.")},t.stopMonitoringHlsJs=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.stopMonitoringDashJS=t.monitorDashJS=void 0;var i=n(0),a=r(i),s=n(8),o=r(s),l=n(5),u=function(e,t){if(!e||"function"!=typeof e.getRequests)return{};var n=e.getRequests({state:"executed"});if(0===n.length)return{};var r=n[n.length-1],i=(0,l.extractHostname)(r.url),a=r.bytesLoaded,s=new Date(r.requestStartDate).getTime(),u=new Date(r.firstByteDate).getTime(),c=new Date(r.requestEndDate).getTime(),d=isNaN(r.duration)?0:r.duration,h="function"==typeof t.getMetricsFor?t.getMetricsFor(r.mediaType).HttpList:t.getDashMetrics().getHttpRequests(r.mediaType),f=void 0;return h.length>0&&(f=(0,o.default)(h[h.length-1]._responseHeaders||"")),{requestStart:s,requestResponseStart:u,requestResponseEnd:c,requestBytesLoaded:a,requestResponseHeaders:f,requestMediaDuration:d,requestHostname:i}};t.monitorDashJS=function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.log);if(n&&n.on){var i=function(n,r){return e.emit(t,n,r)},s=function(e){var t=e.type,n=e.data,r=n||{},a=r.url;i("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:(0,l.extractHostname)(a)})};n.on("manifestLoaded",s);var o={},c=function(e){var t=e.type,r=e.fragmentModel,a=e.chunk,s=a||{},l=s.mediaInfo,c=l||{},d=c.type,h=c.bitrateList,f={};(h=h||[]).forEach(function(e,t){f[t]={},f[t].width=e.width,f[t].height=e.height,f[t].bitrate=e.bandwidth,f[t].attrs={}}),"video"===d?o.video=f:"audio"===d?o.audio=f:o.media=f;var p=u(r,n),g=p.requestStart,v=p.requestResponseStart,m=p.requestResponseEnd,y=p.requestResponseHeaders,_=p.requestMediaDuration,b=p.requestHostname;i("requestcompleted",{request_event_type:t,request_start:g,request_response_start:v,request_response_end:m,request_bytes_loaded:-1,request_type:d+"_init",request_response_headers:y,request_hostname:b,request_media_duration:_,request_rendition_lists:o})};n.on("initFragmentLoaded",c);var d=function(e){var t=e.type,r=e.fragmentModel,a=e.chunk,s=a||{},o=s.mediaInfo,l=s.start,c=o||{},d=c.type,h=u(r,n),f=h.requestStart,p=h.requestResponseStart,g=h.requestResponseEnd,v=h.requestBytesLoaded,m=h.requestResponseHeaders,y=h.requestMediaDuration,_=h.requestHostname,b=function(e,t){var n=t.getQualityFor(e),r=t.getCurrentTrackFor(e).bitrateList;return r?{currentLevel:n,renditionWidth:r[n].width||null,renditionHeight:r[n].height||null,renditionBitrate:r[n].bandwidth}:{}}(d,n),A=b.currentLevel,E=b.renditionWidth,w=b.renditionHeight,S=b.renditionBitrate;i("requestcompleted",{request_event_type:t,request_start:f,request_response_start:p,request_response_end:g,request_bytes_loaded:v,request_type:d,request_response_headers:m,request_hostname:_,request_media_start_time:l,request_media_duration:y,request_current_level:A,request_labeled_bitrate:S,request_video_width:E,request_video_height:w})};n.on("mediaFragmentLoaded",d);var h={video:void 0,audio:void 0,totalBitrate:void 0},f=function(e,t,a){if("number"==typeof e.newQuality){var s=e.mediaType;if("audio"===s||"video"===s){var o=n.getBitrateInfoListFor(s).find(function(t){return t.qualityIndex===e.newQuality});if(!o||"number"!=typeof o.bitrate)return void r.warn("missing bitrate info for "+s);h[s]=o;var l=function(){if(h.video&&"number"==typeof h.video.bitrate){if(!h.video.width||!h.video.height)return void r.warn("have bitrate info for video but missing width/height");var e=h.video.bitrate;return h.audio&&"number"==typeof h.audio.bitrate&&(e+=h.audio.bitrate),e!==h.totalBitrate?(h.totalBitrate=e,{video_source_bitrate:e,video_source_height:h.video.height,video_source_width:h.video.width}):void 0}}();l&&i("renditionchange",l)}}else r.warn("missing evt.newQuality in qualityChangeRendered event",e)};n.on("qualityChangeRendered",f);var p=function(e){var t=e.error,n=e.event,r=(n=n||{}).request||{},s=a.default.event&&a.default.event.currentTarget||{};i("requestfailed",{request_error:t+"_"+n.id+"_"+r.type,request_url:n.url,request_hostname:(0,l.extractHostname)(n.url),request_type:r.mediaType,request_error_code:s.status,request_error_type:s.statusText})};n.on("error",p),n._stopMuxMonitor=function(){n.off("manifestLoaded",s),n.off("initFragmentLoaded",c),n.off("mediaFragmentLoaded",d),n.off("qualityChangeRendered",f),n.off("error",p),delete n._stopMuxMonitor}}else r.warn("Invalid dash.js player reference. Monitoring blocked.")},t.stopMonitoringDashJS=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){},i=0;r.prototype.on=function(e,t,n){return t._eventEmitterGuid=t._eventEmitterGuid||++i,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],n&&(t=t.bind(n)),this._listeners[e].push(t),t},r.prototype.off=function(e,t){var n=this._listeners&&this._listeners[e];n&&n.forEach(function(e,r){e._eventEmitterGuid===t._eventEmitterGuid&&n.splice(r,1)})},r.prototype.one=function(e,t,n){var r=this;t._eventEmitterGuid=t._eventEmitterGuid||++i;var a=function i(){r.off(e,i),t.apply(n||this,arguments)};a._eventEmitterGuid=t._eventEmitterGuid,this.on(e,a)},r.prototype.emit=function(e,t){var n=this;if(this._listeners){t=t||{};var r=this._listeners["before*"]||[],i=this._listeners[e]||[],a=this._listeners["after"+e]||[],s=function(t,r){(t=t.slice()).forEach(function(t){t.call(n,{type:e},r)})};s(r,t),s(i,t),s(a,t)}},t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,this.on("playing",function(){this._playheadShouldBeProgressing=!0}),this.on("play",this._startPlaybackHeartbeatInterval),this.on("playing",this._startPlaybackHeartbeatInterval),this.on("adbreakstart",this._startPlaybackHeartbeatInterval),this.on("adplay",this._startPlaybackHeartbeatInterval),this.on("adplaying",this._startPlaybackHeartbeatInterval),this.on("seeking",this._startPlaybackHeartbeatInterval),this.on("devicewake",this._startPlaybackHeartbeatInterval),this.on("viewstart",this._startPlaybackHeartbeatInterval),this.on("pause",this._stopPlaybackHeartbeatInterval),this.on("ended",this._stopPlaybackHeartbeatInterval),this.on("viewend",this._stopPlaybackHeartbeatInterval),this.on("error",this._stopPlaybackHeartbeatInterval),this.on("aderror",this._stopPlaybackHeartbeatInterval),this.on("adpause",this._stopPlaybackHeartbeatInterval),this.on("adended",this._stopPlaybackHeartbeatInterval),this.on("adbreakend",this._stopPlaybackHeartbeatInterval),this.on("seeked",function(){this.data.player_is_paused?this._stopPlaybackHeartbeatInterval():this._startPlaybackHeartbeatInterval()}),this.on("timeupdate",function(){null!==this._playbackHeartbeatInterval&&this.emit("playbackheartbeat")}),this.on("devicesleep",function(e,t){null!==this._playbackHeartbeatInterval&&(i.default.clearInterval(this._playbackHeartbeatInterval),this.emit("playbackheartbeatend",{viewer_time:t.viewer_time}),this._playbackHeartbeatInterval=null)})};a.prototype._startPlaybackHeartbeatInterval=function(){var e=this;null===this._playbackHeartbeatInterval&&(this.emit("playbackheartbeat"),this._playbackHeartbeatInterval=i.default.setInterval(function(){e.emit("playbackheartbeat")},this.playbackHeartbeatTime))},a.prototype._stopPlaybackHeartbeatInterval=function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(i.default.clearInterval(this._playbackHeartbeatInterval),this.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)},t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;this.on("viewinit",function(){e.viewErrored=!1}),this.on("error",function(){try{var t=e.errorTranslator({player_error_code:e.data.player_error_code,player_error_message:e.data.player_error_message});t?(e.data.player_error_code=t.player_error_code,e.data.player_error_message=t.player_error_message,e.viewErrored=!0):(delete e.data.player_error_code,delete e.data.player_error_message)}catch(t){e.mux.log.warn("Exception in error translator callback.",t),e.viewErrored=!0}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){this._watchTimeTrackerLastCheckedTime=null,this.on("playbackheartbeat",this._updateWatchTime),this.on("playbackheartbeatend",this._clearWatchTimeState)};a.prototype._updateWatchTime=function(e,t){var n=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=n),(0,i.default)(this.data,"view_watch_time",n-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=n},a.prototype._clearWatchTimeState=function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null},t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){this._playbackTimeTrackerLastPlayheadPosition=-1,this.on("playbackheartbeat",this._updatePlaybackTime),this.on("playbackheartbeatend",this._clearPlaybackTimeState),this.on("seeking",this._clearPlaybackTimeState)};a.prototype._updatePlaybackTime=function(){var e=this.data.player_playhead_time;if(this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition){var t=e-this._playbackTimeTrackerLastPlayheadPosition;t<=1e3&&(0,i.default)(this.data,"view_content_playback_time",t)}this._playbackTimeTrackerLastPlayheadPosition=e},a.prototype._clearPlaybackTimeState=function(){this._updatePlaybackTime(),this._playbackTimeTrackerLastPlayheadPosition=-1},t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){this.on("playbackheartbeat",this._updatePlayheadTime),this.on("playbackheartbeatend",this._updatePlayheadTime),this.on("timeupdate",this._updatePlayheadTime),this.on("destroy",function(){this.off("timeupdate",this._updatePlayheadTime)})};r.prototype._updatePlayheadTime=function(e,t){if(t.player_playhead_time)this.data.player_playhead_time=t.player_playhead_time;else if(this.getPlayheadTime){var n=this.getPlayheadTime();void 0!==n&&(this.data.player_playhead_time=n)}},t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),a=r(i),s=n(2),o=r(s),l=function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,this.on("playbackheartbeat",this._checkIfRebuffering),this.on("playbackheartbeatend",this._cleanupRebufferTracker),this.on("seeking",function(){this._cleanupRebufferTracker(null,{viewer_time:a.default.now()})})};l.prototype._checkIfRebuffering=function(e,t){if(this.isSeeking||this.isAdBreak||!this._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else{if(null===this._lastCheckedTime)return this._prepareRebufferTrackerState(t.viewer_time),void this._updateRebufferMetrics();if(this._lastPlayheadTime===this.data.player_playhead_time){var n=t.viewer_time-this._lastPlayheadTimeUpdatedTime;n>=this.sustainedRebufferThreshold&&(this._rebuffering?this._updateRebufferMetrics(t.viewer_time-this._lastCheckedTime):(this._rebuffering=!0,(0,o.default)(this.data,"view_rebuffer_count",1),this._updateRebufferMetrics(n),this.emit("rebufferstart"))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0)}},l.prototype._clearRebufferTrackerState=function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null},l.prototype._prepareRebufferTrackerState=function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e},l.prototype._cleanupRebufferTracker=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this._updateRebufferMetrics(t.viewer_time-this._lastCheckedTime),this.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return void this._updateRebufferMetrics();var r=this.data.player_playhead_time-this._lastPlayheadTime,i=t.viewer_time-this._lastPlayheadTimeUpdatedTime;r>0&&i-r>this.minimumRebufferDuration?((0,o.default)(this.data,"view_rebuffer_count",1),this._updateRebufferMetrics(i-r),this.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+i-r})):this._updateRebufferMetrics()}n?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()},l.prototype._updateRebufferMetrics=function(e){e>0&&(0,o.default)(this.data,"view_rebuffer_duration",e),this.data.view_watch_time>=0&&this.data.view_rebuffer_count>0&&(this.data.view_rebuffer_frequency=this.data.view_rebuffer_count/this.data.view_watch_time,this.data.view_rebuffer_percentage=this.data.view_rebuffer_duration/this.data.view_watch_time)},t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){this.on("viewinit",function(){var e=this.data,t=e.view_id;if(!e.view_program_changed){var n=function(e,n){var r=n.viewer_time;"playing"===e.type&&void 0===this.data.view_time_to_first_frame?this.calculateTimeToFirstFrame(r||i.default.now(),t):"adplaying"!==e.type||void 0!==this.data.view_time_to_first_frame&&!this.inPrerollPosition()||this.calculateTimeToFirstFrame(r||i.default.now(),t)};this.one("playing",n),this.one("adplaying",n),this.one("viewend",function(){this.off("playing",n),this.off("adplaying",n)})}})};a.prototype.calculateTimeToFirstFrame=function(e,t){t===this.data.view_id&&(this._updateWatchTime(null,{viewer_time:e}),this.data.view_time_to_first_frame=this.data.view_watch_time,(this.data.player_autoplay_on||this.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.data.view_aggregate_startup_time=this.data.view_start+this.data.view_watch_time-this.NAVIGATION_START))},t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;this.on("viewinit",function(){this._lastPlayheadPosition=-1}),["pause","rebufferstart","seeking","error","adbreakstart","hb"].forEach(function(t){e.on(t,function(){if(this._lastPlayheadPosition>=0&&this.data.player_playhead_time>=0&&this._lastPlayerWidth>=0&&this._lastSourceWidth>0&&this._lastPlayerHeight>=0&&this._lastSourceHeight>0){var e=this.data.player_playhead_time-this._lastPlayheadPosition;if(e<0)return void(this._lastPlayheadPosition=-1);var t=Math.min(this._lastPlayerWidth/this._lastSourceWidth,this._lastPlayerHeight/this._lastSourceHeight),n=Math.max(0,t-1),r=Math.max(0,1-t);this.data.view_max_upscale_percentage=Math.max(this.data.view_max_upscale_percentage||0,n),this.data.view_max_downscale_percentage=Math.max(this.data.view_max_downscale_percentage||0,r),(0,i.default)(this.data,"view_total_content_playback_time",e),(0,i.default)(this.data,"view_total_upscaling",n*e),(0,i.default)(this.data,"view_total_downscaling",r*e)}this._lastPlayheadPosition=-1})}),["playing","hb"].forEach(function(t){e.on(t,function(){this._lastPlayheadPosition=this.data.player_playhead_time,this._lastPlayerWidth=this.data.player_width,this._lastPlayerHeight=this.data.player_height,this._lastSourceWidth=this.data.video_source_width,this._lastSourceHeight=this.data.video_source_height})})};var r=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){this.isSeeking=!1,this.on("seeking",function(e,t){(0,u.default)(this.data,t),this._lastSeekingTime=a.default.now(),!1===this.isSeeking&&(this.isSeeking=!0,this.send("seeking"))}),this.on("seeked",function(){this.isSeeking=!1;var e=this._lastSeekingTime||a.default.now(),t=a.default.now()-e;(0,o.default)(this.data,"view_seek_count",1),(0,o.default)(this.data,"view_seek_duration",t);var n=this.data.view_max_seek_time||0;this.data.view_max_seek_time=Math.max(n,t)}),this.on("viewend",function(){this.isSeeking=!1})};var i=n(3),a=r(i),s=n(2),o=r(s),l=n(1),u=r(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(2),s=r(a),o=n(5),l=n(1),u=r(l),c=function(e,t){e.push(t),e.sort(function(e,t){return e.viewer_time-t.viewer_time})},d=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror"],h=function(){var e=this;this.on("viewinit",function(){this.isAdBreak=!1,this._currentAdRequestNumber=0,this._currentAdResponseNumber=0,this._adRequests=[],this._adResponses=[],this._adHasPlayed=!1,this._wouldBeNewAdPlay=!0,this._prerollPlayTime=void 0}),d.forEach(function(t){return e.on(t,e._updateAdData)});var t=function(){e.isAdBreak=!1};this.on("adbreakstart",function(){this.isAdBreak=!0}),this.on("play",t),this.on("playing",t),this.on("viewend",t),this.on("adrequest",function(e,t){t=(0,u.default)({ad_request_id:"generatedAdRequestId"+this._currentAdRequestNumber++},t),c(this._adRequests,t),(0,s.default)(this.data,"view_ad_request_count"),this.inPrerollPosition()&&(this.data.view_preroll_requested=!0,this._adHasPlayed||(0,s.default)(this.data,"view_preroll_request_count"))}),this.on("adresponse",function(e,t){t=(0,u.default)({ad_request_id:"generatedAdRequestId"+this._currentAdResponseNumber++},t),c(this._adResponses,t);var n=this.findAdRequest(t.ad_request_id);n&&(0,s.default)(this.data,"view_ad_request_time",Math.max(0,t.viewer_time-n.viewer_time))}),this.on("adplay",function(e,t){this._adHasPlayed=!0,this._wouldBeNewAdPlay&&(this._wouldBeNewAdPlay=!1,(0,s.default)(this.data,"view_ad_played_count")),this.inPrerollPosition()&&!this.data.view_preroll_played&&(this.data.view_preroll_played=!0,this._adRequests.length>0&&(this.data.view_preroll_request_time=Math.max(0,t.viewer_time-this._adRequests[0].viewer_time)),this.data.view_start&&(this.data.view_startup_preroll_request_time=Math.max(0,t.viewer_time-this.data.view_start)),this._prerollPlayTime=t.viewer_time)}),this.on("adplaying",function(e,t){this.inPrerollPosition()&&void 0===this.data.view_preroll_load_time&&void 0!==this._prerollPlayTime&&(this.data.view_preroll_load_time=t.viewer_time-this._prerollPlayTime,this.data.view_startup_preroll_load_time=t.viewer_time-this._prerollPlayTime)}),this.on("adended",function(){this._wouldBeNewAdPlay=!0}),this.on("aderror",function(){this._wouldBeNewAdPlay=!0})};h.prototype.inPrerollPosition=function(){return void 0===this.data.view_content_playback_time||this.data.view_content_playback_time<=1e3},h.prototype.findAdRequest=function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]},h.prototype._updateAdData=function(e,t){if(this.inPrerollPosition()){if(!this.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var n=(0,o.extractHostnameAndDomain)(t.ad_tag_url),r=i(n,2),a=r[0],s=r[1];this.data.view_preroll_ad_tag_domain=s,this.data.view_preroll_ad_tag_hostname=a}if(!this.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var l=(0,o.extractHostnameAndDomain)(t.ad_asset_url),u=i(l,2),c=u[0],d=u[1];this.data.view_preroll_ad_asset_domain=d,this.data.view_preroll_ad_asset_hostname=c}}},t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this,t=void 0,n=void 0,r=function(){t&&((0,o.default)(e.data,"view_waiting_rebuffer_duration",a.default.now()-t),t=!1,window.clearInterval(n))},i=!1,s=function(){i=!1,r()};this.on("waiting",function(){i&&((0,o.default)(e.data,"view_waiting_rebuffer_count",1),t=a.default.now(),n=window.setInterval(function(){if(t){var n=a.default.now();(0,o.default)(e.data,"view_waiting_rebuffer_duration",n-t),t=n}},250))}),this.on("playing",function(){r(),i=!0}),this.on("pause",s),this.on("seeking",s)};var i=n(3),a=r(i),s=n(2),o=r(s)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;this.one("playbackheartbeat",l),this.on("playbackheartbeatend",function(){e.off("before*",u),e.one("playbackheartbeat",l)})};var i=n(1),a=r(i),s=n(3),o=r(s),l=function(){this.lastWallClockTime=o.default.now(),this.on("before*",u)},u=function(e){var t=o.default.now(),n=this.lastWallClockTime;this.lastWallClockTime=t,t-n>3e4&&(this.emit("devicesleep",{viewer_time:n}),(0,a.default)(this.data,{viewer_time:n}),this.send("devicesleep"),this.emit("devicewake",{viewer_time:t}),(0,a.default)(this.data,{viewer_time:t}),this.send("devicewake"))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(0),s=r(a),o=n(41),l=n(4),u=r(l),c=n(45),d=r(c),h=n(10),f=r(h),p=n(17),g=r(p),v=n(46),m=r(v),y=n(48),_=r(y),b=n(1),A=r(b),E=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id"],w=["viewstart","error","ended","viewend"],S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.mux=e,this.envKey=t,this.eventQueue=new m.default((0,d.default)(t,n.beaconDomain)),this.previousBeaconData=null,this.lastEventTime=null,this.sampleRate=n.sampleRate,this.disableCookies=n.disableCookies,this.respectDoNotTrack=n.respectDoNotTrack;var r=(0,A.default)(_.default,n.platform||{});this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed_version:this.mux.VERSION,viewer_application_name:r.name,viewer_application_version:r.version,viewer_application_engine:r.layout,viewer_device_name:r.product,viewer_device_category:"",viewer_device_manufacturer:r.manufacturer,viewer_os_family:r.os&&r.os.family,viewer_os_architecture:r.os&&r.os.architecture,viewer_os_version:r.os&&r.os.version},void 0!==s.default&&s.default.location&&s.default.location.href&&(this.pageLevelData.page_url=s.default.location.href),this.viewerData=this.disableCookies?{}:(0,o.getAndUpdateViewerData)()};S.prototype.send=function(e,t){if(e){if(this.respectDoNotTrack&&(0,f.default)())return u.default.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!==(void 0===t?"undefined":i(t)))return u.default.error("A data object was expected in send() but was not provided");var n=this.disableCookies?{}:(0,o.getAndUpdateSessionData)(),r={};(0,A.default)(r,this.pageLevelData),(0,A.default)(r,t),(0,A.default)(r,n),(0,A.default)(r,this.viewerData),r.event=e,r.env_key=this.envKey,r.user_id&&(r.viewer_user_id=r.user_id,delete r.user_id);var a=r.mux_sample_number>=this.sampleRate,s=this._deduplicateBeaconData(e,r),l=(0,g.default)(s);if(this.lastEventTime=this.mux.utils.now(),a)return u.default.info("Not sending event due to sample rate restriction",e,r,l);if(!this.envKey)return u.default.info("Not sending event due to missing environment key",e,r,l);if(!this.rateLimited)if(u.default.info("Sending event",e,r,l),this.rateLimited=!this.eventQueue.queueEvent(e,l),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(w.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return r.event="eventrateexceeded",l=(0,g.default)(r),this.eventQueue.queueEvent(r.event,l),u.default.error("Beaconing disabled due to rate limit.")}},S.prototype.destroy=function(){this.eventQueue.destroy(!1)};var T=function(e,t,n,r){return!(!e||0!==t.indexOf("request_")||"request_response_headers"!==t&&"object"===(void 0===n?"undefined":i(n))&&"object"===(void 0===r?"undefined":i(r))&&Object.keys(n||{}).length===Object.keys(r||{}).length)};S.prototype._deduplicateBeaconData=function(e,t){var n=this,r={},i=t.view_id;if(!i||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)r=(0,A.default)({},t),i&&(this.previousBeaconData=r),i&&"viewend"===e&&(this.previousBeaconData=null);else{var a=0===e.indexOf("request");Object.keys(t).forEach(function(i){var s=t[i];(s!==n.previousBeaconData[i]||E.indexOf(i)>-1||T(a,i,s,n.previousBeaconData[i])||function(e,t){return"renditionchange"===e&&0===t.indexOf("video_source_")}(e,i))&&(r[i]=s,n.previousBeaconData[i]=s)})}return r},t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getAndUpdateSessionData=t.getAndUpdateViewerData=void 0;var i=n(14),a=r(i),s=n(44),o=r(s),l=n(7),u=n(3),c=r(u),d=function(){var e=void 0;try{e=a.default.parse(o.default.get("muxData")||"")}catch(t){e={}}return e},h=function(e){o.default.set("muxData",a.default.stringify(e),{expires:7300})};t.getAndUpdateViewerData=function(){var e=d();return e.mux_viewer_id=e.mux_viewer_id||(0,l.generateUUID)(),e.msn=e.msn||Math.random(),h(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}},t.getAndUpdateSessionData=function(){var e=d(),t=c.default.now();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=(0,l.generateUUID)(),e.sst=t),e.sex=t+15e5,h(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}}},function(e,t,n){"use strict";var r=n(15),i=n(16),a={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Date.prototype.toISOString,o={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1},l=function e(t,n,i,a,s,l,u,c,d,h,f,p){var g=t;if("function"==typeof u)g=u(n,g);else if(g instanceof Date)g=h(g);else if(null===g){if(a)return l&&!p?l(n,o.encoder):n;g=""}if("string"==typeof g||"number"==typeof g||"boolean"==typeof g||r.isBuffer(g))return l?[f(p?n:l(n,o.encoder))+"="+f(l(g,o.encoder))]:[f(n)+"="+f(String(g))];var v,m=[];if(void 0===g)return m;if(Array.isArray(u))v=u;else{var y=Object.keys(g);v=c?y.sort(c):y}for(var _=0;_<v.length;++_){var b=v[_];s&&null===g[b]||(m=Array.isArray(g)?m.concat(e(g[b],i(n,b),i,a,s,l,u,c,d,h,f,p)):m.concat(e(g[b],n+(d?"."+b:"["+b+"]"),i,a,s,l,u,c,d,h,f,p)))}return m};e.exports=function(e,t){var n=e,s=t?r.assign({},t):{};if(null!==s.encoder&&void 0!==s.encoder&&"function"!=typeof s.encoder)throw new TypeError("Encoder has to be a function.");var u=void 0===s.delimiter?o.delimiter:s.delimiter,c="boolean"==typeof s.strictNullHandling?s.strictNullHandling:o.strictNullHandling,d="boolean"==typeof s.skipNulls?s.skipNulls:o.skipNulls,h="boolean"==typeof s.encode?s.encode:o.encode,f="function"==typeof s.encoder?s.encoder:o.encoder,p="function"==typeof s.sort?s.sort:null,g=void 0!==s.allowDots&&s.allowDots,v="function"==typeof s.serializeDate?s.serializeDate:o.serializeDate,m="boolean"==typeof s.encodeValuesOnly?s.encodeValuesOnly:o.encodeValuesOnly;if(void 0===s.format)s.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,s.format))throw new TypeError("Unknown format option provided.");var y,_,b=i.formatters[s.format];"function"==typeof s.filter?(_=s.filter,n=_("",n)):Array.isArray(s.filter)&&(_=s.filter,y=_);var A,E=[];if("object"!=typeof n||null===n)return"";A=s.arrayFormat in a?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var w=a[A];y||(y=Object.keys(n)),p&&y.sort(p);for(var S=0;S<y.length;++S){var T=y[S];d&&null===n[T]||(E=E.concat(l(n[T],T,w,c,d,h?f:null,_,p,g,v,b,m)))}var k=E.join(u),x=!0===s.addQueryPrefix?"?":"";return k.length>0?x+k:""}},function(e,t,n){"use strict";var r=n(15),i=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},s=function(e,t){for(var n={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,o=r.split(t.delimiter,s),l=0;l<o.length;++l){var u,c,d=o[l],h=d.indexOf("]="),f=-1===h?d.indexOf("="):h+1;-1===f?(u=t.decoder(d,a.decoder),c=t.strictNullHandling?null:""):(u=t.decoder(d.slice(0,f),a.decoder),c=t.decoder(d.slice(f+1),a.decoder)),i.call(n,u)?n[u]=[].concat(n[u]).concat(c):n[u]=c}return n},o=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=/(\[[^[\]]*])/.exec(r),o=s?r.slice(0,s.index):r,l=[];if(o){if(!n.plainObjects&&i.call(Object.prototype,o)&&!n.allowPrototypes)return;l.push(o)}for(var u=0;null!==(s=a.exec(r))&&u<n.depth;){if(u+=1,!n.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+r.slice(s.index)+"]"),function(e,t,n){for(var r=t,i=e.length-1;i>=0;--i){var a,s=e[i];if("[]"===s)a=(a=[]).concat(r);else{a=n.plainObjects?Object.create(null):{};var o="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(o,10);!isNaN(l)&&s!==o&&String(l)===o&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(a=[])[l]=r:a[o]=r}r=a}return r}(l,t,n)}};e.exports=function(e,t){var n=t?r.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:a.delimiter,n.depth="number"==typeof n.depth?n.depth:a.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:a.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:a.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:a.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:a.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:a.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:a.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:a.strictNullHandling,""===e||null===e||void 0===e)return n.plainObjects?Object.create(null):{};for(var i="string"==typeof e?s(e,n):e,l=n.plainObjects?Object.create(null):{},u=Object.keys(i),c=0;c<u.length;++c){var d=u[c],h=o(d,i[d],n);l=r.merge(l,h,n)}return r.compact(l)}},function(e,t,n){"use strict";var r,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s){var o=!1;if(void 0!==(i="function"==typeof(r=s)?r.call(t,n,t,e):r)&&(e.exports=i),o=!0,"object"===a(t)&&(e.exports=s(),o=!0),!o){var l=window.Cookies,u=window.Cookies=s();u.noConflict=function(){return window.Cookies=l,u}}}(function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t};return function t(n){function r(t,i,a){var s;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},r.defaults,a)).expires){var o=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*a.expires),a.expires=o}try{s=JSON.stringify(i),/^[\{\[]/.test(s)&&(i=s)}catch(t){}return i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}t||(s={});for(var l=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,c=0;c<l.length;c++){var d=l[c].split("="),h=d.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var f=d[0].replace(u,decodeURIComponent);if(h=n.read?n.read(h,f):n(h,f)||h.replace(u,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(t){}if(t===f){s=h;break}t||(s[f]=h)}catch(t){}}return s}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}(function(){})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e=e||"",t=t||"litix.io",e.match(/^[a-z0-9]+$/)?"https://"+e+"."+t:"https://img.litix.io/a.gif"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=r(i),s=n(4),o=r(s),l=n(47),u=r(l),c=n(1),d=r(c),h=n(17),f=r(h),p=!!a.default.XMLHttpRequest&&"withCredentials"in new a.default.XMLHttpRequest,g={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:5e3},v=function(e,t){this._beaconUrl=e||"https://img.litix.io",this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=(0,d.default)({},g,t)};v.prototype.queueEvent=function(e,t){var n=(0,d.default)({},t);return p?(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(n),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength):(u.default.send(this._beaconUrl,n),!0)},v.prototype.flushEvents=function(){p&&(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},v.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),a.default.clearTimeout(this._sendTimeout)},v.prototype._clearBeaconQueue=function(){var e=a.default.navigator,t=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,n=this._eventQueue.slice(t);if(t>0&&(0,d.default)(n[n.length-1],(0,f.default)({mux_view_message:"event queue truncated"})),e.sendBeacon)e.sendBeacon(this._beaconUrl,JSON.stringify({events:n}));else if(a.default.XMLHttpRequest){var r=new a.default.XMLHttpRequest;r.open("POST",this._beaconUrl),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify({events:n}))}else u.default.send(this._beaconUrl,n[n.length-1])},v.prototype._sendBeaconQueue=function(){var e=this;if(a.default.XMLHttpRequest&&!this._postInFlight){var t=new a.default.XMLHttpRequest,n=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0,t.onreadystatechange=function(){4===t.readyState&&(200!==t.status?(e._eventQueue=n.concat(e._eventQueue),e._failureCount+=1,o.default.info("Error sending beacon: "+t.status),o.default.info(t.responseText)):e._failureCount=0,e._postInFlight=!1)},t.open("POST",this._beaconUrl),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify({events:n}))}},v.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},v.prototype._startBeaconSending=function(){var e=this;a.default.clearTimeout(this._sendTimeout),this.destroyed||(this._sendTimeout=a.default.setTimeout(function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()},this._getNextBeaconTime()))},t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),a=r(i),s=n(0),o=r(s),l={send:function(e,t){function n(){r.src=s+(i?"&rc="+i:"")}var r=new Image,i=0,s=e+"?"+a.default.stringify(t);return r.addEventListener("error",function(){i>3||o.default.setTimeout(function(){i++,n()},5e3*i)}),n(),r}};t.default=l},function(e,t,n){(function(e,r){var i;(function(){"use strict";function a(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function s(e){return e=h(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:a(e)}function o(e,t){for(var n in e)w.call(e,n)&&t(e[n],n,e)}function l(e){return null==e?a(e):S.call(e).slice(8,-1)}function u(e,t){var n=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!e[t])}function c(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function d(e,t){var n=null;return function(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=_)for(;++n<r;)t(e[n],n,e);else o(e,t)}(e,function(r,i){n=t(n,r,i,e)}),n}function h(e){return String(e).replace(/^ +| +$/g,"")}var f={function:!0,object:!0},p=f[typeof window]&&window||this,g=p,v=f[typeof t]&&t,m=f[typeof e]&&e&&!e.nodeType&&e,y=v&&m&&"object"==typeof r&&r;!y||y.global!==y&&y.window!==y&&y.self!==y||(p=y);var _=Math.pow(2,53)-1,b=/\bOpera/,A=this,E=Object.prototype,w=E.hasOwnProperty,S=E.toString,T=function e(t){function n(e){return d(e,function(e,n){var r=n.pattern||c(n);return!e&&(e=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=s(e[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e})}var r=p,i=t&&"object"==typeof t&&"String"!=l(t);i&&(r=t,t=null);var a=r.navigator||{},f=a.userAgent||"";t||(t=f);var v,m,y=i||A==g,_=i?!!a.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(S.toString()),E=i?"Object":"ScriptBridgingProxyObject",w=i?"Object":"Environment",T=i&&r.java?"JavaPackage":l(r.java),k=i?"Object":"RuntimeObject",x=/\bJava/.test(T)&&r.java,D=x&&l(r.environment)==w,C=x?"a":"",R=x?"b":"",L=r.document||{},P=r.operamini||r.opera,I=b.test(I=i&&P?P["[[Class]]"]:l(P))?I:P=null,O=t,N=[],M=null,F=t==f,U=F&&P&&"function"==typeof P.version&&P.version(),B=d([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(e,n){return e||RegExp("\\b"+(n.pattern||c(n))+"\\b","i").exec(t)&&(n.label||n)}),j=d(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],function(e,n){return e||RegExp("\\b"+(n.pattern||c(n))+"\\b","i").exec(t)&&(n.label||n)}),q=n([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),H=d({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},function(e,n,r){return e||(n[q]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(q)]||RegExp("\\b"+c(r)+"(?:\\b|\\w*\\d)","i").exec(t))&&r}),G=d(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(e,n){var r=n.pattern||c(n);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),e=s(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,r,n.label||n)),e});if(B&&(B=[B]),H&&!q&&(q=n([H])),(v=/\bGoogle TV\b/.exec(q))&&(q=v[0]),/\bSimulator\b/i.test(t)&&(q=(q?q+" ":"")+"Simulator"),"Opera Mini"==j&&/\bOPiOS\b/.test(t)&&N.push("running in Turbo/Uncompressed mode"),"IE"==j&&/\blike iPhone OS\b/.test(t)?(v=e(t.replace(/like iPhone OS/,"")),H=v.manufacturer,q=v.product):/^iP/.test(q)?(j||(j="Safari"),G="iOS"+((v=/ OS ([\d_]+)/i.exec(t))?" "+v[1].replace(/_/g,"."):"")):"Konqueror"!=j||/buntu/i.test(G)?H&&"Google"!=H&&(/Chrome/.test(j)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(q))||/\bAndroid\b/.test(G)&&/^Chrome/.test(j)&&/\bVersion\//i.test(t)?(j="Android Browser",G=/\bAndroid\b/.test(G)?G:"Android"):"Silk"==j?(/\bMobi/i.test(t)||(G="Android",N.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&N.unshift("accelerated")):"PaleMoon"==j&&(v=/\bFirefox\/([\d.]+)\b/.exec(t))?N.push("identifying as Firefox "+v[1]):"Firefox"==j&&(v=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(G||(G="Firefox OS"),q||(q=v[1])):!j||(v=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(j))?(j&&!q&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(v+"/")+8))&&(j=null),(v=q||H||G)&&(q||H||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(G))&&(j=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(G)?G:v)+" Browser")):"Electron"==j&&(v=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&N.push("Chromium "+v):G="Kubuntu",U||(U=function(e){return d(e,function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null})}(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",c(j),"(?:Firefox|Minefield|NetFront)"])),(v=("iCab"==B&&parseFloat(U)>3?"WebKit":/\bOpera\b/.test(j)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(B)&&"WebKit"||!B&&/\bMSIE\b/i.test(t)&&("Mac OS"==G?"Tasman":"Trident")||"WebKit"==B&&/\bPlayStation\b(?! Vita\b)/i.test(j)&&"NetFront")&&(B=[v]),"IE"==j&&(v=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(j+=" Mobile",G="Windows Phone "+(/\+$/.test(v)?v:v+".x"),N.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(j="IE Mobile",G="Windows Phone 8.x",N.unshift("desktop mode"),U||(U=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=j&&"Trident"==B&&(v=/\brv:([\d.]+)/.exec(t))&&(j&&N.push("identifying as "+j+(U?" "+U:"")),j="IE",U=v[1]),F){if(u(r,"global"))if(x&&(v=x.lang.System,O=v.getProperty("os.arch"),G=G||v.getProperty("os.name")+" "+v.getProperty("os.version")),y&&u(r,"system")&&(v=[r.system])[0]){G||(G=v[0].os||null);try{v[1]=r.require("ringo/engine").version,U=v[1].join("."),j="RingoJS"}catch(t){v[0].global.system==r.system&&(j="Narwhal")}}else"object"==typeof r.process&&!r.process.browser&&(v=r.process)?"object"==typeof v.versions?"string"==typeof v.versions.electron?(N.push("Node "+v.versions.node),j="Electron",U=v.versions.electron):"string"==typeof v.versions.nw&&(N.push("Chromium "+U,"Node "+v.versions.node),j="NW.js",U=v.versions.nw):(j="Node.js",O=v.arch,G=v.platform,U=(U=/[\d.]+/.exec(v.version))?U[0]:"unknown"):D&&(j="Rhino");else l(v=r.runtime)==E?(j="Adobe AIR",G=v.flash.system.Capabilities.os):l(v=r.phantom)==k?(j="PhantomJS",U=(v=v.version||null)&&v.major+"."+v.minor+"."+v.patch):"number"==typeof L.documentMode&&(v=/\bTrident\/(\d+)/i.exec(t))?(U=[U,L.documentMode],(v=+v[1]+4)!=U[1]&&(N.push("IE "+U[1]+" mode"),B&&(B[1]=""),U[1]=v),U="IE"==j?String(U[1].toFixed(1)):U[0]):"number"==typeof L.documentMode&&/^(?:Chrome|Firefox)\b/.test(j)&&(N.push("masking as "+j+" "+U),j="IE",U="11.0",B=["Trident"],G="Windows");G=G&&s(G)}if(U&&(v=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(U)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(F&&a.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(M=/b/i.test(v)?"beta":"alpha",U=U.replace(RegExp(v+"\\+?$"),"")+("beta"==M?R:C)+(/\d+\+?/.exec(v)||"")),"Fennec"==j||"Firefox"==j&&/\b(?:Android|Firefox OS)\b/.test(G))j="Firefox Mobile";else if("Maxthon"==j&&U)U=U.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(q))"Xbox 360"==q&&(G=null),"Xbox 360"==q&&/\bIEMobile\b/.test(t)&&N.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(j)&&(!j||q||/Browser|Mobi/.test(j))||"Windows CE"!=G&&!/Mobi/i.test(t))if("IE"==j&&F)try{null===r.external&&N.unshift("platform preview")}catch(t){N.unshift("embedded")}else(/\bBlackBerry\b/.test(q)||/\bBB10\b/.test(t))&&(v=(RegExp(q.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||U)?(v=[v,/BB10/.test(t)],G=(v[1]?(q=null,H="BlackBerry"):"Device Software")+" "+v[0],U=null):this!=o&&"Wii"!=q&&(F&&P||/Opera/.test(j)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==j&&/\bOS X (?:\d+\.){2,}/.test(G)||"IE"==j&&(G&&!/^Win/.test(G)&&U>5.5||/\bWindows XP\b/.test(G)&&U>8||8==U&&!/\bTrident\b/.test(t)))&&!b.test(v=e.call(o,t.replace(b,"")+";"))&&v.name&&(v="ing as "+v.name+((v=v.version)?" "+v:""),b.test(j)?(/\bIE\b/.test(v)&&"Mac OS"==G&&(G=null),v="identify"+v):(v="mask"+v,j=I?s(I.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(v)&&(G=null),F||(U=null)),B=["Presto"],N.push(v));else j+=" Mobile";(v=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(v=[parseFloat(v.replace(/\.(\d)$/,".0$1")),v],"Safari"==j&&"+"==v[1].slice(-1)?(j="WebKit Nightly",M="alpha",U=v[1].slice(0,-1)):U!=v[1]&&U!=(v[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(U=null),v[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==v[0]&&537.36==v[2]&&parseFloat(v[1])>=28&&"WebKit"==B&&(B=["Blink"]),F&&(_||v[1])?(B&&(B[1]="like Chrome"),v=v[1]||((v=v[0])<530?1:v<532?2:v<532.05?3:v<533?4:v<534.03?5:v<534.07?6:v<534.1?7:v<534.13?8:v<534.16?9:v<534.24?10:v<534.3?11:v<535.01?12:v<535.02?"13+":v<535.07?15:v<535.11?16:v<535.19?17:v<536.05?18:v<536.1?19:v<537.01?20:v<537.11?"21+":v<537.13?23:v<537.18?24:v<537.24?25:v<537.36?26:"Blink"!=B?"27":"28")):(B&&(B[1]="like Safari"),v=(v=v[0])<400?1:v<500?2:v<526?3:v<533?4:v<534?"4+":v<535?5:v<537?6:v<538?7:v<601?8:"8"),B&&(B[1]+=" "+(v+="number"==typeof v?".x":/[.+]/.test(v)?"":"+")),"Safari"==j&&(!U||parseInt(U)>45)&&(U=v)),"Opera"==j&&(v=/\bzbov|zvav$/.exec(G))?(j+=" ",N.unshift("desktop mode"),"zvav"==v?(j+="Mini",U=null):j+="Mobile",G=G.replace(RegExp(" *"+v+"$"),"")):"Safari"==j&&/\bChrome\b/.exec(B&&B[1])&&(N.unshift("desktop mode"),j="Chrome Mobile",U=null,/\bOS X\b/.test(G)?(H="Apple",G="iOS 4.3+"):G=null),U&&0==U.indexOf(v=/[\d.]+$/.exec(G))&&t.indexOf("/"+v+"-")>-1&&(G=h(G.replace(v,""))),B&&!/\b(?:Avant|Nook)\b/.test(j)&&(/Browser|Lunascape|Maxthon/.test(j)||"Safari"!=j&&/^iOS/.test(G)&&/\bSafari\b/.test(B[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(j)&&B[1])&&(v=B[B.length-1])&&N.push(v),N.length&&(N=["("+N.join("; ")+")"]),H&&q&&q.indexOf(H)<0&&N.push("on "+H),q&&N.push((/^on /.test(N[N.length-1])?"":"on ")+q),G&&(v=/ ([\d.+]+)$/.exec(G),m=v&&"/"==G.charAt(G.length-v[0].length-1),G={architecture:32,family:v&&!m?G.replace(v[0],""):G,version:v?v[1]:null,toString:function(){var e=this.version;return this.family+(e&&!m?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(v=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(O))&&!/\bi686\b/i.test(O)?(G&&(G.architecture=64,G.family=G.family.replace(RegExp(" *"+v),"")),j&&(/\bWOW64\b/i.test(t)||F&&/\w(?:86|32)$/.test(a.cpuClass||a.platform)&&!/\bWin64; x64\b/i.test(t))&&N.unshift("32-bit")):G&&/^OS X/.test(G.family)&&"Chrome"==j&&parseFloat(U)>=39&&(G.architecture=64),t||(t=null);var V={};return V.description=t,V.layout=B&&B[0],V.manufacturer=H,V.name=j,V.prerelease=M,V.product=q,V.ua=t,V.version=j&&U,V.os=G||{architecture:null,family:null,version:null,toString:function(){return"null"}},V.parse=e,V.toString=function(){return this.description||""},V.version&&N.unshift(U),V.name&&N.unshift(j),G&&j&&(G!=String(G).split(" ")[0]||G!=j.split(" ")[0]&&!q)&&N.push(q?"("+G+")":"on "+G),N.length&&(V.description=N.join(" ")),V}();p.platform=T,void 0!==(i=function(){return T}.call(t,n,t,e))&&(e.exports=i)}).call(this)}).call(t,n(13)(e),n(6))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0,t=0,n=0,r=0,i=0,a=0,s=0;this.on("requestcompleted",function(a,s){var o=s.request_start,l=s.request_response_start,u=s.request_response_end,c=s.request_bytes_loaded;r++;var d=void 0,h=void 0;if(l?(d=l-o,h=u-l):h=u-o,h>0&&c>0){var f=c/h*8e3;i++,t+=c,n+=h,this.data.view_min_request_throughput=Math.min(this.data.view_min_request_throughput||1/0,f),this.data.view_average_request_throughput=t/n*8e3,this.data.view_request_count=r,d>0&&(e+=d,this.data.view_max_request_latency=Math.max(this.data.view_max_request_latency||0,d),this.data.view_average_request_latency=e/i)}}),this.on("requestfailed",function(e,t){r++,a++,this.data.view_request_count=r,this.data.view_request_failed_count=a}),this.on("requestcanceled",function(e,t){r++,s++,this.data.view_request_count=r,this.data.view_request_canceled_count=s})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e,t,n){var a=(0,o.findMediaElement)(t),c=i(a,3),d=c[0],h=c[1],f=c[2],p=e.log,g=e.utils.getComputedStyle,v=e.utils.secondsToMs;return d?"video"!==f&&"audio"!==f?p.error("The element of `"+h+"` was not a media element."):((n=(0,s.default)({automaticErrorTracking:!0},n)).data=(0,s.default)({player_software:"HTML5 Video Element",player_software_version:"No Versions",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:"3.2.0"},n.data),n.getPlayheadTime=function(){return v(d.currentTime)},n.getStateData=function(){var e=this.hlsjs&&this.hlsjs.url,t=this.dashjs&&r("function"===this.dashjs.getSource)&&this.dashjs.getSource();return{player_is_paused:d.paused,player_playhead_time:v(d.currentTime),player_width:parseInt(g(d,"width")),player_height:parseInt(g(d,"height")),player_autoplay_on:d.autoplay,player_preload_on:d.preload,video_poster_url:d.poster,video_source_url:e||t||d.currentSrc,video_source_duration:v(d.duration),video_source_height:d.videoHeight,video_source_width:d.videoWidth}},d.mux=d.mux||{},d.mux.emit=function(t,n){e.emit(h,t,n)},d.mux.destroy=function(){Object.keys(d.mux.listeners).forEach(function(e){d.removeEventListener(e,d.mux.listeners[e],!1)}),delete d.mux.listeners,e.emit(h,"destroy")},d.mux.swapElement=function(t){var n=(0,o.findMediaElement)(t),r=i(n,3),a=r[0],l=r[1],u=r[2];return a?"video"!==u&&"audio"!==u?e.log.error("The element of `"+l+"` was not a media element."):(a.muxId=d.muxId,delete d.muxId,a.mux=a.mux||{},a.mux.listeners=(0,s.default)({},d.mux.listeners),delete d.mux.listeners,Object.keys(a.mux.listeners).forEach(function(e){d.removeEventListener(e,a.mux.listeners[e],!1),a.addEventListener(e,a.mux.listeners[e],!1)}),a.mux.swapElement=d.mux.swapElement,a.mux.destroy=d.mux.destroy,delete d.mux,void(d=a)):e.log.error("No element was found with the `"+l+"` query selector.")},d.mux.addHLSJS=function(t){e.addHLSJS(h,t)},d.mux.addDashJS=function(t){e.addDashJS(h,t)},d.mux.removeHLSJS=function(){e.removeHLSJS(h)},d.mux.removeDashJS=function(){e.removeDashJS(h)},e.init(h,n),e.emit(h,"playerready"),d.paused||(e.emit(h,"play"),d.readyState>2&&e.emit(h,"playing")),d.mux.listeners={},void l.forEach(function(t){("error"!==t||n.automaticErrorTracking)&&(d.mux.listeners[t]=function(){var n={};"error"===t&&(n.player_error_code=d.error&&d.error.code,n.player_error_message=d.error&&u[d.error.code]),e.emit(h,t,n)},d.addEventListener(t,d.mux.listeners[t],!1))})):p.error("No element was found with the `"+h+"` query selector.")};var a=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(9),l=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],u={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(52),a=r(i),s=n(2),o=r(s),l=n(53),u=r(l),c=n(54),d=r(c),h=n(1),f=r(h),p=n(8),g=r(p),v=n(5),m=n(3),y=r(m),_={};_.safeCall=a.default,_.safeIncrement=o.default,_.getComputedStyle=u.default,_.secondsToMs=d.default,_.assign=f.default,_.headersStringToObject=g.default,_.extractHostnameAndDomain=v.extractHostnameAndDomain,_.extractHostname=v.extractHostname,_.now=y.default.now,t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var a=r;if(e&&"function"==typeof e[t])try{a=e[t].apply(e,n)}catch(e){i.default.info("safeCall error",e)}return a};var r=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(i.default.defaultView&&i.default.defaultView.getComputedStyle)return i.default.defaultView.getComputedStyle(e,null).getPropertyValue(t)};var r=n(12),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Math.floor(1e3*e)}}])},"C/ht":function(e,t,n){"use strict";var r,i;r=[n("d6sQ"),n("VObA")],void 0===(i=function(e,t){return e.extend({className:"Embeddable__expandable Embeddable__subtitles",propsDefaults:{activeSubtitle:null,languages:[]},propsEvents:{"change:activeSubtitle":"renderActiveSubtitle","change:languages":"render"},initialize:function(){this.adoptView(e),this.initializeProps(),this.initializeState()},render:function(){var e=this.props.get("languages");return e&&e.length&&(this.$el.html(t({languages:e})),this.renderActiveSubtitle()),this},renderActiveSubtitle:function(){var e=this.props.get("activeSubtitle"),t="Embeddable__subtitles__language--active checkable--checked",n=this.find("a.Embeddable__subtitles__language");n.removeClass(t),e&&n.filter("[data-code="+e+"]").addClass(t)}})}.apply(t,r))||(e.exports=i)},DGZq:function(e,t,n){"use strict";(function(e){var r,i;r=[n("lU1m")],void 0===(i=function(e){var t={get:function(){return e.get("_ga")},getClientId:function(){var e=String(t.get()),n=e.split(".")[2]+"."+e.split(".")[3];return-1===n.indexOf("undefined")?n:void 0}};return t}.apply(t,r))||(e.exports=i)}).call(this,n("RoC8")(e))},Dx5M:function(e,t,n){"use strict";var r,i;r=[n("d6sQ"),n("MRb2")],void 0===(i=function(e,t){return e.extend({className:"Embeddable__expandable Embeddable__playlist",initialize:function(e){this.talks=e.talks,this.initializeState(),this.initializeProps()},render:function(){return this.$el.html(t({talks:this.talks.toJSON()})),this}})}.apply(t,r))||(e.exports=i)},EFFf:function(e,t,n){"use strict";var r;void 0===(r=function(){return function(e){throw new Error("Error in TED: "+e)}}.call(t,n,t,e))||(e.exports=r)},ELgS:function(e,t,n){var r;!function(){var n=this,i="_q",a=[];function s(e,t){var n=e.split(".").reverse(),r=n.length,i=t;for(t=null;r&&i;)t=i,i=i[n[r-=1]];return!!i&&{p:i,c:t}}function o(e,t,n){for(var r,i=t.length;i--&&!r;)r=s(e,t[i]);r&&r.p.apply||function(e){throw new Error(e)}("No such method: "+e),r.p.apply(r.c,n)}function l(e,t){o(e[0],[n,t.modules],e.slice(1))}function u(e){return a.slice.apply(e)}function c(e,t){for(var n=-1,r=e.length;++n<r;)t.callback(u(e[n]),t)}function d(e){e||(e={}),e.q=e.q||i,"string"==typeof e.q&&(e.q=n[e.q]),e.callback=e.callback||l,e.modules=e.modules||[],c(e.q.splice(0),e),e.q.push=function(){c(u(arguments),e)}}void 0===(r=function(){return d}.apply(t,[]))||(e.exports=r)}()},EUOL:function(e,t,n){"use strict";var r,i;r=[n("O074"),n("5cge"),n("jn94")],void 0===(i=function(e,t,n){var r,i,a=[320,480,600,768,1024,1200],s=1024,o=e("html").is(".oldie"),l=a.length,u=[{at:0,its:"oh"},{at:480,its:"xs"},{at:768,its:"sm"},{at:1024,its:"lg"}],c=u.length;function d(){var e=0,t=l;if(r=window.innerHeight,i=window.innerWidth||document.documentElement.clientWidth,o)e=s;else for(;t--;)!e&&i>=a[t]&&(e=a[t]);n("breakpoint").publishUnique(e),n("height").publishUnique(r),n("width").publishUnique(i)}return e(window).on("resize",t.throttle(d,100)),d(),n("breakpoint").subscribe(function(e){for(var t,r=c;r--;)!t&&e>=u[r].at&&(t=u[r].its);n("sizeGroup").publishUnique(t)}),n}.apply(t,r))||(e.exports=i)},HQPd:function(e,t,n){"use strict";var r,i;r=[n("5cge"),n("yAjw")],void 0===(i=function(e,t){return t.Model.extend({toPlayer:function(){var t=this.toJSON(),n=t.resources||{},r=n.hls||{},i=n.h264&&n.h264[0]||{};return{id:t.id,slug:t.slug,mediaIdentifier:t.mediaIdentifier,mediaProjectVersionIdentifier:t.mediaProjectVersionIdentifier,resources:{hls:{stream:r.stream,metadata:r.metadata,adUrl:r.adUrl,maiTargeting:r.maiTargeting||{}},h264:[{file:i.file}]},duration:t.duration,introDuration:t.introDuration,adDuration:t.adDuration,postAdDuration:t.postAdDuration,nativeLanguage:t.nativeLanguage,languages:e.map(t.languages||[],function(e){return{languageName:e.languageName,languageCode:e.languageCode,isRtl:e.isRtl}})}}})}.apply(t,r))||(e.exports=i)},IVfQ:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)t.push(arguments[r]);var i=1;null!=n.hash.level?i=n.hash.level:n.data&&null!=n.data.level&&(i=n.data.level),t[0]=i,e.log.apply(e,t)})},e.exports=t.default},Ivfv:function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};void 0===(r=function(){return function(e){var t=Array.prototype.slice.call(e,0),n=t[t.length-1];return n&&"object"===(void 0===n?"undefined":i(n))&&n.data&&n.hash&&n.name&&t.pop(),t}}.call(t,n,t,e))||(e.exports=r)},JNxy:function(e,t,n){var r=n("O074"),i=n("+cYh"),a=n("BjwM");function s(e){return window.JSON?window.JSON.stringify(e):e}function o(e){var t={};return function(n){var i,a=n&&t[n];if(!a){i=r.Callbacks(e&&e.hasOwnProperty(n)?e[n]:"memory");var o=function(){var e=Array.prototype.slice.call(arguments,0);try{i.fire.apply(i,e)}catch(e){window.console&&window.console.warn&&window.console.warn(e)}};a={publish:o,subscribe:i.add,unsubscribe:i.remove,once:function(){var e=arguments;return i.add(function t(){!function e(t,n,i){var a,s;for(a=0,s=n.length;a<s;a++)r.isArray(n[a])?e(t,n[a],i):n[a].apply(t,i)}(i,e,arguments),i.remove(t)})}};var l=null,u=null;i.add(function(e){l=e,u=s(e)}),a.publishUnique=function(e){s(e)!==u&&o.call(i,e)},a.read=function(){return l},n&&(t[n]=a)}return a}}function l(e,t){return-1!==String(window&&window.document&&window.document.cookie).indexOf("_abby_"+e+"="+t)}var u={isSegment:l,isTreatment:function(e,t){return-1!==decodeURIComponent(String(window&&window.location&&window.location.search)).indexOf("abby["+e+"]="+t)||l(e,t)}};function c(e){var t=this,n=r("<div></div>").css({display:"none",position:"absolute",top:"0",left:"0",width:"100%",height:"100%"});function i(){setTimeout(function(){t.$ad.show(),t.$unpauser.hide()},2e3)}t.$ad=n.clone(),t.$unpauser=n.clone(),t.$ad.on("click",function(){t.$unpauser.show(),t.$ad.hide(),e.pause(),e.topic("play").once(i)}),t.$unpauser.on("click",function(){e.play()}),r(e.el).after(t.$ad),r(e.el).after(t.$unpauser)}function d(e){return e=e||window&&window.location&&window.location.href||"",Boolean(e.match(/[?&]rid(?:[=&].*)?$/))}r.extend(c.prototype,{el:function(){return this.$ad.get(0)},show:function(){this.$ad.show(),this.$unpauser.hide()},hide:function(){this.$ad.hide(),this.$unpauser.hide()}}),c.forPlayer=function(e){return e._clickOverlay||(e._clickOverlay=new c(e)),e._clickOverlay};var h,f={},p=[],g=[];function v(e){return Math.max(e.end-e.start,0)}function m(e){e.dai=e.dai||{},e.dai.request&&e.dai.request.reject(new Error("DAI request replaced")),e.dai.companions&&(e.dai.companions.reject(new Error("DAI request replaced")),e.dai.request||(e.options&&e.options.maiAdUnitId)===(e.defaults&&e.defaults.maiAdUnitId)||e.throwError({message:["The DAI request was replaced before companion ads were obtained.","This sometimes indicates a bad ad unit. Is the custom ad unit",e.options.maiAdUnitId,"correct?"].join(" "),severity:"warning"})),e.dai.streamId=void 0;var t=r.Deferred();e.dai.companions=t,t.always(function(){e.dai.companions=null});var n=r.Deferred();e.dai.request=n,n.always(function(){e.dai.request=null}),n.fail(function(e){t.reject(e)});var i=[n.promise(),t.promise()];return e.options.dai?(function(){if(h)return h;var e=r.Deferred();return h=e.promise(),r.ajax({url:"https://imasdk.googleapis.com/js/sdkloader/ima3_dai.js",dataType:"script",timeout:2e3}).done(function(){var t=window.google;return t&&t.ima&&t.ima.dai&&t.ima.dai.api&&t.ima.dai.api.StreamManager?e.resolve(t):e.reject(new Error("IMA API not found"))}).fail(function(){return e.reject(new Error("IMA SDK could not load"))}),h}().done(function(t){var r=function(e){return e.mediaProjectVersionIdentifier||e.mediaIdentifier}(e.currentTalk);if(f.isMediaExcluded(r))n.reject(new Error("DAI is disabled for this media"));else if(f.isTalkExcluded(e.currentTalk.id))n.reject(new Error("DAI is disabled for this talk"));else{var i=function(e,t){if(e.dai.streamManager)return e.dai.streamManager;var n=new t.ima.dai.api.StreamManager(e.el);return n.setClickElement(c.forPlayer(e).el()),n.addEventListener([t.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,t.ima.dai.api.StreamEvent.Type.ERROR,t.ima.dai.api.StreamEvent.Type.LOADED,t.ima.dai.api.StreamEvent.Type.STARTED],function(n){switch(n.type){case t.ima.dai.api.StreamEvent.Type.STARTED:var r={creativeId:(h=n.getAd()).getCreativeId(),lineItemId:h.getAdId(),adSystem:h.getAdSystem(),dealId:h.getDealId(),advertiserName:h.getAdvertiserName(),title:h.getTitle(),universalAdIdRegistry:h.getUniversalAdIdRegistry(),universalAdIds:h.getUniversalAdIds().join(","),wrapperAdIds:h.getWrapperAdIds().join(","),wrapperAdSystems:h.getWrapperAdSystems().join(","),wrapperAdCreativeIds:h.getWrapperCreativeIds().join(",")};e.topic("currentAd").publish(r);for(var i={},a=h.getCompanionAds(),s=-1,o=a.length;++s<o;){var l=a[s].getContent();l&&(i[a[s].getWidth()+"x"+a[s].getHeight()]=l)}e.dai.companions&&e.dai.companions.resolve(i);break;case t.ima.dai.api.StreamEvent.Type.LOADED:if(e.dai.request){var u=n.getStreamData();e.dai.streamId=u&&u.streamId||"UNKNOWN",e.dai.request.resolve(u)}break;case t.ima.dai.api.StreamEvent.Type.ERROR:if(e.options.dai=!1,e.dai.request)return void e.dai.request.reject(new Error("DAI stream error"));var c=Number(e.topic("currentTime").read());e._setSourceFromCurrentTalk(),c>3&&(e.seek(c-1),e.play());break;case t.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED:var d,h=n.getStreamData();try{d=h&&h.cuepoints&&JSON.stringify(h.cuepoints)||""}catch(e){d=""}if(e.topic("streamCuepoints").publish(d),h&&h.cuepoints&&h.cuepoints.length){var f=h.cuepoints[0];h.cuepoints.length>1?(e.topic("streamPrerollDuration").publishUnique(v(f)),e.topic("streamPostrollDuration").publishUnique(v(h.cuepoints[h.cuepoints.length-1]))):f.start<1?(e.topic("streamPrerollDuration").publishUnique(v(f)),e.topic("streamPostrollDuration").publishUnique(0)):(e.topic("streamPrerollDuration").publishUnique(0),e.topic("streamPostrollDuration").publishUnique(v(f)))}}},!1),e.dai.streamManager=n,n}(e,t),a=new t.ima.dai.api.VODStreamRequest;a.contentSourceId=e.options.contentSourceId,a.videoId=r;var s={sz:"854x480",ciu_szs:"300x250,120x60"},o=e.options&&e.options.maiAdUnitId;o&&(s.iu=o),s.pp="DAI%20Video%20restrictions";var l=[],h=e.currentTalk.resources&&e.currentTalk.resources.hls&&e.currentTalk.resources.hls.maiTargeting;if(h)for(var p in h)l.push(encodeURIComponent(p)+"="+encodeURIComponent(h[p]));d()&&l.push("recommended=1"),h&&h.talk&&(s.description_url="https://www.ted.com/talks/"+h.talk),e.options.dfptest&&l.push("dfptest="+encodeURIComponent(e.options.dfptest)),u.isTreatment("post15s","b")&&l.push("abby=post15s%3Ab"),s.cust_params=l.join("&"),a.adTagParameters=s,i.requestStream(a),setTimeout(function(){e.dai.request&&n.reject(new Error("DAI stream timeout"))},2e3)}}).fail(n.reject),i):(n.reject(new Error("DAI is currently disabled")),i)}f.isMediaExcluded=function(e){return-1!==p.indexOf(e)},f.isTalkExcluded=function(e){return-1!==g.indexOf(Number(e))};var y={};function _(e,t){e.topic("talk.subtitles").publish(t)}function b(e){var t=new r.Deferred,n=t.promise();return r.when(function(e){var t,n=new r.Deferred,i=n.promise();e.topic;try{t=e.currentTalk.resources.hls.metadata}catch(t){return e.throwError({type:"init",message:"Missing HLS metadata URL for current talk",severity:"fatal"}),n.reject(),i}return t=y.augmentMediaUrl(t),r.getJSON(t).then(y.isConsusMedia(e.currentTalk)?function(t){for(var r=0,i=t.domains,a=i&&i.length||0,s=0;s<a&&i[s]&&!i[s].primaryDomain;s++)r+=i[s].duration||0;e.topic("streamIntroDuration").publish(r),n.resolve(t)}:function(t){var r=t.timing,i=r&&r.content&&r.content.start>0?+r.content.start:0;e.topic("streamIntroDuration").publish(i),n.resolve(t)}).fail(function(r,i,a){e.throwError({type:"init",message:"Error retrieving HLS metadata",severity:"fatal",details:{request:{url:t},response:{status:r.status,statusText:i}}}),n.reject()}),i}(e),function(e){var t,n,i=new r.Deferred,a=i.promise();try{t=e.currentTalk.resources.hls,n=y.augmentMediaUrl(t.stream)}catch(t){return e.throwError({type:"init",message:"Missing HLS stream resource.",severity:"fatal"}),i.reject(),a}function s(){e.topic("streamSource").publish(n),e.topic("streamPrerollDuration").publish(0),e.topic("streamPostrollDuration").publish(0),i.resolve()}if(!e.options||!e.options.dai||!e.options.maiAdUnitId)return s(),a;e.topic("streamPrerollDuration").publish(0),e.topic("streamPostrollDuration").publish(0);var o=m(e);return o[0].done(function(t){e.topic("streamSource").publish(t.url),i.resolve(t)}).fail(function(t){e.throwError({message:"DAI: "+t.message}),e.options.dai=!1,s()}),o[1].done(function(t){e.topic("ad.companions").publish(t)}),a}(e)).done(function(n,r){r?_(e,y.getSubtitlesFromTalkAndDaiAd(e.currentTalk,r)):n&&n.subtitles?_(e,y.getSubtitlesFromMetadata(n)):y.isConsusMedia(e.currentTalk)?e.throwError({message:"Cannot obtain subtitles"}):_(e,y.getSubtitlesFromSymfonyTalk(e.currentTalk)),e._setSource(e.topic("streamSource").read()),e.setTitle(e.currentTalk&&e.currentTalk.name),t.resolve()}).fail(function(){t.reject()}),n}y.augmentMediaUrl=function(e){var t=[];return e.match(/\/\/hls\.ted\.com\/(talks|videos)\//)&&t.push("qr"),e.indexOf("/talks/")>0&&!e.match(/\?.*(nobumpers|preroll=)/)&&t.push("preroll=newshortintro_053119"),t.length&&(e=e+(-1===e.indexOf("?")?"?":"&")+t.join("&")),e},y.getSubtitlesFromMetadata=function(e){if(!(e&&e.subtitles&&e.subtitles.length))return[];for(var t=[],n=e.subtitles.length;n--;){var r=e.subtitles[n];t.push({label:r.name,src:r.webvtt,srclang:r.code})}return t},y.getSubtitlesFromSymfonyTalk=function(e){if(!(e&&e.languages&&e.languages.length&&e.resources&&e.resources.hls&&e.resources.hls.stream))return[];for(var t=y.augmentMediaUrl(e.resources.hls.stream),n=String(t).split("?")[1].replace(/uniqueId=[^&]*/i,"").replace(/&+/,"&").replace(/^&/,"").replace(/&$/,""),r=[],i=e.languages.length;i--;){var a=e.languages[i];r.push({label:a.languageName,src:"https://hls.ted.com/talks/"+e.id+"/subtitles/"+a.languageCode+"/full.vtt?"+n,srclang:a.languageCode})}return r},y.getSubtitlesFromTalkAndDaiAd=function(e,t){if(!(e&&e.languages&&e.languages.length&&t&&t.subtitles&&t.subtitles.length))return[];for(var n={},r=e.languages.length;r--;){var i=e.languages[r];n[i.languageCode]=i.languageName}for(var a=[],s=t.subtitles.length;s--;){var o=t.subtitles[s];n[o.language]&&a.push({label:n[o.language],src:o.webvtt,srclang:o.language})}return a},y.isConsusMedia=function(e){return Boolean(e.mediaProjectVersionIdentifier)};var A=Math.floor(9999*Math.random());function E(e){return e.id||(e.id="ted-player-"+A++),e.id}var w={h264:function(e){var t,n=e.options,i=r("<video>"),a=E(n.el);e.currentTalk=n.talks[0],t=e.currentTalk.resources.h264[0].file,i.attr(n.attrs),i.attr("preload","none"),i.attr("id",a),r(n.el).replaceWith(i),e.el=i[0],e.setTitle(e.currentTalk.name),e._setSource(t),e.topic("ready.dom").publish()},hls:function(e){var t=e.options,n=r("<video>"),i=E(t.el);e.currentTalk=t.talks[0],n.attr(t.attrs),n.attr("id",i),r(t.el).replaceWith(n),e.el=n[0],e.setTitle(e.currentTalk.name),b(e).always(function(){e.topic("ready.dom").publish()})},hlsjs:function(e){var t=e.options,n=r("<video>"),i=E(t.el);e.currentTalk=t.talks[0],n.attr(t.attrs),n.attr("id",i),n.attr("crossorigin","anonymous"),r(t.el).replaceWith(n),e.el=n[0],e.setTitle(e.currentTalk.name),b(e).always(function(){e.topic("ready.dom").publish()})}};var S=window.navigator&&window.navigator.userAgent||"";function T(){return!!S.match(/(Android|iPad|iPhone|iPod|KaiOS|UCBrowser)/gi)}T.isKaiOS=function(){return!!S.match(/\bKaiOS\/([\d\.]+)/i)};var k=document,x=k.createElement("video"),D=k.createElement("track"),C={fullScreenMode:function(){return x.requestFullScreen?!!k.fullscreenEnabled&&"standard":x.mozRequestFullScreen?!!k.mozFullScreenEnabled&&"moz":x.webkitRequestFullScreen?!!k.webkitFullscreenEnabled&&"webkit":x.webkitEnterFullscreen?"webkitVideo":!!x.msRequestFullscreen&&(!!k.msFullscreenEnabled&&"ms")},canPlaybackRate:function(){return!(!x.playbackRate||x.playbackRate!==x.defaultPlaybackRate)},canPopOut:function(){return"function"==typeof x.webkitSupportsPresentationMode},canVolume:function(){return!T()||T.isKaiOS()},canHtml5Subtitle:function(){return!!(((x&&D&&"function"==typeof x.addTextTrack&&"kind")in D&&"crossOrigin")in x)}},R=document.createElement("video");function L(e){return R.canPlayType(e).replace(/^no$/,"")}function P(e){var t=navigator.userAgent.toLowerCase(),n=(t.indexOf("windows nt")>-1&&t.indexOf("; arm;"),e.modes||(String(window.navigator&&window.navigator.userAgent||"").match(/\bEdge\/[\d\.]+/i)?["hlsjs","hls","h264"]:["hls","hlsjs","h264"])),r=(String(t).match(/\sandroid ([\d]+)/)||[])[1],a=(String(t).match(/\schrome\/([\d]+)/)||[])[1],s=(t.indexOf("windows nt 6.")>-1&&t.indexOf("; rv:11.")>-1&&t.indexOf("; Touch"),{h264:function(){return!(!R.canPlayType||!L('video/mp4; codecs="avc1.42E01E"'))},hls:function(){return!(!R.canPlayType||-1!==t.indexOf("kaios")||-1!==t.indexOf("android")||-1!==t.indexOf("googletv")||!L("application/vnd.apple.mpegURL")&&!L("application/x-mpegURL"))},hlsjs:function(){return!(!R.canPlayType||-1!==t.indexOf("windows phone")||r&&!(r>=5)||a&&!(a>=34)||!i.isSupported())}});if(e.mode&&-1!==s[e.mode])return!!s[e.mode]()&&e.mode;try{for(var o=-1,l=n.length;++o<l;)if(s[n[o]]())return n[o]}catch(e){}return!1}var I=["hls","hlsjs","h264"];var O=["el","talks"];function N(e,t,n,i){var a,s=0;"boolean"!=typeof t&&(i=n,n=t,t=void 0);var o=function(){var r=this,o=+new Date-s,l=arguments;function u(){s=+new Date,n.apply(r,l)}i&&!a&&u(),a&&clearTimeout(a),void 0===i&&o>e?u():!0!==t&&(a=setTimeout(i?function(){a=void 0}:u,void 0===i?e-o:e))};return r.guid&&(o.guid=n.guid=n.guid||r.guid++),o}var M=Math.pow(2,53)-1;function F(e){return e.mediaProjectVersionIdentifier||e.mediaIdentifier}function U(e,t){e.topic("ad").publish({contentSourceId:(e.options||{}).contentSourceId,videoId:F(e.currentTalk||{}),companions:t||{},custParams:r.extend({},(((e.currentTalk||{}).resources||{}).hls||{}).maiTargeting||{},e.options&&e.options.dfptest?{dfptest:e.options.dfptest}:{},d()?{recommended:"1"}:{}),token:Math.floor(Math.random()*M).toString(36)+"-"+(new Date).getTime().toString(36)})}function B(e){e.ads={last:{}},e.topic("ad").subscribe(function(t){t&&e.ads&&(e.ads.last=t)}),e.topic("ad.companions").subscribe(function(t){var n=!!t&&Object.getOwnPropertyNames(t).length>0,r=F(e.currentTalk||{}),i=e.ads&&e.ads.last&&r!==e.ads.last.videoId;(n||i)&&U(e,t)}),U(e)}function j(e,t){if(!e.languages||!t)return!1;for(var n=e.languages.length;n--;)if(e.languages[n].languageCode===t)return e.languages[n];return!1}function q(e){var t=e.options.talks.length;return t<=1||e.currentTalk.id===e.options.talks[t-1].id}function H(e){var t,n=e.topic;function r(){return e.options.customSubtitles&&!n("subtitleCue.unavailable").read()?"hidden":"showing"}function i(){var e=r();t&&t.mode!==e&&(t.mode=e)}function a(){t&&n("subtitleCue.unnormalized").publish("hidden"===t.mode&&(t.activeCues&&t.activeCues[0]&&t.activeCues[0].text?String(t.activeCues[0].text):""))}function s(e){e&&(e.mode="disabled",e.removeEventListener("cuechange",a))}n("subtitleCue.unavailable").subscribe(i),n("subtitle.track").subscribe(function(e){e&&e!==t&&(s(t),function(e){e&&(e.addEventListener("cuechange",a),e.mode=r())}(t=e))}),n("subtitle").subscribe(function(e){!e&&t&&(s(t),t=void 0)}),n("nativeControls").subscribe(function(e){n("subtitleCue.unavailable").publish(e)}),n("subtitleCue.unnormalized").subscribe(N(5e3,i))}function G(e){var t=e.topic,n=e.el,i=r(n);!function(e){var t=e.topic,n={};t("play").subscribe(function(){n={}}),t("talkComplete.unnormalized").subscribe(function(){var r=e.currentTalk||{};n.id&&r.id==n.id||t("talkComplete").publish(r),n=r})}(e),function(e){e.topic("bufferUnplayable.unnormalized").subscribe(function(t){e.topic(t?"bufferUnplayable":"bufferPlayable").publish()})}(e);var a=!1;function s(){t("bufferUnplayable.unnormalized").publishUnique(!1)}function o(){var n=e.currentTalk&&e.currentTalk.id;t("bufferUnplayable.unnormalized").read()||t("play.unnormalized").read()!==n||a&&t("play").publish()}function l(){a&&t("streamDuration").publishUnique(n.duration)}function u(){t("video.seekable").publishUnique(n.readyState>=2)}function c(){var n=t("subtitle.pending").read();null!==n&&e.subtitle(n)}t("ready.sourceSet").subscribe(function(e){a=e}),r.each(["seeked","seeking"],function(e,n){i.on(n,function(){a&&t(n).publish()})}),i.on("pause",function(){a&&t("pause").publish()}),i.on("canplay",s),i.on("canplaythrough",s),i.on("timeupdate",N(100,function(){a&&t("streamTime").publishUnique(n.currentTime)})),i.on("durationchange",l),i.on("ended",function(){a&&(t("talkComplete.unnormalized").publish(),t("complete").publish(e.currentTalk))}),i.on("error",function(t){var r=n&&n.error&&n.error.code;MediaError&&MediaError.MEDIA_ERR_DECODE===r&&"hls"===e.mode&&e.recover()&&e.topic("recovering").read()||MediaError&&MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED===r&&"hls"===e.mode&&e.dai&&e.dai.streamId&&e.options.dai&&e.recover()&&e.topic("recovering").read()||e.throwError({message:"Error playing video, code "+(r||"unknown")})}),i.on("volumechange",function(){a&&(t("volume").publishUnique(Math.round(1e3*+n.volume)/1e3),t("muted").publishUnique(n.muted))}),i.on("webkitpresentationmodechanged",function(e,n){t("popOut").publishUnique("picture-in-picture"===e.target.webkitPresentationMode)}),i.on("loadstart",function(){a&&t("bufferUnplayable.unnormalized").publishUnique(!0)}),i.on("waiting",function(){a&&t("bufferUnplayable.unnormalized").publishUnique(!0)}),i.on("suspend",function(){a&&t("bufferUnplayable.unnormalized").publishUnique(!1)}),i.on("canplay",u),i.on("canplaythrough",u),i.on("loadeddata",u),i.on("loadedmetadata",u),i.on("loadstart",u),t("video.seekable").subscribe(function(e){e&&l()}),i.on("loadeddata",c),t("talk.language").subscribe(c),i.on("play",function(){t("play.unnormalized").publish(e.currentTalk&&e.currentTalk.id)}),t("play.unnormalized").subscribe(o),t("bufferPlayable").subscribe(o),t("talk.id").subscribe(function(){t("talk").publishUnique(e.currentTalk)}),t("ready").subscribe(function(){e.currentTalk&&t("talk.id").publishUnique(e.currentTalk.id)}),t("complete").subscribe(function(){var t=Number(e.topic("streamDuration").read());Number(e.topic("streamTime").read())<t-2&&e.throwError({message:"Premature publication of completion"})}),H(e),n.textTracks&&n.textTracks.addEventListener&&n.textTracks.addEventListener("change",N(100,function(r,i,a){for(var s,o,l=n.textTracks.length,u=!1,c=!1;l--;)o=!1,((s=n.textTracks[l])&&"hidden"===s.mode||"showing"===s.mode)&&(o=j(e.currentTalk,(s.language||"").toLowerCase())),o&&(u=o,c=s);c&&t("subtitle.track").publish(c),t("subtitle").publishUnique(u)},!0))}function V(e){var t=e.el,n=e.topic;r(t).on("canplay",function(){n("talk.language").publish(e.currentTalk)})}function K(e){var t=e.topic;t("talk.subtitles").subscribe(function(n){r(e.el).append(function(e){var t=r();if(!e||!e.length)return t;for(var n=e.length;n--;){var i=e[n];t=t.add(r("<track>").attr("kind","subtitles").attr("label",i.label).attr("src",i.src).attr("srclang",i.srclang))}return t}(n)),t("talk.language").publish(e.currentTalk)}),t("streamTime").subscribe(function(n){var r="",i="",a="",s="",o="";if(e.hlsjs&&e.options.metrics){try{r=Math.floor(e.hlsjs.abrController&&e.hlsjs.abrController.bwEstimator?e.hlsjs.abrController.bwEstimator.getEstimate():e.hlsjs.config.abrEwmaDefaultEstimate);var l=K.splitBuffered(e.el.buffered,n,Math.max(0,e.hlsjs.config.maxBufferHole,e.hlsjs.config.maxFragLookUpTolerance));a=l[0],i=l[1];var u=K.splitBuffered(e.el.buffered,n,0);o=u[0],s=u[1]}catch(e){}t("metricsData").publish({bandwidth:r,bufferLength:i,backBufferLength:a,intolerantBufferLength:s,intolerantBackBufferLength:o,currentLevel:e.hlsjs.currentLevel,nextLevel:e.hlsjs.nextLevel,loadLevel:e.hlsjs.loadLevel,nextLoadLevel:e.hlsjs.nextLoadLevel})}})}K.splitBuffered=function(e,t,n){if(!e||!e.length)return[0,0];var r,i,a,s,o,l=e.length;for(o=-1;++o<l&&(r=e.start(o),i=e.end(o),!(Math.max(t,s||0)+n<r));)(!a||s+n<r)&&(a=r,s=i),t-n<i&&(s=i);return[Math.max(t-a,0),Math.max(s-t,0)]};var W=a||window.mux,$=+new Date;function z(e){var t=(e=e||{}).currentTalk||e.talks&&e.talks[0]||{},n=e.options||{},r=e.options.subproperty,i="PaRappa: "+({h264:"MP4",hls:"HLS (built-in)",hlsjs:"hls.js"}[e.mode]||"no")+" tech"+(r?" ("+r+")":""),a={env_key:n.muxEnvKey,page_type:"embed"===r?"iframe":"watchpage",player_name:i,player_version:"3.9.3",player_init_time:$,video_id:t.id,video_title:t.slug},s=u.isSegment("post15s","a")?"cerf":u.isSegment("post15s","b")?"hopper":void 0;s&&(a.experiment_name=s),r&&(a.sub_property_id=r),e.dai&&e.dai.streamId&&e.options.dai&&(a.video_variant_name="DAI Stream",a.video_variant_id=e.dai.streamId);var o=String(window.navigator&&window.navigator.userAgent||"");o.match(/\b(?:i?Canvas(?:Kit)?|candroid)\/[\d\.]+/i)&&(a.viewer_application_name="Canvas");var l=o.match(/\bKaiOS\/([\d\.]+)/i);return l&&(a.viewer_application_name="KaiOS Browser",a.viewer_os_family="KaiOS",a.viewer_os_version=l[2]),a}function Y(e){!function(e){var t=(e=e||{}).options||{},n="hlsjs"===e.mode;W.monitor(e.el,{debug:t.muxDebug||!1,hlsjs:n?e.hlsjs:void 0,Hls:n?i:void 0,data:z(e)})}(e)}function X(e){window.console&&window.console.warn&&window.console.warn("PaRappa: "+e)}function Q(e){if((e.options||{}).mux)if(W&&W.monitor&&"function"==typeof W.monitor)if((e.options||{}).muxEnvKey){var t,n=e.topic;n("ready.sourceSet").subscribe(function(){t!==e.el.src&&(Y(e),t=e.el.src)}),n("prerollStart").subscribe(r),n("prerollComplete").subscribe(i),n("postrollStart").subscribe(r),n("postrollComplete").subscribe(i),n("prerollComplete").subscribe(function(){W.emit(e.el,"playing")}),function(e,t,n){var r,i,a;function s(e){(!a||Math.abs(e-a)>0)&&(a=e,i=Date.now())}function o(){Date.now()-i>=n&&(u(),t())}function l(){r||(i=Date.now(),r=setInterval(o,1e3))}function u(){r&&(clearInterval(r),r=null)}e.on("streamTime",s),e.on("play",l),e.on("complete",u),e.on("ended",u),e.on("error",u),e.on("pause",u)}(e,function(){W.emit(e.el,"error",{player_error_code:100,player_error_message:"Playback stalled for more than 5 minutes"})},3e5),function(e){if("hlsjs"===e.mode){var t,n,r,i=e.topic;a(),i("error").subscribe(function(e){e&&e.details&&e.details.code&&("fatal"===e.severity||"abortive"===e.severity)&&(t=e.details.code,n=e.message,s())}),i("bufferUnplayable").subscribe(function(){r=!0,s()}),i("bufferPlayable").subscribe(function(){r=!1,s()})}function a(){t=null,n=null,r=!1}function s(){t&&n&&r&&(W.emit(e.el,"error",{player_error_code:t,player_error_message:n}),a())}}(e)}else X("Mux environment key is missing.");else X("Mux library is missing.");function r(t){W.emit(e.el,"adplaying",{ad_asset_url:"https://admanager.google.com/5641#delivery/CreativeDetail/creativeId="+t.creativeId})}function i(){W.emit(e.el,"adended")}}function J(e){var t=e.mode,n=e.topic;switch(t){case"h264":G(e),Q(e);break;case"hls":B(e),G(e),V(e),Q(e);break;case"hlsjs":B(e),G(e),V(e),K(e),Q(e);break;default:return void e.throwError({type:"init",message:"No handlers found for unrecognized player mode: "+t,severity:"fatal"})}n("ready.handlers").publish(),n("duration").subscribe(function(t){e.currentTalk&&(e.currentTalk.duration=t)}),n("complete").subscribe(function(){q(e)?n("ended").publish(e.currentTalk):e.playNext()}),n("popOut").subscribe(function(t){e.config.set("popOut",t)}),n("play").once(function(){e.config.get("popOut")&&e.popOut(!0)}),n("play").once(function(){var t=n("streamPrerollDuration").read(),r=n("streamPostrollDuration").read();!t&&r>0&&e.throwError({message:"Stream has postroll without preroll",severity:"warning"})}),function(t){var n,r=0,i=0,a=null,s=0,o=0,l=.2,u=.06,d=!1,h=!1,f=!1,p=!1,g=!1;function v(){(g=e.el.getAttribute("controls"))&&e.el.removeAttribute("controls"),c.forPlayer(e).show()}function m(){c.forPlayer(e).hide(),g&&e.nativeControls(!0)}function y(){var e,c=n-s-o;!n||n<l||(t("duration").publishUnique(c),i=r-s,t("currentTime").publishUnique(Math.max(0,i)),null!==a&&t("contentTime").publishUnique(Math.round(1e3*(i-a))),t("progress").publishUnique(i/c),s>0&&r>u&&r<=s&&(t("prerollDuration").publishUnique(s),t("prerollRemaining").publishUnique(Math.max(0,s-r)),f||(e=t("currentAd").read())&&(f=!0,v(),t("prerollStart").publish(e))),f&&s>0&&(r<=u||r>s)&&(f=!1,m(),t("prerollComplete").publish(t("currentAd").read()||null),t("currentAd").publish(null)),!d&&i>u&&i<c&&(d=!0,t("tedStart").publish()),a>0&&i>u&&i<=a&&(t("introDuration").publishUnique(a),h||(h=!0,t("introStart").publish())),h&&a>0&&(i<=u||i>a)&&(h=!1,t("introComplete").publish()),d&&i>=c&&(d=!1,t("talkComplete.unnormalized").publish(),t("tedComplete").publish()),o>0&&i>=c&&(t("postrollDuration").publishUnique(o),t("postrollRemaining").publishUnique(Math.max(0,n-r)),p||(e=t("currentAd").read())&&(p=!0,v(),t("postrollStart").publish(e))),p&&o>0&&(r>=n||i<c)&&(p=!1,m(),t("postrollComplete").publish(t("currentAd").read()),t("currentAd").publish(null)))}function _(){t("video.seekable").read()&&t("duration").read()>=l&&t("ready.seekable").publishUnique(!0)}t("streamTime").subscribe(function(e){r=e,y()}),t("video.seekable").subscribe(_),t("streamDuration").subscribe(function(e){!e||e<l||(n=e,y(),_())}),t("streamIntroDuration").subscribe(function(e){a=e,y()}),t("streamPrerollDuration").subscribe(function(e){s=e>0?+e:0,y()}),t("streamPostrollDuration").subscribe(function(e){o=e>0?+e:0,y()}),t("talk").subscribe(function(e){r=0,d=!1,h=!1,f=!1,p=!1,t("progress").publishUnique(0),null!==a&&t("contentTime").publishUnique(0)}),t("progress").publishUnique(0),null!==a&&t("contentTime").publishUnique(0)}(n),function(e){var t=!1,n=!1;function r(){e("streamAds").publishUnique({preroll:t,postroll:n})}e("streamPrerollDuration").subscribe(function(e){t=e>0,r()}),e("streamPostrollDuration").subscribe(function(e){n=e>0,r()})}(n),n("talk.language").subscribe(function(t){if(e.subtitle){var n=j(t,e.config.get("languageCode"));n||"string"!=typeof e.options.defaultSubtitles||(n=j(t,e.options.defaultSubtitles)),n||!t.isSubtitleRequired&&t.nativeLanguage===e.options.nativeLanguage&&!0!==e.options.defaultSubtitles||(n=j(t,e.options.nativeLanguage)),n?e.subtitle(n.languageCode,!1):e.subtitle(!1,!1)}}),n("ready.sourceSet").subscribe(function(){n("ready.sourceSetting").publishUnique(!1)}),function(e){var t,n=e.options.customSubtitles,r=!0,i=e.topic;function a(){t&&i("subtitleCue").publishUnique("")}function s(){n&&r&&i("subtitleCue").publishUnique(t&&String(t).replace("\n","<br />")||!1)}i("seeking").subscribe(a),i("talk").subscribe(a),i("talkComplete").subscribe(a),i("subtitleCue.unavailable").subscribe(function(e){e?(r=!1,a()):(r=!0,s())}),i("subtitleCue.unnormalized").subscribe(function(e){t=e,s()}),i("subtitle").subscribe(function(e){e||a()})}(e)}var Z="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAABZVtZGF0AAACvwYF//+73EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDEyOSByMjIyOE0gYjMwNGE3YyAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTIgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0xIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDM6MHgxMTMgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTEgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz0xMiBsb29rYWhlYWRfdGhyZWFkcz0yIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MiBrZXlpbnQ9MjUwIGtleWludF9taW49MjMgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD00MCByYz1hYnIgbWJ0cmVlPTEgYml0cmF0ZT04NTAgcmF0ZXRvbD0xLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IGlwX3JhdGlvPTEuNDAgYXE9MToxLjAwAIAAAAB5ZYiEADv//vau/MsrdH6VLh1Ze7NR8uhJcv2IMH1oAAADAAADAAADAAEPmDjyj2JJkegAAAMAAnQAZQBBgDMAPYBTQIOAzgHeA3gIEBoAQwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwBWQQAAABVBmiRsQ7/+jLAAAAMAAAMAAAMAAdUAAAATQZ5CeIX/AAADAAADAAADAACXgQAAABMBnmF0Qr8AAAMAAAMAAAMAAO6AAAAAEwGeY2pCvwAAAwAAAwAAAwAA7oEAAAAbQZpoSahBaJlMCHf//oywAAADAAADAAADAAHVAAAAFUGehkURLC//AAADAAADAAADAACXgQAAABMBnqV0Qr8AAAMAAAMAAAMAAO6BAAAAEwGep2pCvwAAAwAAAwAAAwAA7oAAAAAbQZqsSahBbJlMCHf//oywAAADAAADAAADAAHVAAAAFUGeykUVLC//AAADAAADAAADAACXgQAAABMBnul0Qr8AAAMAAAMAAAMAAO6AAAAAEwGe62pCvwAAAwAAAwAAAwAA7oAAAAAcQZrwSahBbJlMCCP//qmWAAADAAADAAADAAA8IQAAABVBnw5FFSw3/wAAAwAAAwAAAwAAYsEAAAATAZ8tdEL/AAADAAADAAADAACXgQAAABMBny9qQ38AAAMAAAMAAAMAAGLAAAAAHUGbNEmoQWyZTAgx//7WpVAAAAMAAAMAAAMAAPuAAAAAFUGfUkUVLBP/AAADAAADAAADAAAJuQAAABMBn3F0QQ8AAAMAAAMAAAMAACtgAAAAEwGfc2pBTwAAAwAAAwAAAwAABSQAAAAdQZt3SahBbJlMCDX//tqmWAAAAwAAAwAAAwAA+4EAAAAVQZ+WQg1/AAADAAADAAADAAADAC2gAAAAFgGftWkQY/8AAAMAAAMAAAMAAAMArYEAAAQybW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAAA+oAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAA1x0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+oAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAA1YAAAHgAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPqAAAD6AABAAAAAALUbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAAu1AAALuBVxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACf21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAj9zdGJsAAAAl3N0c2QAAAAAAAAAAQAAAIdhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAA1YB4ABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAMWF2Y0MBZAAe/+EAGWdkAB6s2UDYPebwEQAAAwB9AAAXag8WLZYBAAVo6+yyLAAAABhzdHRzAAAAAAAAAAEAAAAYAAAB9AAAABRzdHNzAAAAAAAAAAEAAAABAAAA0GN0dHMAAAAAAAAAGAAAAAEAAAPoAAAAAQAACcQAAAABAAAD6AAAAAEAAAAAAAAAAQAAAfQAAAABAAAJxAAAAAEAAAPoAAAAAQAAAAAAAAABAAAB9AAAAAEAAAnEAAAAAQAAA+gAAAABAAAAAAAAAAEAAAH0AAAAAQAACcQAAAABAAAD6AAAAAEAAAAAAAAAAQAAAfQAAAABAAAJxAAAAAEAAAPoAAAAAQAAAAAAAAABAAAB9AAAAAEAAAfQAAAAAQAAA+gAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAGAAAAAEAAAB0c3RzegAAAAAAAAAAAAAAGAAAA0AAAAAZAAAAFwAAABcAAAAXAAAAHwAAABkAAAAXAAAAFwAAAB8AAAAZAAAAFwAAABcAAAAgAAAAGQAAABcAAAAXAAAAIQAAABkAAAAXAAAAFwAAACEAAAAZAAAAGgAAABRzdGNvAAAAAAAAAAEAAAAwAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1NS40My4xMDA=";function ee(e){var t=String(e).match(/\/\/([^/]+)/);return e&&"string"==typeof e&&t&&t[1]?t[1]:""}function te(e,t,n){var r=e.options.talks,i=r.length;for(n||(n=0);i--;)if(r[i].id==t)return r[i+n]}var ne={play:function(){this.topic("talk").publishUnique(this.currentTalk),this.el.play()},pause:function(){this.el.pause()},playTalk:function(e){var t=te(this,e);!t||this.currentTalk&&this.currentTalk.id==t.id?this.play():(this.currentTalk=t,this.topic("talk.id").publishUnique(t.id),this._setSource(t.resources.h264[0].file),this.setTitle(t.name),this.el.play())},mute:function(e){this.el.muted=e},seek:function(e){this.el.currentTime=e},volume:function(e){this.el.volume=e},_playbackRate:function(e){this.el.playbackRate=e},_setSource:function(e){this._unsetSource(),this.topic("ready.sourceSetting").publishUnique(!0);var t=this.currentTalk;this.topic("streamIntroDuration").publish(Number(t.introDuration)||null),this.el.src=e,this.topic("ready.sourceSet").publishUnique(!0),this.topic("streamHost").publish(ee(e))},_setSourceFromCurrentTalk:function(){var e=this.currentTalk;this._setSource(e.resources.h264[0].file),this.setTitle(e.name)},_unsetSource:function(e){this.topic("ready.sourceSet").publishUnique(!1),this.el.src=Z}};ne._setSource.early=!0,ne._setSourceFromCurrentTalk.early=!0,ne._unsetSource.early=!0;var re={play:function(){this.topic("talk.id").publishUnique(this.currentTalk.id),this.el.play()},pause:function(){this.el.pause()},playTalk:function(e){var t=te(this,e),n=this.topic;this.el;if(!t||this.currentTalk&&this.currentTalk.id==t.id)this.play();else{var r=this;this.currentTalk=t,b(this).done(function(){r.play()}).always(function(){n("talk.id").publishUnique(t.id)})}},mute:function(e){this.el.muted=e},seek:function(e){var t=this,n=t.el,r=t.playToken;n.addEventListener("loadeddata",function i(){t.playToken!==r||n.currentTime>=e?n.removeEventListener("loadeddata",i):n.seekable&&1===n.seekable.length&&n.seekable.end(0)>=e&&(n.removeEventListener("loadeddata",i),n.currentTime=e)}),n.currentTime=e},subtitle:function(e,t){var n=this.el,r=n.textTracks.length,i=j(this.currentTalk,e);if(r<=0)this.topic("subtitle.pending").publishUnique(e);else{e=(i&&i.languageCode||"").toLowerCase();for(var a,s=!1;r--;)(a=n.textTracks[r])&&(a.language||"").toLowerCase()===e?(this.topic("subtitle.track").publish(a),s=!0):a.mode="disabled";s||(i=!1),!1!==t&&this.config.set("languageCode",!!i&&e),this.topic("subtitle.pending").publishUnique(null),this.topic("subtitle").publishUnique(i)}},volume:function(e){this.el.volume=e},_playbackRate:function(e){this.el.playbackRate=e},_setSource:function(e){this._unsetSource(),this.topic("ready.sourceSetting").publishUnique(!0),this.el.src=e,this.topic("ready.sourceSet").publishUnique(!0),this.topic("streamHost").publish(ee(e))},_setSourceFromCurrentTalk:function(){this._unsetSource(),this.topic("ready.sourceSetting").publishUnique(!0),b(this,this.el)},_unsetSource:function(e){this.topic("ready.sourceSet").read()&&(this.topic("ready.sourceSet").publishUnique(!1),this.el.src=Z)}};re._setSource.early=!0,re._setSourceFromCurrentTalk.early=!0,re._unsetSource.early=!0;var ie={NONE:"NONE",FALLBACK:"FALLBACK",MEDIA:"MEDIA"};function ae(e,t){var n={attempts:0,epochOfLastAttempt:null,streamTimeOfLastAttempt:null};function r(t){switch(t){case ie.FALLBACK:return void function(){e.options.dai=!1;var t=Number(e.topic("currentTime").read());e._setSourceFromCurrentTalk(),t>3&&(e.seek(t-1),e.play())}();case ie.MEDIA:return void function(){var t=e.topic("streamTime").read();n.streamTimeOfLastAttempt!==t&&(n={attempts:0,epochOfLastAttempt:null,streamTimeOfLastAttempt:null}),n.attempts++,n.epochOfLastAttempt=+new Date,n.streamTimeOfLastAttempt=t,n.attempts>1&&e.hlsjs.swapAudioCodec(),e.hlsjs.recoverMediaError(),e.el&&e.el.play()}();default:return}}function a(t){var r=e.topic("streamTime").read();return t.fatal?e.options.dai?{type:ie.FALLBACK,reason:"DAI is enabled; fall back to stream without DAI."}:t.type===i.ErrorTypes.NETWORK_ERROR?{type:ie.NONE,reason:"Network recovery already attempted by hls.js."}:t.type===i.ErrorTypes.MEDIA_ERROR?n.streamTimeOfLastAttempt!==r?{type:ie.MEDIA,attempts:0,reason:"First media failure at this position."}:n.attempts>20?{type:ie.NONE,attempts:n.attempts,reason:"Too many media recovery attempts were made."}:n.epochOfLastAttempt&&function(e,t){return Math.abs(+new Date-e)<t}(n.epochOfLastAttempt,1e3)?{type:ie.NONE,attempts:n.attempts,reason:"Too soon after last media recovery attempt."}:{type:ie.MEDIA,attempts:n.attempts,reason:"Trying media again."}:{type:ie.NONE,reason:"No recovery path for this error."}:{type:ie.NONE,reason:"Error is not fatal."}}function s(e){var n=a(e),r={code:function(e){switch(e){case i.ErrorTypes.NETWORK_ERROR:return 2;case i.ErrorTypes.MEDIA_ERROR:return 3;default:return 100}}(e.type),streamUrl:t,request:{},response:{},recovery:n},s={message:"hls.js error: "+e.type+": "+e.details,severity:"info",details:r};switch(e.fatal&&(s.severity=n.type===ie.NONE?"fatal":"warning"),e.details){case i.ErrorDetails.MANIFEST_LOAD_ERROR:case i.ErrorDetails.LEVEL_LOAD_ERROR:r.request.url=e.url,r.response.status=e.response&&e.response.code||"",r.response.statusText=e.response&&e.response.text||"";break;case i.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case i.ErrorDetails.LEVEL_LOAD_TIMEOUT:r.request.url=e.url;break;case i.ErrorDetails.MANIFEST_PARSING_ERROR:r.request.url=e.url,r.reason=e.reason;break;case i.ErrorDetails.LEVEL_SWITCH_ERROR:r.level=e.level,r.reason=e.reason;break;case i.ErrorDetails.FRAG_LOAD_ERROR:case i.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case i.ErrorDetails.FRAG_LOAD_TIMEOUT:r.request.url=e.frag&&e.frag.url||"",r.response.status=e.response&&e.response.code||"",r.response.statusText=e.response&&e.response.text||"";break;case i.ErrorDetails.FRAG_PARSING_ERROR:r.reason=e.reason;break;case i.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR:r.request.url=e.url;break;case i.ErrorDetails.BUFFER_ADD_CODEC_ERROR:r.errMessage=e.err&&e.err.message||"",r.mimeType=e.mimeType;break;case i.ErrorDetails.BUFFER_APPEND_ERROR:r.request.url=e.frag&&e.frag.url||"";break;case i.ErrorDetails.BUFFER_SEEK_OVER_HOLE:r.hole=e.hole}return s}return function(t,n){var i=s(n);e.throwError(i),r(i.details.recovery.type)}}function se(e){var t=this;r.extend(t,{hls:e,restrictedLevels:[],_onFpsDropLevelCapping:function(e,n){t.onFpsDropLevelCapping(n)},_onManifestParsed:function(e,n){t.onManifestParsed(n)},_onMediaAttaching:function(e,n){t.onMediaAttaching(n)}}),e.on(i.Events.FPS_DROP_LEVEL_CAPPING,t._onFpsDropLevelCapping),e.on(i.Events.MANIFEST_PARSED,t._onManifestParsed),e.on(i.Events.MEDIA_ATTACHING,t._onMediaAttaching)}r.extend(se.prototype,{destroy:function(){var e=this.hls;e&&(e.off(i.Events.FPS_DROP_LEVEL_CAPPING,this._onFpsDropLevelCapping),e.off(i.Events.MANIFEST_PARSED,this._onManifestParsed),e.off(i.Events.MEDIA_ATTACHING,this._onMediaAttaching)),this.media=null,this.restrictedLevels=[],this.autoLevelCapping=-1,this.timer&&(this.timer=clearInterval(this.timer))},detectPlayerSize:function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.config.capQualityToStage&&(t.autoLevelCapping=this.getMaxLevel(e-1)),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},onFpsDropLevelCapping:function(e){this.isLevelRestricted(e.droppedLevel)||this.restrictedLevels.push(e.droppedLevel)},onManifestParsed:function(e){if(!T()){var t=this.hls;this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),this.timer&&clearInterval(this.timer),this.timer=setInterval(r.proxy(this.detectPlayerSize,this),2e3),this.detectPlayerSize()}},onMediaAttaching:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null},getMediaHeight:function(){var e=0,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight),e},getMaxLevel:function(e){var t,n,r,i,a,s=0,o=0;for(t=Math.max(480,this.getMediaHeight()),o=0;o<=e&&(r=(n=this.levels[o]).height,i=this.levels[o+1],!(r>t))&&!this.isLevelRestricted(o)&&!(a&&a.height===r&&t-r<100&&(!i||i.height>t));o++)s=o,a=n;return s},isLevelRestricted:function(e){return-1!==this.restrictedLevels.indexOf(e)}});var oe=0,le=1;function ue(e){e.on(i.Events.MANIFEST_PARSED,function(){e.firstLevel=oe,e.autoLevelCapping=le})}var ce=(window.navigator&&window.navigator.userAgent||"").match(/\bKaiOS\b/gi)?{autoLevelEnabled:!1,startLevel:oe,capQualityToStage:!1,capLevelController:ue,maxMaxBufferLength:300,maxBufferSize:5e6}:{},de={};function he(e){return e&&"object"==typeof e}function fe(e){if(!e||!e.length)return[];for(var t,n=e.filter(he),i=n.length;i--;){var a=String(n[i].resources&&n[i].resources.hls&&n[i].resources.hls.stream);-1===a.indexOf("preroll=")||a.indexOf("preroll=Blank");t=r.extend({index:i},n[i]),n[i]=t}return n}function pe(e,t){if(!t||!t.id)return e.throwError({type:"init",message:"Talk has no ID.",severity:"fatal"}),!1;if(!t.mediaIdentifier&&!t.mediaProjectVersionIdentifier)return e.throwError({type:"init",message:"Talk "+t.id+" has no media project version identifier.",severity:"fatal"}),!1;if(!t.resources)return e.throwError({type:"init",message:"Talk "+t.id+" has no associated media.",severity:"fatal"}),!1;var n=!1,r=!1;switch(e.mode){case"hls":case"hlsjs":n=!0;break;case"h264":r=!0}return!!(t.resources.hls&&t.resources.hls.stream||(e.throwError({type:"init",message:"Talk "+t.id+" has no hls stream resource.",severity:n?"fatal":"warning"}),!n))&&(!!(t.resources.hls&&t.resources.hls.metadata||(e.throwError({type:"init",message:"Talk "+t.id+" has no hls metadata resource.",severity:n?"fatal":"warning"}),!n))&&!(!(t.resources.h264&&t.resources.h264[0]&&t.resources.h264[0].file)&&(e.throwError({type:"init",message:"Talk "+t.id+" has no h264 file resource.",severity:r?"fatal":"warning"}),r)))}function ge(e,t){if(!t||!t.length)return e.throwError({type:"init",message:"No talks sent to player.",severity:"fatal"}),!1;for(var n=!0,r=t.length;r--;)n=pe(e,t[r])&&n;return!!n}r.extend(de,re),de._setSource=function(e){var t=this;t._unsetSource(),t.topic("ready.sourceSetting").publishUnique(!0);var n={autoStartLoad:!1,capQualityToStage:t.options.capQualityToStage,capLevelController:se,subtitleStreamController:!1,subtitleTrackController:!1,timelineController:!1,enableCEA708Captions:!1,enableWebVTT:!1},a=t.config.get("hlsjsStartLevel");a>0&&(n.startLevel=a);var s=r.extend({},n);t.dai&&t.dai.streamId&&t.options.dai&&r.extend(s,{fragLoadingMaxRetry:0,fragLoadingMaxRetryTimeout:3e3,fragLoadingTimeOut:3e3,levelLoadingMaxRetry:0,levelLoadingMaxRetryTimeout:3e3,levelLoadingTimeOut:3e3,manifestLoadingMaxRetry:0,manifestLoadingTimeOut:3e3}),r.extend(s,ce,t.options.hlsjsConfig||{}),t.hlsjs=new i(s),t.dai&&t.dai.streamId&&t.options.dai&&t.hlsjs.once(i.Events.FRAG_LOADED,function(){t.hlsjs.config.fragLoadingMaxRetry=2,t.hlsjs.config.fragLoadingMaxRetryTimeout=15e3,t.hlsjs.config.fragLoadingTimeOut=12e3,t.hlsjs.config.levelLoadingMaxRetry=2,t.hlsjs.config.levelLoadingMaxRetryTimeout=6e3}),function(e){var t=0;e.hlsjs.on(i.Events.MANIFEST_PARSED,function(){t=0});var n=e.hlsjs.abrController._findBestLevel;e.hlsjs.abrController._findBestLevel=function(e,r,i,a,s,o,l,u,c){return t>0&&t++,t>3&&(t=0),r<2&&(t=1),t>0?e:n(e,r,i,a,s,o,l,u,c)}}(t);var o=t.options.hlsjsEvents||{};for(var l in o)o.hasOwnProperty(l)&&t.hlsjs.on(i.Events[l],function(e,n){o[l].call(t.hlsjs,n)});t.hlsjs.on(i.Events.MANIFEST_PARSED,function(){t.topic("ready.sourceSet").publishUnique(!0);var e=Math.max(0,Number(t.topic("ready.seeking").read())-5);t.hlsjs.startLoad(e||-1)}),t.hlsjs.on(i.Events.LEVEL_SWITCHING,function(e,n){n&&n.bitrate>0&&t.topic("metricsData.bitrate").publishUnique(n.bitrate)}),t.hlsjs.on(i.Events.LEVEL_SWITCHED,function(e,n){t.config.set("hlsjsStartLevel",n.level)}),t.hlsjs.on(i.Events.ERROR,ae(t,e)),r(t.el).attr("crossorigin","anonymous"),t.hlsjs.loadSource(e),t.hlsjs.attachMedia(t.el),t.topic("streamHost").publish(ee(e))},de._unsetSource=function(){this.topic("ready.sourceSet").read()&&(this.hlsjs&&(this.hlsjs.destroy(),delete this.hlsjs),this.el&&r(this.el).removeAttr("crossorigin").attr("src",Z).find("track").remove(),this.topic("ready.sourceSet").publishUnique(!1))},de.capQualityToStage=function(e){this.hlsjs&&(this.hlsjs.config.capQualityToStage=e)},de._setSource.early=!0,de._unsetSource.early=!0,de.capQualityToStage.early=!0;var ve={standard:{cancel:"cancelFullScreen",change:"fullscreenchange",enabled:"fullscreenEnabled",error:"fullscreenerror",element:"fullscreenElement",request:"requestFullScreen"},moz:{cancel:"mozCancelFullScreen",change:"mozfullscreenchange",enabled:"mozFullScreenEnabled",error:"mozfullscreenerror",element:"mozFullScreenElement",request:"mozRequestFullScreen"},ms:{cancel:"msExitFullscreen",change:"MSFullscreenChange",enabled:"msFullscreenEnabled",error:"MSFullscreenError",element:"msFullscreenElement",request:"msRequestFullscreen"},webkit:{cancel:"webkitCancelFullScreen",change:"webkitfullscreenchange",enabled:"webkitFullscreenEnabled",error:"webkitfullscreenerror",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen"}};function me(e){return e.topic("ready.dom").subscribe(function(){!function(e){var t=document,n=e.fullScreenMode,i=ve[n];e.topic("fullScreen").subscribe(function(t){e.isFullScreen=t,e.topic(t?"enterFullScreen":"exitFullScreen").publish()}),"webkitVideo"===n?r(e.el).on("webkitpresentationmodechanged",function(){e.topic("fullScreen").publishUnique("fullscreen"===e.el.webkitPresentationMode)}):i&&r(t).on(i.change,function(){t[i.element]===e.fullScreenElement?e.topic("fullScreen").publishUnique(!0):!t[i.element]&&e.isFullScreen&&e.topic("fullScreen").publishUnique(!1)})}(e)}),{requestFullScreen:function(t){e.fullScreenElement||(e.fullScreenElement=t||e.el),function(e){var t=e.fullScreenMode;"webkitVideo"===t?function(e){var t=e.el;function n(){t.webkitEnterFullscreen()}t.readyState>=1?n():(t.addEventListener("loadedmetadata",n,!1),e.play())}(e):ve[t]?e.fullScreenElement[ve[t].request]():e.throwError({type:"client",message:"Full screen mode not supported",severity:"warning"})}(e)},cancelFullScreen:function(){!function(e){var t=e.fullScreenMode,n=window.document;"webkitVideo"===t?e.el.webkitExitFullscreen():ve[t]&&n[ve[t].cancel]()}(e)}}}function ye(e){if(!e)return"";if(e.id)return String(e.id);for(var t=e.length,n=[];t--;)e[t]&&e[t].id&&n.push(String(e[t].id));return n.reverse().join(",")}var _e={h264:ne,hls:re,hlsjs:de};function be(e){var t=e.mode,n=_e[t],i=[],a=!1;function s(t,n){var r=e.topic("ready").read(),a=e.topic("ready.sourceSet").read();t.wiper&&i.splice(0,i.length),t.sourcer&&r&&!a&&!e.topic("ready.sourceSetting").read()?t.apply(e,n):t.early||r&&a?t.apply(e,n):i.push({callback:t,args:n}),r&&!a&&t.resourcer&&!e.topic("ready.sourceSetting").read()&&e._setSourceFromCurrentTalk()}function o(t){return function(){return s(t,[].slice.call(arguments)),e}}if(n){e.topic("ready.sourceSet").subscribe(f),e.topic("ready.dequeued").subscribe(f),e.topic("ready").subscribe(f),e.topic("play").subscribe(function(){e.lastPlayedTalkId=e.currentTalk&&e.currentTalk.id}),n.play=function(){var t=n.play,r=!1;return e.topic("ended").subscribe(function(){r=!0}),e.topic("play").subscribe(function(){r=!1}),function(){r&&n.seek(0),t.call(e)}}(),n.playNext=function(){var t=te(e,e.currentTalk.id,1);t&&e.playTalk(t.id)},n.playPrev=function(){var t=te(e,e.currentTalk.id,-1);t&&e.playTalk(t.id)},n.playbackRate=function(t){e.topic("playbackRate").publish(t)},n.popOut=function(t){e.canPopOut&&e.el.webkitSetPresentationMode&&e.el.webkitSetPresentationMode(t?"picture-in-picture":"inline")};var l=null;n.recover=function(){var t=e.topic("currentTime").read(),n=e.topic("contentTime").read();l&&Math.abs(t-l)<.1||(e.throwError({message:"Attempting playback recovery",severity:"warning"}),e.options.dai=!1,e.topic("ready.sourceSet").subscribe(function t(r){r&&e.topic("recovering").read()&&(e.topic("ready.sourceSet").unsubscribe(t),e.topic("recovering").publishUnique(!1),e.contentTime(n),e.play())}),e.topic("recovering").publishUnique(!0),l=t,e._setSourceFromCurrentTalk())},n.volume=function(){var t=n.volume;return function(n){(n=Math.round(1e3*+n)/1e3)<0&&(n=0),n>1&&(n=1),t.call(e,n),e.topic("volume").publishUnique(n)}}(),n.mute=function(){var t=n.mute;return function(n){n=!!n,t.call(e,n),e.topic("muted").publishUnique(n)}}(),n.seek=function(){var t=n.seek,r=0,i=0;return e.topic("streamPrerollDuration").subscribe(function(e){i=e||0}),e.topic("streamDuration").subscribe(function(e){r=e||0}),function(n){n=Math.max(0,Math.min(Number(n)+i,r-.5)),t.call(e,n)}}(),n.seek=function(){var t=n.seek,r=!1,i=!1;function a(t){r=t,e.topic("ready.seeking").publishUnique(t)}return e.topic("ready.seekable").subscribe(function(n){n&&(!1!==r&&(t.call(e,r),a(!1)),i=!0)}),function(n){i?t.call(e,n):a(n)}}(),n.contentTime=function(t){var n=e.topic("streamIntroDuration").read();null!==n&&e.seek(t/1e3+n)},n.toggle=function(){e.paused?e.play():e.pause()},n.capQualityToStage=function(){var t=n.capQualityToStage||r.noop;return function(n){e.options.capQualityToStage=!!n,t.call(e,!!n)}}();var u,d=me(e);for(var h in n.requestFullScreen=d.requestFullScreen,n.cancelFullScreen=d.cancelFullScreen,n.nativeControls=function(t){e.canNativeControls&&(t?e.el.setAttribute("controls","controls"):e.el.removeAttribute("controls"),e.topic("nativeControls").publishUnique(!!t))},n.nativeFullScreen=function(t){e.canNativeFullScreen&&(t?(u=e.el.getAttribute("controls"),n.requestFullScreen(e.el),n.nativeControls(!0)):(u||n.nativeControls(!1),n.cancelFullScreen()))},n.setTalks=function(t){if(t&&t.length){e.oldTalks||(e.oldTalks=ye(e.options.talks));var n=ye(t);if(n!==e.oldTalks){e.topic("ready").publishUnique(!1),e.topic("ready.seekable").publishUnique(!1),e._unsetSource(),c.forPlayer(e).hide();var r=fe(t);if(ge(e,r)){e.options.talks=r,e.oldTalks=n,e.topic("ad").publishUnique(null),e.topic("contentTime").publishUnique(null),e.topic("currentAd").publishUnique(null),e.topic("currentTime").publishUnique(null),e.topic("streamIntroDuration").publishUnique(null),e.topic("introDuration").publishUnique(null),e.topic("streamDuration").publishUnique(null),e.topic("streamTime").publishUnique(null),e.topic("duration").publishUnique(null),e.topic("metricsData").publishUnique(null),e.topic("streamPrerollDuration").publishUnique(null),e.topic("prerollDuration").publishUnique(null),e.topic("prerollRemaining").publishUnique(null),e.topic("streamPostrollDuration").publishUnique(null),e.topic("postrollDuration").publishUnique(null),e.topic("postrollRemaining").publishUnique(null),e.topic("progress").publishUnique(null),e.topic("recovering").publishUnique(!1),e.topic("subtitleCue").publishUnique(null),e.topic("streamAds").publishUnique({preroll:!1,postroll:!1});var i=t[0];e.currentTalk=i,e._setSourceFromCurrentTalk()}}else window.console.warn("PaRappa ignoring duplicative setTalks request.")}},n.setTitle=function(t){e.el&&e.el.setAttribute&&e.el.setAttribute("title",t||"TED: Ideas worth spreading")},n.cancelFullScreen.early=!0,n.play.resourcer=!0,n.seek.resourcer=!0,n.contentTime.resourcer=!0,n.setTalks.sourcer=!0,n.playNext.sourcer=!0,n.playPrev.sourcer=!0,n.playTalk.sourcer=!0,n.playNext.wiper=!0,n.playPrev.wiper=!0,n.playTalk.wiper=!0,n.setTalks.wiper=!0,n)n.hasOwnProperty(h)&&(e[h]=o(n[h]))}else e.throwError({type:"init",message:"No actions found for unrecognized player mode: "+t,severity:"fatal"});function f(){var t=e.topic("ready").read(),n=e.topic("ready.sourceSet").read();t&&n&&i.length&&function(){var t;if(a)return!1;t=i.splice(0,i.length),a=!0;for(var n=-1,r=t.length;++n<r;)s(t[n].callback,t[n].args);a=!1,e.topic("ready.dequeued").publish(!0)}()}}var Ae=1;function Ee(e){Ee.init(e)}var we=Math.pow(2,53)-1;Ee.makeToken=function(){return["001",Math.floor(Math.random()*we).toString(36),(new Date).getTime().toString(36)].join("-")},Ee.init=function(e){var t=e.topic;t("ready.sourceSetting").subscribe(function(n){if(n){var r=Ee.makeToken();e.playToken=r,t("playToken").publishUnique(r)}})};var Se="ted.parappa";var Te,ke=window,xe=ke&&ke.console,De=xe&&xe.log;function Ce(e){var t=!0;function n(t){return e&&e.topic(t).read()||""}function i(e,t,n,r){typeof n===r&&(e[t]=n)}e.one("play",function(){t=!1}),e.throwError=function(a){var s,o,l={type:String(a&&a.type||"unknown"),message:String(a&&a.message||"Something happened"),severity:String(a&&a.severity||"warning"),details:a&&a.details||{}};switch(t&&"fatal"===l.severity&&(l.severity="abortive"),l.details=r.extend({},function(){var t=e.mode,r={subproperty:e.options.subproperty||"<MISSING>",playerMode:t,playToken:e.playToken||"",streamUrl:e.el&&e.el.src||""};return i(r,"tedTime",n("tedTime"),"number"),i(r,"streamTime",n("streamTime"),"number"),i(r,"streamDuration",n("streamDuration"),"number"),r.dai={streamId:String(e.options.dai&&e.dai&&e.dai.streamId||"")},i(r.dai,"streamCuepoints",n("streamCuepoints"),"string"),i(r.dai,"streamPrerollDuration",n("streamPrerollDuration"),"number"),i(r.dai,"streamPostrollDuration",n("streamPostrollDuration"),"number"),i(r.dai,"currentAd",n("currentAd"),"object"),"hlsjs"===t&&e.hlsjs&&(r.streamUrl=e.hlsjs.url,r.hlsjs={loadLevel:e.hlsjs.loadLevel}),r}(),l.details),l.severity){case"abortive":case"fatal":s=1,o="#F2D2CF";break;case"warning":s=2,o="#FCF1CC";break;default:s=3,o="#999999"}e.options&&a&&!1!==a.report&&e.options.logLevel>=s&&(!function(e){var t,n={context:String(e&&e.context||""),event:String(e&&e.event||""),message:String(e&&e.message||""),details:e&&e.details||{}},i=Se;0===n.context.indexOf(Se)?i=n.context:0===n.context.indexOf("/")?i+=n.context:n.context&&(i+="/"+n.context),i=encodeURIComponent(i).replace(/%2F/g,"/");try{t=JSON.parse(JSON.stringify(n.details))}catch(e){t={}}var a,s={context:"ted_player_wrapper",context_new:i,event:n.event,message:n.message,version:"3.9.3",location:window&&window.location&&window.location.href||"parappa:blank",details:t};try{a=JSON.stringify(s)}catch(e){a='{"message":"Client does not support JSON.stringify"}'}r.ajax({type:"POST",url:"https://error-collector.ted.com/",headers:{"Content-Type":"application/json"},data:a,dataType:"text",mimeType:"text/plain"})}({message:l.message,details:r.extend({errorType:l.type,errorSeverity:l.severity},l.details)}),e.options.logConsole>0&&De&&(1===e.options.logConsole?xe.log("%cPaRappa: "+l.message,"color: "+o):xe.log(l))),e.topic("error").publish(l)}}function Re(e){this._options=e,this._inited=!1}function Le(e){this.fallback={},this.adapter=e,this.isStorable=function(e){if(!(e&&e.getItem&&e.setItem&&window.JSON&&JSON.parse&&JSON.stringify))return!1;try{var t=Math.floor(99999*Math.random()).toString(36),n="parappa-test-"+t;if(e.setItem(n,t),e.getItem(n,t)!==t)return!1;e.removeItem(n)}catch(e){return!1}return!0}(e)}r.extend(Re.prototype,{_init:function(){if(!this._inited){var e=this._options.storageAdapter.getObject(this._options.storageProperty);this.internal=r.extend({},this._options.defaults,e),this._inited=!0}},get:function(e){return this._init(),this.internal[e]},set:function(e,t){this._init(),this.internal[e]=t,this._options.storageAdapter.setObject(this._options.storageProperty,this.internal)}}),r.extend(Le.prototype,{getItem:function(e){return this.isStorable?this.adapter.getItem(e):this.fallback[e]},getObject:function(e){var t=this.getItem(e);try{if(t=JSON.parse(t),"object"===r.type(t))return t}catch(e){}return{}},setItem:function(e,t){this.isStorable?this.adapter.setItem(e,t):this.fallback[e]=t},setObject:function(e,t){"object"===r.type(t)&&this.setItem(e,JSON.stringify(t))}});var Pe=function(){var e=document.createElement("video");return e&&e.defaultPlaybackRate?e.defaultPlaybackRate:1}();try{Te=window.localStorage}catch(e){}function Ie(){var e=String(window.navigator&&window.navigator.userAgent||"");return!e.match(/Trident\/\d/)&&!e.match(/\bKaiOS\b/gi)}Te=new Le(Te);var Oe={attrs:{},customSubtitles:!1,dai:Ie(),contentSourceId:"2503702",defaultSubtitles:!1,defaultPlaybackRate:Pe,defaultVolume:.5,el:null,maiAdUnitId:"/5641/ted3/web",metrics:!1,modes:void 0,mux:!0,muxDebug:!1,muxEnvKey:"44ser87uhle6mo61s1qtpin7j",nativeLanguage:"en",storageAdapter:Te,storageProperty:"playerconfig",subproperty:null,hlsjsConfig:{},hlsjsEvents:{},imasdkDebug:!1,logLevel:2,logConsole:1,capQualityToStage:!0},Ne=function(e){var t={},n=function(e){var t=e.match(/[?&]parappa\.mode=(\w+)/);return t&&-1!==I.indexOf(t[1])&&t[1]}(e=e||window&&window.location&&window.location.href);return n&&(t.mode=n),t.dfptest=function(e){var t=e.match(/[?&]dfptest=([^&#]+)/);return t&&t[1]&&decodeURIComponent(t[1])}(e)||void 0,e.match(/[?&]parappa\.imasdkDebug=(true|1)\b/i)&&(t.imasdkDebug=!0),t}();function Me(e){var t=this;this.topic=o({bufferPlayable:void 0,bufferUnplayable:void 0,complete:void 0,ended:void 0,idle:void 0,introStart:void 0,introComplete:void 0,play:void 0,pause:void 0,prerollStart:void 0,prerollComplete:void 0,postrollStart:void 0,postrollComplete:void 0,seeked:void 0,seeking:void 0,talkComplete:void 0,tedStart:void 0,tedComplete:void 0}),Ce(t);var n=!1;this.topic("error").subscribe(function(e){"abortive"===e.severity&&(n=!0)}),function(e){var t=new r.Deferred;e.on("error",function(n){!n||"fatal"!==n.severity&&"abortive"!==n.severity||t.rejectWith(e,[n])}),e.on("ready",function(){"pending"===t.state()&&t.resolveWith(e,[e])}),r.extend(e,t.promise())}(t),e=r.extend({},Oe,e,Ne),Ie()||(e.dai=!1),this.options=e,this.defaults=Oe,e.subproperty||(e.subproperty=null,t.throwError({type:"init",message:"Missing subproperty config value",severity:"warning"})),function(e,t){for(var n=!0,r=O.length;r--;)e[O[r]]||(t({type:"init",message:"Required option property is missing: "+O[r],severity:"fatal"}),n=!1)}(e,t.throwError),e.mode=P(e),e.mode?(e.talks=fe(e.talks),this.options=e,this.config=new Re(r.extend({defaults:{languageCode:!1,muted:!1,volume:e.defaultVolume,playbackRate:e.defaultPlaybackRate,hlsjsStartLevel:e.hlsjsConfig.startLevel,popOut:!1}},e)),function(e){var t=e.options.mode,n="hls"===t||"hlsjs"===t||"h264"===t;e.fullScreenMode=C.fullScreenMode(),e.canFullScreen=!1!==e.fullScreenMode,e.canNativeControls=n,e.canNativeFullScreen=e.canNativeControls&&e.canFullScreen,e.canPlaybackRate=!!n&&C.canPlaybackRate(),e.canPopOut=C.canPopOut(),e.canSubtitle="hls"===t||"hlsjs"===t&&C.canHtml5Subtitle(),e.canVolume=C.canVolume(),e.mode=t,e.talks=e.options.talks,e.paused=!0,e.on("play",function(){e.paused=!1}).on("pause",function(){e.paused=!0})}(this),be(t),function(e){var t=!1;e.on("ready",function(){e.volume(e.config.get("volume")),e.mute(e.config.get("muted"))}).on("muted",function(n){t=n,e.config.set("muted",n)}).on("volume",function(n){e.config.set("volume",n),n>0&&t&&e.mute(!1)})}(t),function(e){var t=!1;function n(){return e.config.get("playbackRate")}function r(){t?e._playbackRate(Ae):e._playbackRate(n())}function i(){t=!1,r()}function a(){t=!0,r()}e.on("ready",function(){e.playbackRate(n())}),e.on("play",r),e.on("prerollStart",a),e.on("postrollStart",a),e.on("prerollComplete",i),e.on("postrollComplete",i),e.on("playbackRate",function(t){e.config.set("playbackRate",t),r()})}(t),Ee(t),ge(t,e.talks),n||(this.topic("ready.dom").once(function(){var e=!1,r=!1;function i(){!n&&e&&r&&t.topic("ready").publishUnique(!0)}window.setTimeout(function(){J(t),t.topic("ready.sourceSet").subscribe(function(t){e=t,i()}),t.topic("ready.handlers").once(function(){r=!0,i()})},10)}),function(e){if(w[e.mode])return w[e.mode](e);e.throwError({type:"init",message:"Cannot replace element for unrecognized player mode: "+e.mode,severity:"fatal"})}(this))):t.throwError({type:"client",message:"Client does not support any player mode.",severity:"fatal"})}r.extend(Me.prototype,{off:function(e,t){return this.topic(e).unsubscribe(t),this},on:function(e,t){return this.topic(e).subscribe(t),this},one:function(e,t){return this.topic(e).once(t),this},isLastTalk:function(){return q(this)}}),Me.getSupportedMode=function(){return P(Oe)},e.exports=Me},Jg3A:function(e,t,n){(function(){!function(e,r){(function(e,t,n,r){var i=e.Backbone,a=[],s=a.push,o=a.slice,l=a.splice;t.VERSION="1.0.0",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var u=t.Events={on:function(e,t,n){if(!d(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!d(this,"once",e,[t,r])||!t)return this;var i=this,a=n.once(function(){i.off(e,a),t.apply(this,arguments)});return a._callback=t,this.on(e,a,r)},off:function(e,t,r){var i,a,s,o,l,u,c,h;if(!this._events||!d(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events={},this;for(o=e?[e]:n.keys(this._events),l=0,u=o.length;l<u;l++)if(e=o[l],s=this._events[e]){if(this._events[e]=i=[],t||r)for(c=0,h=s.length;c<h;c++)a=s[c],(t&&t!==a.callback&&t!==a.callback._callback||r&&r!==a.context)&&i.push(a);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!d(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;for(var a in"object"==typeof t&&(n=this),e&&((r={})[e._listenerId]=e),r)r[a].off(t,n,this),i&&delete this._listeners[a];return this}},c=/\s+/,d=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(c.test(n)){for(var a=n.split(c),s=0,o=a.length;s<o;s++)e[t].apply(e,[a[s]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,a=t[0],s=t[1],o=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a,s);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a,s,o);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}};n.each({listenTo:"on",listenToOnce:"once"},function(e,t){u[t]=function(t,r,i){var a=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=n.uniqueId("l"));return a[s]=t,"object"==typeof r&&(i=this),t[e](r,i,this),this}}),u.bind=u.on,u.unbind=u.off,n.extend(t,u);var f=t.Model=function(e,t){var r,i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},n.extend(this,n.pick(t,p)),t.parse&&(i=this.parse(i,t)||{}),(r=n.result(this,"defaults"))&&(i=n.defaults({},i,r)),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},p=["url","urlRoot","collection"];n.extend(f.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,r){var i,a,s,o,l,u,c,d;if(null==e)return this;if("object"==typeof e?(a=e,r=t):(a={})[e]=t,r||(r={}),!this._validate(a,r))return!1;for(i in s=r.unset,l=r.silent,o=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={}),d=this.attributes,c=this._previousAttributes,this.idAttribute in a&&(this.id=a[this.idAttribute]),a)t=a[i],n.isEqual(d[i],t)||o.push(i),n.isEqual(c[i],t)?delete this.changed[i]:this.changed[i]=t,s?delete d[i]:d[i]=t;if(!l){o.length&&(this._pending=!0);for(var h=0,f=o.length;h<f;h++)this.trigger("change:"+o[h],this,d[o[h]],r)}if(u)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var a in e)n.isEqual(i[a],t=e[a])||((r||(r={}))[a]=t);return r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?n.clone(e):{}).parse&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,a,s,o=this.attributes;if(null==e||"object"==typeof e?(i=e,r=t):(i={})[e]=t,i&&(!r||!r.wait)&&!this.set(i,r))return!1;if(r=n.extend({validate:!0},r),!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},o,i)),void 0===r.parse&&(r.parse=!0);var l=this,u=r.success;return r.success=function(e){l.attributes=o;var t=l.parse(e,r);if(r.wait&&(t=n.extend(i||{},t)),n.isObject(t)&&!l.set(t,r))return!1;u&&u(l,e,r),l.trigger("sync",l,e,r)},I(this,r),"patch"===(a=this.isNew()?"create":r.patch?"patch":"update")&&(r.attrs=i),s=this.sync(a,this,r),i&&r.wait&&(this.attributes=o),s},destroy:function(e){var t=this,r=(e=e?n.clone(e):{}).success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;I(this,e);var a=this.sync("delete",this,e);return e.wait||i(),a},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||P();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,n.extend(t||{},{validationError:r})),!1)}});n.each(["keys","values","pairs","invert","pick","omit"],function(e){f.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var g=t.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},v={add:!0,remove:!0,merge:!0},m={add:!0,merge:!1,remove:!1};n.extend(g.prototype,u,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.defaults(t||{},m))},remove:function(e,t){var r,i,a,s;for(e=n.isArray(e)?e.slice():[e],t||(t={}),r=0,i=e.length;r<i;r++)(s=this.get(e[r]))&&(delete this._byId[s.id],delete this._byId[s.cid],a=this.indexOf(s),this.models.splice(a,1),this.length--,t.silent||(t.index=a,s.trigger("remove",s,this,t)),this._removeReference(s));return this},set:function(e,t){var r,i,a,o,u;(t=n.defaults(t||{},v)).parse&&(e=this.parse(e,t)),n.isArray(e)||(e=e?[e]:[]);var c=t.at,d=this.comparator&&null==c&&!1!==t.sort,h=n.isString(this.comparator)?this.comparator:null,f=[],p=[],g={};for(r=0,i=e.length;r<i;r++)(a=this._prepareModel(e[r],t))&&((o=this.get(a))?(t.remove&&(g[o.cid]=!0),t.merge&&(o.set(a.attributes,t),d&&!u&&o.hasChanged(h)&&(u=!0))):t.add&&(f.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)));if(t.remove){for(r=0,i=this.length;r<i;++r)g[(a=this.models[r]).cid]||p.push(a);p.length&&this.remove(p,t)}if(f.length&&(d&&(u=!0),this.length+=f.length,null!=c?l.apply(this.models,[c,0].concat(f)):s.apply(this.models,f)),u&&this.sort({silent:!0}),t.silent)return this;for(r=0,i=f.length;r<i;r++)(a=f[r]).trigger("add",a,this,t);return u&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r]);return t.previousModels=this.models,this._reset(),this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,n.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,n.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){if(null!=e)return this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,r){t||(t=this.comparator);var i=n.isFunction(t)?t:function(e){return e.get(t)};return n.sortedIndex(this.models,e,i,r)},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){void 0===(e=e?n.clone(e):{}).parse&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof f)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});n.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"],function(e){g.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});n.each(["groupBy","countBy","sortBy"],function(e){g.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var y=t.View=function(e){this.cid=n.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,b=["model","collection","el","id","attributes","className","tagName","events"];n.extend(y.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;for(var t in this.undelegateEvents(),e){var r=e[t];if(n.isFunction(r)||(r=this[e[t]]),r){var i=t.match(_),a=i[1],s=i[2];r=n.bind(r,this),a+=".delegateEvents"+this.cid,""===s?this.$el.on(a,r):this.$el.on(a,s,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=n.extend({},n.result(this,"options"),e)),n.extend(this,n.pick(e,b)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}}}),t.sync=function(e,r,i){var a=A[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:a,dataType:"json"};if(i.url||(s.url=n.result(r,"url")||P()),null!=i.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){s.type="POST",i.emulateJSON&&(s.data._method=a);var o=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",a),o)return o.apply(this,arguments)}}"GET"===s.type||i.emulateJSON||(s.processData=!1),"PATCH"!==s.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=i.xhr=t.ajax(n.extend(s,i));return r.trigger("request",r,l,i),l};var A={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var E=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},w=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,T=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(E.prototype,u,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var a=this;return t.history.route(e,function(n){var s=a._extractParameters(e,n);i&&i.apply(a,s),a.trigger.apply(a,["route:"+r].concat(s)),a.trigger("route",r,s),t.history.trigger("route",a,r,s)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(k,"\\$&").replace(w,"(?:$1)?").replace(S,function(e,t){return t?e:"([^/]+)"}).replace(T,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e){return e?decodeURIComponent(e):null})}});var x=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,C=/^\/+|\/+$/g,R=/msie [\w.]+/,L=/\/$/;x.started=!1,n.extend(x.prototype,u,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(L,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(D,"")},start:function(e){if(x.started)throw new Error("Backbone.history has already been started");x.started=!0,this.options=n.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,a=R.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(C,"/"),a&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(r)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!a?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var s=this.location,o=s.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&s.hash&&(this.fragment=this.getHash().replace(D,""),this.history.replaceState({},document.title,this.root+this.fragment+s.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),x.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),r=n.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return r},navigate:function(e,t){if(!x.started)return!1;if(t&&!0!==t||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new x;f.extend=g.extend=E.extend=y.extend=x.extend=function(e,t){var r,i=this;r=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)};n.extend(r,i,t);var a=function(){this.constructor=r};a.prototype=i.prototype,r.prototype=new a,e&&n.extend(r.prototype,e);return r.__super__=i.prototype,r};var P=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}})(e,t,n("5cge"))}(this)}).call(window)},Jikt:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var a=i(n("dJlP")),s=r(n("l3gt")),o=r(n("AIJh")),l=i(n("82EY")),u=i(n("co8E")),c=r(n("6+Qq"));function d(){var e=new a.HandlebarsEnvironment;return l.extend(e,a),e.SafeString=s.default,e.Exception=o.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e}var h=d();h.create=d,c.default(h),h.default=h,t.default=h,e.exports=t.default},K2jg:function(e,t){(function(t){e.exports=t}).call(this,{})},K37z:function(e,t,n){"use strict";var r;void 0===(r=function(){function e(e){return(e>9?"":"0")+e}return function(t){var n=t%60|0,r=t/3600|0,i=t%3600/60|0;return(r?r+":"+e(i):i)+":"+e(n)}}.call(t,n,t,e))||(e.exports=r)},KLVm:function(e,t,n){var r;!function(t,n){"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,i){var a=[],s=a.slice,o=a.concat,l=a.push,u=a.indexOf,c={},d=c.toString,h=c.hasOwnProperty,f={},p=function(e,t){return new p.fn.init(e,t)},g=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,v=/^-ms-/,m=/-([\da-z])/gi,y=function(e,t){return t.toUpperCase()};function _(e){var t="length"in e&&e.length,n=p.type(e);return"function"!==n&&!p.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}p.fn=p.prototype={jquery:"1.11.3",constructor:p,selector:"",length:0,toArray:function(){return s.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:s.call(this)},pushStack:function(e){var t=p.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return p.each(this,e,t)},map:function(e){return this.pushStack(p.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:l,sort:a.sort,splice:a.splice},p.extend=p.fn.extend=function(){var e,t,n,r,i,a,s=arguments[0]||{},o=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[o]||{},o++),"object"==typeof s||p.isFunction(s)||(s={}),o===l&&(s=this,o--);o<l;o++)if(null!=(i=arguments[o]))for(r in i)e=s[r],s!==(n=i[r])&&(u&&n&&(p.isPlainObject(n)||(t=p.isArray(n)))?(t?(t=!1,a=e&&p.isArray(e)?e:[]):a=e&&p.isPlainObject(e)?e:{},s[r]=p.extend(u,a,n)):void 0!==n&&(s[r]=n));return s},p.extend({expando:"jQuery"+("1.11.3"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===p.type(e)},isArray:Array.isArray||function(e){return"array"===p.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!p.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==p.type(e)||e.nodeType||p.isWindow(e))return!1;try{if(e.constructor&&!h.call(e,"constructor")&&!h.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(f.ownLast)for(t in e)return h.call(e,t);for(t in e);return void 0===t||h.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[d.call(e)]||"object":typeof e},globalEval:function(e){e&&p.trim(e)&&(n.execScript||function(e){n.eval.call(n,e)})(e)},camelCase:function(e){return e.replace(v,"ms-").replace(m,y)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r=0,i=e.length,a=_(e);if(n){if(a)for(;r<i&&!1!==t.apply(e[r],n);r++);else for(r in e)if(!1===t.apply(e[r],n))break}else if(a)for(;r<i&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(g,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(_(Object(e))?p.merge(n,"string"==typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(u)return u.call(t,e,n);for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;)e[i++]=t[r++];if(n!=n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,a=e.length,s=!n;i<a;i++)!t(e[i],i)!==s&&r.push(e[i]);return r},map:function(e,t,n){var r,i=0,a=e.length,s=[];if(_(e))for(;i<a;i++)null!=(r=t(e[i],i,n))&&s.push(r);else for(i in e)null!=(r=t(e[i],i,n))&&s.push(r);return o.apply([],s)},guid:1,proxy:function(e,t){var n,r,i;if("string"==typeof t&&(i=e[t],t=e,e=i),p.isFunction(e))return n=s.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(s.call(arguments)))}).guid=e.guid=e.guid||p.guid++,r},now:function(){return+new Date},support:f}),p.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()});var b=function(e){var t,n,r,i,a,s,o,l,u,c,d,h,f,p,g,v,m,y,_,b="sizzle"+1*new Date,A=e.document,E=0,w=0,S=se(),T=se(),k=se(),x=function(e,t){return e===t&&(d=!0),0},D=1<<31,C={}.hasOwnProperty,R=[],L=R.pop,P=R.push,I=R.push,O=R.slice,N=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",B=U.replace("w","w#"),j="\\["+F+"*("+U+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+F+"*\\]",q=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",H=new RegExp(F+"+","g"),G=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),V=new RegExp("^"+F+"*,"+F+"*"),K=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),W=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),$=new RegExp(q),z=new RegExp("^"+B+"$"),Y={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U.replace("w","w*")+")"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,ne=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),re=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},ie=function(){h()};try{I.apply(R=O.call(A.childNodes),A.childNodes),R[A.childNodes.length].nodeType}catch(e){I={apply:R.length?function(e,t){P.apply(e,O.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ae(e,t,r,i){var a,o,u,c,d,p,m,y,E,w;if((t?t.ownerDocument||t:A)!==f&&h(t),t=t||f,r=r||[],c=t.nodeType,"string"!=typeof e||!e||1!==c&&9!==c&&11!==c)return r;if(!i&&g){if(11!==c&&(a=Z.exec(e)))if(u=a[1]){if(9===c){if(!(o=t.getElementById(u))||!o.parentNode)return r;if(o.id===u)return r.push(o),r}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&_(t,o)&&o.id===u)return r.push(o),r}else{if(a[2])return I.apply(r,t.getElementsByTagName(e)),r;if((u=a[3])&&n.getElementsByClassName)return I.apply(r,t.getElementsByClassName(u)),r}if(n.qsa&&(!v||!v.test(e))){if(y=m=b,E=t,w=1!==c&&e,1===c&&"object"!==t.nodeName.toLowerCase()){for(p=s(e),(m=t.getAttribute("id"))?y=m.replace(te,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",d=p.length;d--;)p[d]=y+ve(p[d]);E=ee.test(e)&&pe(t.parentNode)||t,w=p.join(",")}if(w)try{return I.apply(r,E.querySelectorAll(w)),r}catch(e){}finally{m||t.removeAttribute("id")}}}return l(e.replace(G,"$1"),t,r,i)}function se(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function oe(e){return e[b]=!0,e}function le(e){var t=f.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var n=e.split("|"),i=e.length;i--;)r.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function fe(e){return oe(function(t){return t=+t,oe(function(n,r){for(var i,a=e([],n.length,t),s=a.length;s--;)n[i=a[s]]&&(n[i]=!(r[i]=n[i]))})})}function pe(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ae.support={},a=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=ae.setDocument=function(e){var t,i,s=e?e.ownerDocument||e:A;return s!==f&&9===s.nodeType&&s.documentElement?(f=s,p=s.documentElement,(i=s.defaultView)&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",ie,!1):i.attachEvent&&i.attachEvent("onunload",ie)),g=!a(s),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(s.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=J.test(s.getElementsByClassName),n.getById=le(function(e){return p.appendChild(e).id=b,!s.getElementsByName||!s.getElementsByName(b).length}),n.getById?(r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(ne,re);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(ne,re);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[i++];)1===n.nodeType&&r.push(n);return r}return a},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(g)return t.getElementsByClassName(e)},m=[],v=[],(n.qsa=J.test(s.querySelectorAll))&&(le(function(e){p.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+F+"*(?:value|"+M+")"),e.querySelectorAll("[id~="+b+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||v.push(".#.+[+~]")}),le(function(e){var t=s.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+F+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(n.matchesSelector=J.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&le(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),m.push("!=",q)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),t=J.test(p.compareDocumentPosition),_=t||J.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},x=t?function(e,t){if(e===t)return d=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===s||e.ownerDocument===A&&_(A,e)?-1:t===s||t.ownerDocument===A&&_(A,t)?1:c?N(c,e)-N(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,r=0,i=e.parentNode,a=t.parentNode,o=[e],l=[t];if(!i||!a)return e===s?-1:t===s?1:i?-1:a?1:c?N(c,e)-N(c,t):0;if(i===a)return ce(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;o[r]===l[r];)r++;return r?ce(o[r],l[r]):o[r]===A?-1:l[r]===A?1:0},s):f},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&h(e),t=t.replace(W,"='$1']"),n.matchesSelector&&g&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return ae(t,f,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==f&&h(e),_(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==f&&h(e);var i=r.attrHandle[t.toLowerCase()],a=i&&C.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==a?a:n.attributes||!g?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,r=[],i=0,a=0;if(d=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(x),d){for(;t=e[a++];)t===e[a]&&(i=r.push(a));for(;i--;)e.splice(r[i],1)}return c=null,e},i=ae.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=ae.selectors={cacheLength:50,createPseudo:oe,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,re),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&S(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ae.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(H," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var a="nth"!==e.slice(0,3),s="last"!==e.slice(-4),o="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,h,f,p,g=a!==s?"nextSibling":"previousSibling",v=t.parentNode,m=o&&t.nodeName.toLowerCase(),y=!l&&!o;if(v){if(a){for(;g;){for(d=t;d=d[g];)if(o?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?v.firstChild:v.lastChild],s&&y){for(f=(u=(c=v[b]||(v[b]={}))[e]||[])[0]===E&&u[1],h=u[0]===E&&u[2],d=f&&v.childNodes[f];d=++f&&d&&d[g]||(h=f=0)||p.pop();)if(1===d.nodeType&&++h&&d===t){c[e]=[E,f,h];break}}else if(y&&(u=(t[b]||(t[b]={}))[e])&&u[0]===E)h=u[1];else for(;(d=++f&&d&&d[g]||(h=f=0)||p.pop())&&((o?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++h||(y&&((d[b]||(d[b]={}))[e]=[E,h]),d!==t)););return(h-=i)===r||h%r==0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,n){for(var r,a=i(e,t),s=a.length;s--;)e[r=N(e,a[s])]=!(n[r]=a[s])}):function(e){return i(e,0,n)}):i}},pseudos:{not:oe(function(e){var t=[],n=[],r=o(e.replace(G,"$1"));return r[b]?oe(function(e,t,n,i){for(var a,s=r(e,null,i,[]),o=e.length;o--;)(a=s[o])&&(e[o]=!(t[o]=a))}):function(e,i,a){return t[0]=e,r(t,null,a,n),t[0]=null,!n.pop()}}),has:oe(function(e){return function(t){return ae(e,t).length>0}}),contains:oe(function(e){return e=e.replace(ne,re),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:oe(function(e){return z.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(ne,re).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe(function(){return[0]}),last:fe(function(e,t){return[t-1]}),eq:fe(function(e,t,n){return[n<0?n+t:n]}),even:fe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:fe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:fe(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:fe(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function ge(){}function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function me(e,t,n){var r=t.dir,i=n&&"parentNode"===r,a=w++;return t.first?function(t,n,a){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,a)}:function(t,n,s){var o,l,u=[E,a];if(s){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if((o=(l=t[b]||(t[b]={}))[r])&&o[0]===E&&o[1]===a)return u[2]=o[2];if(l[r]=u,u[2]=e(t,n,s))return!0}}}function ye(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function _e(e,t,n,r,i){for(var a,s=[],o=0,l=e.length,u=null!=t;o<l;o++)(a=e[o])&&(n&&!n(a,r,i)||(s.push(a),u&&t.push(o)));return s}function be(e,t,n,r,i,a){return r&&!r[b]&&(r=be(r)),i&&!i[b]&&(i=be(i,a)),oe(function(a,s,o,l){var u,c,d,h=[],f=[],p=s.length,g=a||function(e,t,n){for(var r=0,i=t.length;r<i;r++)ae(e,t[r],n);return n}(t||"*",o.nodeType?[o]:o,[]),v=!e||!a&&t?g:_e(g,h,e,o,l),m=n?i||(a?e:p||r)?[]:s:v;if(n&&n(v,m,o,l),r)for(u=_e(m,f),r(u,[],o,l),c=u.length;c--;)(d=u[c])&&(m[f[c]]=!(v[f[c]]=d));if(a){if(i||e){if(i){for(u=[],c=m.length;c--;)(d=m[c])&&u.push(v[c]=d);i(null,m=[],u,l)}for(c=m.length;c--;)(d=m[c])&&(u=i?N(a,d):h[c])>-1&&(a[u]=!(s[u]=d))}}else m=_e(m===s?m.splice(p,m.length):m),i?i(null,s,m,l):I.apply(s,m)})}function Ae(e){for(var t,n,i,a=e.length,s=r.relative[e[0].type],o=s||r.relative[" "],l=s?1:0,c=me(function(e){return e===t},o,!0),d=me(function(e){return N(t,e)>-1},o,!0),h=[function(e,n,r){var i=!s&&(r||n!==u)||((t=n).nodeType?c(e,n,r):d(e,n,r));return t=null,i}];l<a;l++)if(n=r.relative[e[l].type])h=[me(ye(h),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[b]){for(i=++l;i<a&&!r.relative[e[i].type];i++);return be(l>1&&ye(h),l>1&&ve(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(G,"$1"),n,l<i&&Ae(e.slice(l,i)),i<a&&Ae(e=e.slice(i)),i<a&&ve(e))}h.push(n)}return ye(h)}return ge.prototype=r.filters=r.pseudos,r.setFilters=new ge,s=ae.tokenize=function(e,t){var n,i,a,s,o,l,u,c=T[e+" "];if(c)return t?0:c.slice(0);for(o=e,l=[],u=r.preFilter;o;){for(s in n&&!(i=V.exec(o))||(i&&(o=o.slice(i[0].length)||o),l.push(a=[])),n=!1,(i=K.exec(o))&&(n=i.shift(),a.push({value:n,type:i[0].replace(G," ")}),o=o.slice(n.length)),r.filter)!(i=Y[s].exec(o))||u[s]&&!(i=u[s](i))||(n=i.shift(),a.push({value:n,type:s,matches:i}),o=o.slice(n.length));if(!n)break}return t?o.length:o?ae.error(e):T(e,l).slice(0)},o=ae.compile=function(e,t){var n,i=[],a=[],o=k[e+" "];if(!o){for(t||(t=s(e)),n=t.length;n--;)(o=Ae(t[n]))[b]?i.push(o):a.push(o);(o=k(e,function(e,t){var n=t.length>0,i=e.length>0,a=function(a,s,o,l,c){var d,h,p,g=0,v="0",m=a&&[],y=[],_=u,b=a||i&&r.find.TAG("*",c),A=E+=null==_?1:Math.random()||.1,w=b.length;for(c&&(u=s!==f&&s);v!==w&&null!=(d=b[v]);v++){if(i&&d){for(h=0;p=e[h++];)if(p(d,s,o)){l.push(d);break}c&&(E=A)}n&&((d=!p&&d)&&g--,a&&m.push(d))}if(g+=v,n&&v!==g){for(h=0;p=t[h++];)p(m,y,s,o);if(a){if(g>0)for(;v--;)m[v]||y[v]||(y[v]=L.call(l));y=_e(y)}I.apply(l,y),c&&!a&&y.length>0&&g+t.length>1&&ae.uniqueSort(l)}return c&&(E=A,u=_),m};return n?oe(a):a}(a,i))).selector=e}return o},l=ae.select=function(e,t,i,a){var l,u,c,d,h,f="function"==typeof e&&e,p=!a&&s(e=f.selector||e);if(i=i||[],1===p.length){if((u=p[0]=p[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&n.getById&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(ne,re),t)||[])[0]))return i;f&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(l=Y.needsContext.test(e)?0:u.length;l--&&(c=u[l],!r.relative[d=c.type]);)if((h=r.find[d])&&(a=h(c.matches[0].replace(ne,re),ee.test(u[0].type)&&pe(t.parentNode)||t))){if(u.splice(l,1),!(e=a.length&&ve(u)))return I.apply(i,a),i;break}}return(f||o(e,p))(a,t,!g,i,ee.test(e)&&pe(t.parentNode)||t),i},n.sortStable=b.split("").sort(x).join("")===b,n.detectDuplicates=!!d,h(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(f.createElement("div"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ue("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ue("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ue(M,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ae}(n);p.find=b,p.expr=b.selectors,p.expr[":"]=p.expr.pseudos,p.unique=b.uniqueSort,p.text=b.getText,p.isXMLDoc=b.isXML,p.contains=b.contains;var A=p.expr.match.needsContext,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function S(e,t,n){if(p.isFunction(t))return p.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return p.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(w.test(t))return p.filter(t,e,n);t=p.filter(t,e)}return p.grep(e,function(e){return p.inArray(e,t)>=0!==n})}p.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?p.find.matchesSelector(r,e)?[r]:[]:p.find.matches(e,p.grep(t,function(e){return 1===e.nodeType}))},p.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(p(e).filter(function(){for(t=0;t<i;t++)if(p.contains(r[t],this))return!0}));for(t=0;t<i;t++)p.find(e,r[t],n);return(n=this.pushStack(i>1?p.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(S(this,e||[],!1))},not:function(e){return this.pushStack(S(this,e||[],!0))},is:function(e){return!!S(this,"string"==typeof e&&A.test(e)?p(e):e||[],!1).length}});var T,k=n.document,x=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(p.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:x.exec(e))||!n[1]&&t)return!t||t.jquery?(t||T).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof p?t[0]:t,p.merge(this,p.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:k,!0)),E.test(n[1])&&p.isPlainObject(t))for(n in t)p.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if((r=k.getElementById(n[2]))&&r.parentNode){if(r.id!==n[2])return T.find(e);this.length=1,this[0]=r}return this.context=k,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):p.isFunction(e)?void 0!==T.ready?T.ready(e):e(p):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),p.makeArray(e,this))}).prototype=p.fn,T=p(k);var D=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};function R(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}p.extend({dir:function(e,t,n){for(var r=[],i=e[t];i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!p(i).is(n));)1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),p.fn.extend({has:function(e){var t,n=p(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(p.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,a=[],s=A.test(e)||"string"!=typeof e?p(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&p.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?p.unique(a):a)},index:function(e){return e?"string"==typeof e?p.inArray(this[0],p(e)):p.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(p.unique(p.merge(this.get(),p(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),p.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return p.dir(e,"parentNode")},parentsUntil:function(e,t,n){return p.dir(e,"parentNode",n)},next:function(e){return R(e,"nextSibling")},prev:function(e){return R(e,"previousSibling")},nextAll:function(e){return p.dir(e,"nextSibling")},prevAll:function(e){return p.dir(e,"previousSibling")},nextUntil:function(e,t,n){return p.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return p.dir(e,"previousSibling",n)},siblings:function(e){return p.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return p.sibling(e.firstChild)},contents:function(e){return p.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:p.merge([],e.childNodes)}},function(e,t){p.fn[e]=function(n,r){var i=p.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=p.filter(r,i)),this.length>1&&(C[e]||(i=p.unique(i)),D.test(e)&&(i=i.reverse())),this.pushStack(i)}});var L,P=/\S+/g,I={};function O(){k.addEventListener?(k.removeEventListener("DOMContentLoaded",N,!1),n.removeEventListener("load",N,!1)):(k.detachEvent("onreadystatechange",N),n.detachEvent("onload",N))}function N(){(k.addEventListener||"load"===event.type||"complete"===k.readyState)&&(O(),p.ready())}p.Callbacks=function(e){var t,n,r,i,a,s,o=[],l=!(e="string"==typeof e?I[e]||function(e){var t=I[e]={};return p.each(e.match(P)||[],function(e,n){t[n]=!0}),t}(e):p.extend({},e)).once&&[],u=function(d){for(n=e.memory&&d,r=!0,a=s||0,s=0,i=o.length,t=!0;o&&a<i;a++)if(!1===o[a].apply(d[0],d[1])&&e.stopOnFalse){n=!1;break}t=!1,o&&(l?l.length&&u(l.shift()):n?o=[]:c.disable())},c={add:function(){if(o){var r=o.length;!function t(n){p.each(n,function(n,r){var i=p.type(r);"function"===i?e.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==i&&t(r)})}(arguments),t?i=o.length:n&&(s=r,u(n))}return this},remove:function(){return o&&p.each(arguments,function(e,n){for(var r;(r=p.inArray(n,o,r))>-1;)o.splice(r,1),t&&(r<=i&&i--,r<=a&&a--)}),this},has:function(e){return e?p.inArray(e,o)>-1:!(!o||!o.length)},empty:function(){return o=[],i=0,this},disable:function(){return o=l=n=void 0,this},disabled:function(){return!o},lock:function(){return l=void 0,n||c.disable(),this},locked:function(){return!l},fireWith:function(e,n){return!o||r&&!l||(n=[e,(n=n||[]).slice?n.slice():n],t?l.push(n):u(n)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},p.extend({Deferred:function(e){var t=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return p.Deferred(function(n){p.each(t,function(t,a){var s=p.isFunction(e[t])&&e[t];i[a[1]](function(){var e=s&&s.apply(this,arguments);e&&p.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a[0]+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?p.extend(e,r):r}},i={};return r.pipe=r.then,p.each(t,function(e,a){var s=a[2],o=a[3];r[a[1]]=s.add,o&&s.add(function(){n=o},t[1^e][2].disable,t[2][2].lock),i[a[0]]=function(){return i[a[0]+"With"](this===i?r:this,arguments),this},i[a[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,a=s.call(arguments),o=a.length,l=1!==o||e&&p.isFunction(e.promise)?o:0,u=1===l?e:p.Deferred(),c=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?s.call(arguments):i,r===t?u.notifyWith(n,r):--l||u.resolveWith(n,r)}};if(o>1)for(t=new Array(o),n=new Array(o),r=new Array(o);i<o;i++)a[i]&&p.isFunction(a[i].promise)?a[i].promise().done(c(i,r,a)).fail(u.reject).progress(c(i,n,t)):--l;return l||u.resolveWith(r,a),u.promise()}}),p.fn.ready=function(e){return p.ready.promise().done(e),this},p.extend({isReady:!1,readyWait:1,holdReady:function(e){e?p.readyWait++:p.ready(!0)},ready:function(e){if(!0===e?!--p.readyWait:!p.isReady){if(!k.body)return setTimeout(p.ready);p.isReady=!0,!0!==e&&--p.readyWait>0||(L.resolveWith(k,[p]),p.fn.triggerHandler&&(p(k).triggerHandler("ready"),p(k).off("ready")))}}}),p.ready.promise=function(e){if(!L)if(L=p.Deferred(),"complete"===k.readyState)setTimeout(p.ready);else if(k.addEventListener)k.addEventListener("DOMContentLoaded",N,!1),n.addEventListener("load",N,!1);else{k.attachEvent("onreadystatechange",N),n.attachEvent("onload",N);var t=!1;try{t=null==n.frameElement&&k.documentElement}catch(e){}t&&t.doScroll&&function e(){if(!p.isReady){try{t.doScroll("left")}catch(t){return setTimeout(e,50)}O(),p.ready()}}()}return L.promise(e)};var M,F="undefined";for(M in p(f))break;f.ownLast="0"!==M,f.inlineBlockNeedsLayout=!1,p(function(){var e,t,n,r;(n=k.getElementsByTagName("body")[0])&&n.style&&(t=k.createElement("div"),(r=k.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==F&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",f.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=k.createElement("div");if(null==f.deleteExpando){f.deleteExpando=!0;try{delete e.test}catch(e){f.deleteExpando=!1}}e=null}(),p.acceptData=function(e){var t=p.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var U=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,B=/([A-Z])/g;function j(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(B,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:U.test(n)?p.parseJSON(n):n)}catch(e){}p.data(e,t,n)}else n=void 0}return n}function q(e){var t;for(t in e)if(("data"!==t||!p.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function H(e,t,n,r){if(p.acceptData(e)){var i,s,o=p.expando,l=e.nodeType,u=l?p.cache:e,c=l?e[o]:e[o]&&o;if(c&&u[c]&&(r||u[c].data)||void 0!==n||"string"!=typeof t)return c||(c=l?e[o]=a.pop()||p.guid++:o),u[c]||(u[c]=l?{}:{toJSON:p.noop}),"object"!=typeof t&&"function"!=typeof t||(r?u[c]=p.extend(u[c],t):u[c].data=p.extend(u[c].data,t)),s=u[c],r||(s.data||(s.data={}),s=s.data),void 0!==n&&(s[p.camelCase(t)]=n),"string"==typeof t?null==(i=s[t])&&(i=s[p.camelCase(t)]):i=s,i}}function G(e,t,n){if(p.acceptData(e)){var r,i,a=e.nodeType,s=a?p.cache:e,o=a?e[p.expando]:p.expando;if(s[o]){if(t&&(r=n?s[o]:s[o].data)){i=(t=p.isArray(t)?t.concat(p.map(t,p.camelCase)):t in r?[t]:(t=p.camelCase(t))in r?[t]:t.split(" ")).length;for(;i--;)delete r[t[i]];if(n?!q(r):!p.isEmptyObject(r))return}(n||(delete s[o].data,q(s[o])))&&(a?p.cleanData([e],!0):f.deleteExpando||s!=s.window?delete s[o]:s[o]=null)}}}p.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?p.cache[e[p.expando]]:e[p.expando])&&!q(e)},data:function(e,t,n){return H(e,t,n)},removeData:function(e,t){return G(e,t)},_data:function(e,t,n){return H(e,t,n,!0)},_removeData:function(e,t){return G(e,t,!0)}}),p.fn.extend({data:function(e,t){var n,r,i,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(i=p.data(a),1===a.nodeType&&!p._data(a,"parsedAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&j(a,r=p.camelCase(r.slice(5)),i[r]);p._data(a,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){p.data(this,e)}):arguments.length>1?this.each(function(){p.data(this,e,t)}):a?j(a,e,p.data(a,e)):void 0},removeData:function(e){return this.each(function(){p.removeData(this,e)})}}),p.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=p._data(e,t),n&&(!r||p.isArray(n)?r=p._data(e,t,p.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=p.queue(e,t),r=n.length,i=n.shift(),a=p._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,function(){p.dequeue(e,t)},a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return p._data(e,n)||p._data(e,n,{empty:p.Callbacks("once memory").add(function(){p._removeData(e,t+"queue"),p._removeData(e,n)})})}}),p.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?p.queue(this[0],e):void 0===t?this:this.each(function(){var n=p.queue(this,e,t);p._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&p.dequeue(this,e)})},dequeue:function(e){return this.each(function(){p.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=p.Deferred(),a=this,s=this.length,o=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=p._data(a[s],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(o));return o(),i.promise(t)}});var V=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,K=["Top","Right","Bottom","Left"],W=function(e,t){return e=t||e,"none"===p.css(e,"display")||!p.contains(e.ownerDocument,e)},$=p.access=function(e,t,n,r,i,a,s){var o=0,l=e.length,u=null==n;if("object"===p.type(n))for(o in i=!0,n)p.access(e,t,o,n[o],!0,a,s);else if(void 0!==r&&(i=!0,p.isFunction(r)||(s=!0),u&&(s?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(p(e),n)})),t))for(;o<l;o++)t(e[o],n,s?r:r.call(e[o],o,t(e[o],n)));return i?e:u?t.call(e):l?t(e[0],n):a},z=/^(?:checkbox|radio)$/i;!function(){var e=k.createElement("input"),t=k.createElement("div"),n=k.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",f.leadingWhitespace=3===t.firstChild.nodeType,f.tbody=!t.getElementsByTagName("tbody").length,f.htmlSerialize=!!t.getElementsByTagName("link").length,f.html5Clone="<:nav></:nav>"!==k.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),f.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",f.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,f.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){f.noCloneEvent=!1}),t.cloneNode(!0).click()),null==f.deleteExpando){f.deleteExpando=!0;try{delete t.test}catch(e){f.deleteExpando=!1}}}(),function(){var e,t,r=k.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(f[e+"Bubbles"]=t in n)||(r.setAttribute(t,"t"),f[e+"Bubbles"]=!1===r.attributes[t].expando);r=null}();var Y=/^(?:input|select|textarea)$/i,X=/^key/,Q=/^(?:mouse|pointer|contextmenu)|click/,J=/^(?:focusinfocus|focusoutblur)$/,Z=/^([^.]*)(?:\.(.+)|)$/;function ee(){return!0}function te(){return!1}function ne(){try{return k.activeElement}catch(e){}}function re(e){var t=ie.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}p.event={global:{},add:function(e,t,n,r,i){var a,s,o,l,u,c,d,h,f,g,v,m=p._data(e);if(m){for(n.handler&&(n=(l=n).handler,i=l.selector),n.guid||(n.guid=p.guid++),(s=m.events)||(s=m.events={}),(c=m.handle)||((c=m.handle=function(e){return typeof p===F||e&&p.event.triggered===e.type?void 0:p.event.dispatch.apply(c.elem,arguments)}).elem=e),o=(t=(t||"").match(P)||[""]).length;o--;)f=v=(a=Z.exec(t[o])||[])[1],g=(a[2]||"").split(".").sort(),f&&(u=p.event.special[f]||{},f=(i?u.delegateType:u.bindType)||f,u=p.event.special[f]||{},d=p.extend({type:f,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&p.expr.match.needsContext.test(i),namespace:g.join(".")},l),(h=s[f])||((h=s[f]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,r,g,c)||(e.addEventListener?e.addEventListener(f,c,!1):e.attachEvent&&e.attachEvent("on"+f,c))),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,d):h.push(d),p.event.global[f]=!0);e=null}},remove:function(e,t,n,r,i){var a,s,o,l,u,c,d,h,f,g,v,m=p.hasData(e)&&p._data(e);if(m&&(c=m.events)){for(u=(t=(t||"").match(P)||[""]).length;u--;)if(f=v=(o=Z.exec(t[u])||[])[1],g=(o[2]||"").split(".").sort(),f){for(d=p.event.special[f]||{},h=c[f=(r?d.delegateType:d.bindType)||f]||[],o=o[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=h.length;a--;)s=h[a],!i&&v!==s.origType||n&&n.guid!==s.guid||o&&!o.test(s.namespace)||r&&r!==s.selector&&("**"!==r||!s.selector)||(h.splice(a,1),s.selector&&h.delegateCount--,d.remove&&d.remove.call(e,s));l&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,g,m.handle)||p.removeEvent(e,f,m.handle),delete c[f])}else for(f in c)p.event.remove(e,f+t[u],n,r,!0);p.isEmptyObject(c)&&(delete m.handle,p._removeData(e,"events"))}},trigger:function(e,t,r,i){var a,s,o,l,u,c,d,f=[r||k],g=h.call(e,"type")?e.type:e,v=h.call(e,"namespace")?e.namespace.split("."):[];if(o=c=r=r||k,3!==r.nodeType&&8!==r.nodeType&&!J.test(g+p.event.triggered)&&(g.indexOf(".")>=0&&(g=(v=g.split(".")).shift(),v.sort()),s=g.indexOf(":")<0&&"on"+g,(e=e[p.expando]?e:new p.Event(g,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=v.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:p.makeArray(t,[e]),u=p.event.special[g]||{},i||!u.trigger||!1!==u.trigger.apply(r,t))){if(!i&&!u.noBubble&&!p.isWindow(r)){for(l=u.delegateType||g,J.test(l+g)||(o=o.parentNode);o;o=o.parentNode)f.push(o),c=o;c===(r.ownerDocument||k)&&f.push(c.defaultView||c.parentWindow||n)}for(d=0;(o=f[d++])&&!e.isPropagationStopped();)e.type=d>1?l:u.bindType||g,(a=(p._data(o,"events")||{})[e.type]&&p._data(o,"handle"))&&a.apply(o,t),(a=s&&o[s])&&a.apply&&p.acceptData(o)&&(e.result=a.apply(o,t),!1===e.result&&e.preventDefault());if(e.type=g,!i&&!e.isDefaultPrevented()&&(!u._default||!1===u._default.apply(f.pop(),t))&&p.acceptData(r)&&s&&r[g]&&!p.isWindow(r)){(c=r[s])&&(r[s]=null),p.event.triggered=g;try{r[g]()}catch(e){}p.event.triggered=void 0,c&&(r[s]=c)}return e.result}},dispatch:function(e){e=p.event.fix(e);var t,n,r,i,a,o,l=s.call(arguments),u=(p._data(this,"events")||{})[e.type]||[],c=p.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(o=p.event.handlers.call(this,e,u),t=0;(i=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,a=0;(r=i.handlers[a++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(r.namespace)||(e.handleObj=r,e.data=r.data,void 0!==(n=((p.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,l))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,a,s=[],o=t.delegateCount,l=e.target;if(o&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],a=0;a<o;a++)void 0===i[n=(r=t[a]).selector+" "]&&(i[n]=r.needsContext?p(n,this).index(l)>=0:p.find(n,this,null,[l]).length),i[n]&&i.push(r);i.length&&s.push({elem:l,handlers:i})}return o<t.length&&s.push({elem:this,handlers:t.slice(o)}),s},fix:function(e){if(e[p.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Q.test(i)?this.mouseHooks:X.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new p.Event(a),t=r.length;t--;)e[n=r[t]]=a[n];return e.target||(e.target=a.srcElement||k),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,a=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=(r=e.target.ownerDocument||k).documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ne()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===ne()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(p.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return p.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=p.extend(new p.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?p.event.trigger(i,null,t):p.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},p.removeEvent=k.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===F&&(e[r]=null),e.detachEvent(r,n))},p.Event=function(e,t){if(!(this instanceof p.Event))return new p.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ee:te):this.type=e,t&&p.extend(this,t),this.timeStamp=e&&e.timeStamp||p.now(),this[p.expando]=!0},p.Event.prototype={isDefaultPrevented:te,isPropagationStopped:te,isImmediatePropagationStopped:te,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ee,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ee,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ee,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){p.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||p.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),f.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=p.nodeName(t,"input")||p.nodeName(t,"button")?t.form:void 0;n&&!p._data(n,"submitBubbles")&&(p.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),p._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&p.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}}),f.changeBubbles||(p.event.special.change={setup:function(){if(Y.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(p.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),p.event.simulate("change",this,e,!0)})),!1;p.event.add(this,"beforeactivate._change",function(e){var t=e.target;Y.test(t.nodeName)&&!p._data(t,"changeBubbles")&&(p.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||p.event.simulate("change",this.parentNode,e,!0)}),p._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return p.event.remove(this,"._change"),!Y.test(this.nodeName)}}),f.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){p.event.simulate(t,e.target,p.event.fix(e),!0)};p.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=p._data(r,t);i||r.addEventListener(e,n,!0),p._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=p._data(r,t)-1;i?p._data(r,t,i):(r.removeEventListener(e,n,!0),p._removeData(r,t))}}}),p.fn.extend({on:function(e,t,n,r,i){var a,s;if("object"==typeof e){for(a in"string"!=typeof t&&(n=n||t,t=void 0),e)this.on(a,t,n,e[a],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),!1===r)r=te;else if(!r)return this;return 1===i&&(s=r,(r=function(e){return p().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=p.guid++)),this.each(function(){p.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,p(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=te),this.each(function(){p.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){p.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return p.event.trigger(e,t,n,!0)}});var ie="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ae=/ jQuery\d+="(?:null|\d+)"/g,se=new RegExp("<(?:"+ie+")[\\s/>]","i"),oe=/^\s+/,le=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ue=/<([\w:]+)/,ce=/<tbody/i,de=/<|&#?\w+;/,he=/<(?:script|style|link)/i,fe=/checked\s*(?:[^=]|=\s*.checked.)/i,pe=/^$|\/(?:java|ecma)script/i,ge=/^true\/(.*)/,ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,me={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:f.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ye=re(k).appendChild(k.createElement("div"));function _e(e,t){var n,r,i=0,a=typeof e.getElementsByTagName!==F?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==F?e.querySelectorAll(t||"*"):void 0;if(!a)for(a=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||p.nodeName(r,t)?a.push(r):p.merge(a,_e(r,t));return void 0===t||t&&p.nodeName(e,t)?p.merge([e],a):a}function be(e){z.test(e.type)&&(e.defaultChecked=e.checked)}function Ae(e,t){return p.nodeName(e,"table")&&p.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Ee(e){return e.type=(null!==p.find.attr(e,"type"))+"/"+e.type,e}function we(e){var t=ge.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Se(e,t){for(var n,r=0;null!=(n=e[r]);r++)p._data(n,"globalEval",!t||p._data(t[r],"globalEval"))}function Te(e,t){if(1===t.nodeType&&p.hasData(e)){var n,r,i,a=p._data(e),s=p._data(t,a),o=a.events;if(o)for(n in delete s.handle,s.events={},o)for(r=0,i=o[n].length;r<i;r++)p.event.add(t,n,o[n][r]);s.data&&(s.data=p.extend({},s.data))}}function ke(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!f.noCloneEvent&&t[p.expando]){for(r in(i=p._data(t)).events)p.removeEvent(t,r,i.handle);t.removeAttribute(p.expando)}"script"===n&&t.text!==e.text?(Ee(t).text=e.text,we(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),f.html5Clone&&e.innerHTML&&!p.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&z.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}me.optgroup=me.option,me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td,p.extend({clone:function(e,t,n){var r,i,a,s,o,l=p.contains(e.ownerDocument,e);if(f.html5Clone||p.isXMLDoc(e)||!se.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(ye.innerHTML=e.outerHTML,ye.removeChild(a=ye.firstChild)),!(f.noCloneEvent&&f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||p.isXMLDoc(e)))for(r=_e(a),o=_e(e),s=0;null!=(i=o[s]);++s)r[s]&&ke(i,r[s]);if(t)if(n)for(o=o||_e(e),r=r||_e(a),s=0;null!=(i=o[s]);s++)Te(i,r[s]);else Te(e,a);return(r=_e(a,"script")).length>0&&Se(r,!l&&_e(e,"script")),r=o=i=null,a},buildFragment:function(e,t,n,r){for(var i,a,s,o,l,u,c,d=e.length,h=re(t),g=[],v=0;v<d;v++)if((a=e[v])||0===a)if("object"===p.type(a))p.merge(g,a.nodeType?[a]:a);else if(de.test(a)){for(o=o||h.appendChild(t.createElement("div")),l=(ue.exec(a)||["",""])[1].toLowerCase(),c=me[l]||me._default,o.innerHTML=c[1]+a.replace(le,"<$1></$2>")+c[2],i=c[0];i--;)o=o.lastChild;if(!f.leadingWhitespace&&oe.test(a)&&g.push(t.createTextNode(oe.exec(a)[0])),!f.tbody)for(i=(a="table"!==l||ce.test(a)?"<table>"!==c[1]||ce.test(a)?0:o:o.firstChild)&&a.childNodes.length;i--;)p.nodeName(u=a.childNodes[i],"tbody")&&!u.childNodes.length&&a.removeChild(u);for(p.merge(g,o.childNodes),o.textContent="";o.firstChild;)o.removeChild(o.firstChild);o=h.lastChild}else g.push(t.createTextNode(a));for(o&&h.removeChild(o),f.appendChecked||p.grep(_e(g,"input"),be),v=0;a=g[v++];)if((!r||-1===p.inArray(a,r))&&(s=p.contains(a.ownerDocument,a),o=_e(h.appendChild(a),"script"),s&&Se(o),n))for(i=0;a=o[i++];)pe.test(a.type||"")&&n.push(a);return o=null,h},cleanData:function(e,t){for(var n,r,i,s,o=0,l=p.expando,u=p.cache,c=f.deleteExpando,d=p.event.special;null!=(n=e[o]);o++)if((t||p.acceptData(n))&&(s=(i=n[l])&&u[i])){if(s.events)for(r in s.events)d[r]?p.event.remove(n,r):p.removeEvent(n,r,s.handle);u[i]&&(delete u[i],c?delete n[l]:typeof n.removeAttribute!==F?n.removeAttribute(l):n[l]=null,a.push(i))}}}),p.fn.extend({text:function(e){return $(this,function(e){return void 0===e?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||k).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ae(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ae(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?p.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||p.cleanData(_e(n)),n.parentNode&&(t&&p.contains(n.ownerDocument,n)&&Se(_e(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&p.cleanData(_e(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&p.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return p.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(ae,""):void 0;if("string"==typeof e&&!he.test(e)&&(f.htmlSerialize||!se.test(e))&&(f.leadingWhitespace||!oe.test(e))&&!me[(ue.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(le,"<$1></$2>");try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(p.cleanData(_e(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,p.cleanData(_e(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=o.apply([],e);var n,r,i,a,s,l,u=0,c=this.length,d=this,h=c-1,g=e[0],v=p.isFunction(g);if(v||c>1&&"string"==typeof g&&!f.checkClone&&fe.test(g))return this.each(function(n){var r=d.eq(n);v&&(e[0]=g.call(this,n,r.html())),r.domManip(e,t)});if(c&&(n=(l=p.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===l.childNodes.length&&(l=n),n)){for(i=(a=p.map(_e(l,"script"),Ee)).length;u<c;u++)r=l,u!==h&&(r=p.clone(r,!0,!0),i&&p.merge(a,_e(r,"script"))),t.call(this[u],r,u);if(i)for(s=a[a.length-1].ownerDocument,p.map(a,we),u=0;u<i;u++)r=a[u],pe.test(r.type||"")&&!p._data(r,"globalEval")&&p.contains(s,r)&&(r.src?p._evalUrl&&p._evalUrl(r.src):p.globalEval((r.text||r.textContent||r.innerHTML||"").replace(ve,"")));l=n=null}return this}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){p.fn[e]=function(e){for(var n,r=0,i=[],a=p(e),s=a.length-1;r<=s;r++)n=r===s?this:this.clone(!0),p(a[r])[t](n),l.apply(i,n.get());return this.pushStack(i)}});var xe,De={};function Ce(e,t){var r,i=p(t.createElement(e)).appendTo(t.body),a=n.getDefaultComputedStyle&&(r=n.getDefaultComputedStyle(i[0]))?r.display:p.css(i[0],"display");return i.detach(),a}function Re(e){var t=k,n=De[e];return n||("none"!==(n=Ce(e,t))&&n||((t=((xe=(xe||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||xe[0].contentDocument).document).write(),t.close(),n=Ce(e,t),xe.detach()),De[e]=n),n}!function(){var e;f.shrinkWrapBlocks=function(){return null!=e?e:(e=!1,(n=k.getElementsByTagName("body")[0])&&n.style?(t=k.createElement("div"),(r=k.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==F&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(k.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0);var t,n,r}}();var Le,Pe,Ie=/^margin/,Oe=new RegExp("^("+V+")(?!px)[a-z%]+$","i"),Ne=/^(top|right|bottom|left)$/;function Me(e,t){return{get:function(){var n=e();if(null!=n){if(!n)return(this.get=t).apply(this,arguments);delete this.get}}}}n.getComputedStyle?(Le=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):n.getComputedStyle(e,null)},Pe=function(e,t,n){var r,i,a,s,o=e.style;return s=(n=n||Le(e))?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==s||p.contains(e.ownerDocument,e)||(s=p.style(e,t)),Oe.test(s)&&Ie.test(t)&&(r=o.width,i=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=n.width,o.width=r,o.minWidth=i,o.maxWidth=a)),void 0===s?s:s+""}):k.documentElement.currentStyle&&(Le=function(e){return e.currentStyle},Pe=function(e,t,n){var r,i,a,s,o=e.style;return null==(s=(n=n||Le(e))?n[t]:void 0)&&o&&o[t]&&(s=o[t]),Oe.test(s)&&!Ne.test(t)&&(r=o.left,(a=(i=e.runtimeStyle)&&i.left)&&(i.left=e.currentStyle.left),o.left="fontSize"===t?"1em":s,s=o.pixelLeft+"px",o.left=r,a&&(i.left=a)),void 0===s?s:s+""||"auto"}),function(){var e,t,r,i,a,s,o;function l(){var e,t,r,l;(t=k.getElementsByTagName("body")[0])&&t.style&&(e=k.createElement("div"),(r=k.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(r).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",i=a=!1,o=!0,n.getComputedStyle&&(i="1%"!==(n.getComputedStyle(e,null)||{}).top,a="4px"===(n.getComputedStyle(e,null)||{width:"4px"}).width,(l=e.appendChild(k.createElement("div"))).style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",l.style.marginRight=l.style.width="0",e.style.width="1px",o=!parseFloat((n.getComputedStyle(l,null)||{}).marginRight),e.removeChild(l)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(l=e.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(s=0===l[0].offsetHeight)&&(l[0].style.display="",l[1].style.display="none",s=0===l[0].offsetHeight),t.removeChild(r))}(e=k.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(t=(r=e.getElementsByTagName("a")[0])&&r.style)&&(t.cssText="float:left;opacity:.5",f.opacity="0.5"===t.opacity,f.cssFloat=!!t.cssFloat,e.style.backgroundClip="content-box",e.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===e.style.backgroundClip,f.boxSizing=""===t.boxSizing||""===t.MozBoxSizing||""===t.WebkitBoxSizing,p.extend(f,{reliableHiddenOffsets:function(){return null==s&&l(),s},boxSizingReliable:function(){return null==a&&l(),a},pixelPosition:function(){return null==i&&l(),i},reliableMarginRight:function(){return null==o&&l(),o}}))}(),p.swap=function(e,t,n,r){var i,a,s={};for(a in t)s[a]=e.style[a],e.style[a]=t[a];for(a in i=n.apply(e,r||[]),t)e.style[a]=s[a];return i};var Fe=/alpha\([^)]*\)/i,Ue=/opacity\s*=\s*([^)]*)/,Be=/^(none|table(?!-c[ea]).+)/,je=new RegExp("^("+V+")(.*)$","i"),qe=new RegExp("^([+-])=("+V+")","i"),He={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"},Ve=["Webkit","O","Moz","ms"];function Ke(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Ve.length;i--;)if((t=Ve[i]+n)in e)return t;return r}function We(e,t){for(var n,r,i,a=[],s=0,o=e.length;s<o;s++)(r=e[s]).style&&(a[s]=p._data(r,"olddisplay"),n=r.style.display,t?(a[s]||"none"!==n||(r.style.display=""),""===r.style.display&&W(r)&&(a[s]=p._data(r,"olddisplay",Re(r.nodeName)))):(i=W(r),(n&&"none"!==n||!i)&&p._data(r,"olddisplay",i?n:p.css(r,"display"))));for(s=0;s<o;s++)(r=e[s]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?a[s]||"":"none"));return e}function $e(e,t,n){var r=je.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function ze(e,t,n,r,i){for(var a=n===(r?"border":"content")?4:"width"===t?1:0,s=0;a<4;a+=2)"margin"===n&&(s+=p.css(e,n+K[a],!0,i)),r?("content"===n&&(s-=p.css(e,"padding"+K[a],!0,i)),"margin"!==n&&(s-=p.css(e,"border"+K[a]+"Width",!0,i))):(s+=p.css(e,"padding"+K[a],!0,i),"padding"!==n&&(s+=p.css(e,"border"+K[a]+"Width",!0,i)));return s}function Ye(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,a=Le(e),s=f.boxSizing&&"border-box"===p.css(e,"boxSizing",!1,a);if(i<=0||null==i){if(((i=Pe(e,t,a))<0||null==i)&&(i=e.style[t]),Oe.test(i))return i;r=s&&(f.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+ze(e,t,n||(s?"border":"content"),r,a)+"px"}function Xe(e,t,n,r,i){return new Xe.prototype.init(e,t,n,r,i)}p.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Pe(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:f.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,s,o=p.camelCase(t),l=e.style;if(t=p.cssProps[o]||(p.cssProps[o]=Ke(l,o)),s=p.cssHooks[t]||p.cssHooks[o],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:l[t];if("string"===(a=typeof n)&&(i=qe.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(p.css(e,t)),a="number"),null!=n&&n==n&&("number"!==a||p.cssNumber[o]||(n+="px"),f.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(s&&"set"in s&&void 0===(n=s.set(e,n,r)))))try{l[t]=n}catch(e){}}},css:function(e,t,n,r){var i,a,s,o=p.camelCase(t);return t=p.cssProps[o]||(p.cssProps[o]=Ke(e.style,o)),(s=p.cssHooks[t]||p.cssHooks[o])&&"get"in s&&(a=s.get(e,!0,n)),void 0===a&&(a=Pe(e,t,r)),"normal"===a&&t in Ge&&(a=Ge[t]),""===n||n?(i=parseFloat(a),!0===n||p.isNumeric(i)?i||0:a):a}}),p.each(["height","width"],function(e,t){p.cssHooks[t]={get:function(e,n,r){if(n)return Be.test(p.css(e,"display"))&&0===e.offsetWidth?p.swap(e,He,function(){return Ye(e,t,r)}):Ye(e,t,r)},set:function(e,n,r){var i=r&&Le(e);return $e(0,n,r?ze(e,t,r,f.boxSizing&&"border-box"===p.css(e,"boxSizing",!1,i),i):0)}}}),f.opacity||(p.cssHooks.opacity={get:function(e,t){return Ue.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=p.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===p.trim(a.replace(Fe,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=Fe.test(a)?a.replace(Fe,i):a+" "+i)}}),p.cssHooks.marginRight=Me(f.reliableMarginRight,function(e,t){if(t)return p.swap(e,{display:"inline-block"},Pe,[e,"marginRight"])}),p.each({margin:"",padding:"",border:"Width"},function(e,t){p.cssHooks[e+t]={expand:function(n){for(var r=0,i={},a="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+K[r]+t]=a[r]||a[r-2]||a[0];return i}},Ie.test(e)||(p.cssHooks[e+t].set=$e)}),p.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,a={},s=0;if(p.isArray(t)){for(r=Le(e),i=t.length;s<i;s++)a[t[s]]=p.css(e,t[s],!1,r);return a}return void 0!==n?p.style(e,t,n):p.css(e,t)},e,t,arguments.length>1)},show:function(){return We(this,!0)},hide:function(){return We(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){W(this)?p(this).show():p(this).hide()})}}),p.Tween=Xe,Xe.prototype={constructor:Xe,init:function(e,t,n,r,i,a){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(p.cssNumber[n]?"":"px")},cur:function(){var e=Xe.propHooks[this.prop];return e&&e.get?e.get(this):Xe.propHooks._default.get(this)},run:function(e){var t,n=Xe.propHooks[this.prop];return this.options.duration?this.pos=t=p.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Xe.propHooks._default.set(this),this}},Xe.prototype.init.prototype=Xe.prototype,Xe.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=p.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){p.fx.step[e.prop]?p.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[p.cssProps[e.prop]]||p.cssHooks[e.prop])?p.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Xe.propHooks.scrollTop=Xe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},p.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},p.fx=Xe.prototype.init,p.fx.step={};var Qe,Je,Ze=/^(?:toggle|show|hide)$/,et=new RegExp("^(?:([+-])=|)("+V+")([a-z%]*)$","i"),tt=/queueHooks$/,nt=[function(e,t,n){var r,i,a,s,o,l,u,c=this,d={},h=e.style,g=e.nodeType&&W(e),v=p._data(e,"fxshow");n.queue||(null==(o=p._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=function(){o.unqueued||l()}),o.unqueued++,c.always(function(){c.always(function(){o.unqueued--,p.queue(e,"fx").length||o.empty.fire()})}));1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],u=p.css(e,"display"),"inline"===("none"===u?p._data(e,"olddisplay")||Re(e.nodeName):u)&&"none"===p.css(e,"float")&&(f.inlineBlockNeedsLayout&&"inline"!==Re(e.nodeName)?h.zoom=1:h.display="inline-block"));n.overflow&&(h.overflow="hidden",f.shrinkWrapBlocks()||c.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Ze.exec(i)){if(delete t[r],a=a||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||p.style(e,r)}else u=void 0;if(p.isEmptyObject(d))"inline"===("none"===u?Re(e.nodeName):u)&&(h.display=u);else for(r in v?"hidden"in v&&(g=v.hidden):v=p._data(e,"fxshow",{}),a&&(v.hidden=!g),g?p(e).show():c.done(function(){p(e).hide()}),c.done(function(){var t;for(t in p._removeData(e,"fxshow"),d)p.style(e,t,d[t])}),d)s=st(g?v[r]:0,r,c),r in v||(v[r]=s.start,g&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}],rt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=et.exec(t),a=i&&i[3]||(p.cssNumber[e]?"":"px"),s=(p.cssNumber[e]||"px"!==a&&+r)&&et.exec(p.css(n.elem,e)),o=1,l=20;if(s&&s[3]!==a){a=a||s[3],i=i||[],s=+r||1;do{s/=o=o||".5",p.style(n.elem,e,s+a)}while(o!==(o=n.cur()/r)&&1!==o&&--l)}return i&&(s=n.start=+s||+r||0,n.unit=a,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};function it(){return setTimeout(function(){Qe=void 0}),Qe=p.now()}function at(e,t){var n,r={height:e},i=0;for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=K[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function st(e,t,n){for(var r,i=(rt[t]||[]).concat(rt["*"]),a=0,s=i.length;a<s;a++)if(r=i[a].call(n,t,e))return r}function ot(e,t,n){var r,i,a=0,s=nt.length,o=p.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=Qe||it(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),a=0,s=u.tweens.length;a<s;a++)u.tweens[a].run(r);return o.notifyWith(e,[u,r,n]),r<1&&s?n:(o.resolveWith(e,[u]),!1)},u=o.promise({elem:e,props:p.extend({},t),opts:p.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Qe||it(),duration:n.duration,tweens:[],createTween:function(t,n){var r=p.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?o.resolveWith(e,[u,t]):o.rejectWith(e,[u,t]),this}}),c=u.props;for(!function(e,t){var n,r,i,a,s;for(n in e)if(i=t[r=p.camelCase(n)],a=e[n],p.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(s=p.cssHooks[r])&&"expand"in s)for(n in a=s.expand(a),delete e[r],a)n in e||(e[n]=a[n],t[n]=i);else t[r]=i}(c,u.opts.specialEasing);a<s;a++)if(r=nt[a].call(u,e,c,u.opts))return r;return p.map(c,st,u),p.isFunction(u.opts.start)&&u.opts.start.call(e,u),p.fx.timer(p.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}p.Animation=p.extend(ot,{tweener:function(e,t){p.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;r<i;r++)n=e[r],rt[n]=rt[n]||[],rt[n].unshift(t)},prefilter:function(e,t){t?nt.unshift(e):nt.push(e)}}),p.speed=function(e,t,n){var r=e&&"object"==typeof e?p.extend({},e):{complete:n||!n&&t||p.isFunction(e)&&e,duration:e,easing:n&&t||t&&!p.isFunction(t)&&t};return r.duration=p.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in p.fx.speeds?p.fx.speeds[r.duration]:p.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){p.isFunction(r.old)&&r.old.call(this),r.queue&&p.dequeue(this,r.queue)},r},p.fn.extend({fadeTo:function(e,t,n,r){return this.filter(W).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=p.isEmptyObject(e),a=p.speed(t,n,r),s=function(){var t=ot(this,p.extend({},e),a);(i||p._data(this,"finish"))&&t.stop(!0)};return s.finish=s,i||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",a=p.timers,s=p._data(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&tt.test(i)&&r(s[i]);for(i=a.length;i--;)a[i].elem!==this||null!=e&&a[i].queue!==e||(a[i].anim.stop(n),t=!1,a.splice(i,1));!t&&n||p.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=p._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],a=p.timers,s=r?r.length:0;for(n.finish=!0,p.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<s;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),p.each(["toggle","show","hide"],function(e,t){var n=p.fn[t];p.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(at(t,!0),e,r,i)}}),p.each({slideDown:at("show"),slideUp:at("hide"),slideToggle:at("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){p.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),p.timers=[],p.fx.tick=function(){var e,t=p.timers,n=0;for(Qe=p.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||p.fx.stop(),Qe=void 0},p.fx.timer=function(e){p.timers.push(e),e()?p.fx.start():p.timers.pop()},p.fx.interval=13,p.fx.start=function(){Je||(Je=setInterval(p.fx.tick,p.fx.interval))},p.fx.stop=function(){clearInterval(Je),Je=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(e,t){return e=p.fx&&p.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i;(t=k.createElement("div")).setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],i=(n=k.createElement("select")).appendChild(k.createElement("option")),e=t.getElementsByTagName("input")[0],r.style.cssText="top:1px",f.getSetAttribute="t"!==t.className,f.style=/top/.test(r.getAttribute("style")),f.hrefNormalized="/a"===r.getAttribute("href"),f.checkOn=!!e.value,f.optSelected=i.selected,f.enctype=!!k.createElement("form").enctype,n.disabled=!0,f.optDisabled=!i.disabled,(e=k.createElement("input")).setAttribute("value",""),f.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),f.radioValue="t"===e.value}();var lt=/\r/g;p.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=p.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,p(this).val()):e)?i="":"number"==typeof i?i+="":p.isArray(i)&&(i=p.map(i,function(e){return null==e?"":e+""})),(t=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=p.valHooks[i.type]||p.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(lt,""):null==n?"":n:void 0}}),p.extend({valHooks:{option:{get:function(e){var t=p.find.attr(e,"value");return null!=t?t:p.trim(p.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,a="select-one"===e.type||i<0,s=a?null:[],o=a?i+1:r.length,l=i<0?o:a?i:0;l<o;l++)if(((n=r[l]).selected||l===i)&&(f.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!p.nodeName(n.parentNode,"optgroup"))){if(t=p(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,a=p.makeArray(t),s=i.length;s--;)if(r=i[s],p.inArray(p.valHooks.option.get(r),a)>=0)try{r.selected=n=!0}catch(e){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(e,t){if(p.isArray(t))return e.checked=p.inArray(p(e).val(),t)>=0}},f.checkOn||(p.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ut,ct,dt=p.expr.attrHandle,ht=/^(?:checked|selected)$/i,ft=f.getSetAttribute,pt=f.input;p.fn.extend({attr:function(e,t){return $(this,p.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){p.removeAttr(this,e)})}}),p.extend({attr:function(e,t,n){var r,i,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===F?p.prop(e,t,n):(1===a&&p.isXMLDoc(e)||(t=t.toLowerCase(),r=p.attrHooks[t]||(p.expr.match.bool.test(t)?ct:ut)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=p.find.attr(e,t))?void 0:i:null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void p.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,a=t&&t.match(P);if(a&&1===e.nodeType)for(;n=a[i++];)r=p.propFix[n]||n,p.expr.match.bool.test(n)?pt&&ft||!ht.test(n)?e[r]=!1:e[p.camelCase("default-"+n)]=e[r]=!1:p.attr(e,n,""),e.removeAttribute(ft?n:r)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&p.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),ct={set:function(e,t,n){return!1===t?p.removeAttr(e,n):pt&&ft||!ht.test(n)?e.setAttribute(!ft&&p.propFix[n]||n,n):e[p.camelCase("default-"+n)]=e[n]=!0,n}},p.each(p.expr.match.bool.source.match(/\w+/g),function(e,t){var n=dt[t]||p.find.attr;dt[t]=pt&&ft||!ht.test(t)?function(e,t,r){var i,a;return r||(a=dt[t],dt[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,dt[t]=a),i}:function(e,t,n){if(!n)return e[p.camelCase("default-"+t)]?t.toLowerCase():null}}),pt&&ft||(p.attrHooks.value={set:function(e,t,n){if(!p.nodeName(e,"input"))return ut&&ut.set(e,t,n);e.defaultValue=t}}),ft||(ut={set:function(e,t,n){var r=e.getAttributeNode(n);if(r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n))return t}},dt.id=dt.name=dt.coords=function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},p.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:ut.set},p.attrHooks.contenteditable={set:function(e,t,n){ut.set(e,""!==t&&t,n)}},p.each(["width","height"],function(e,t){p.attrHooks[t]={set:function(e,n){if(""===n)return e.setAttribute(t,"auto"),n}}})),f.style||(p.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var gt=/^(?:input|select|textarea|button|object)$/i,vt=/^(?:a|area)$/i;p.fn.extend({prop:function(e,t){return $(this,p.prop,e,t,arguments.length>1)},removeProp:function(e){return e=p.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),p.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var r,i,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return(1!==a||!p.isXMLDoc(e))&&(t=p.propFix[t]||t,i=p.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=p.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||vt.test(e.nodeName)&&e.href?0:-1}}}}),f.hrefNormalized||p.each(["href","src"],function(e,t){p.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),f.optSelected||(p.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this}),f.enctype||(p.propFix.enctype="encoding");var mt=/[\t\r\n\f]/g;p.fn.extend({addClass:function(e){var t,n,r,i,a,s,o=0,l=this.length,u="string"==typeof e&&e;if(p.isFunction(e))return this.each(function(t){p(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(P)||[];o<l;o++)if(r=1===(n=this[o]).nodeType&&(n.className?(" "+n.className+" ").replace(mt," "):" ")){for(a=0;i=t[a++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=p.trim(r),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,r,i,a,s,o=0,l=this.length,u=0===arguments.length||"string"==typeof e&&e;if(p.isFunction(e))return this.each(function(t){p(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(P)||[];o<l;o++)if(r=1===(n=this[o]).nodeType&&(n.className?(" "+n.className+" ").replace(mt," "):"")){for(a=0;i=t[a++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");s=e?p.trim(r):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):p.isFunction(e)?this.each(function(n){p(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,i=p(this),a=e.match(P)||[];t=a[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else n!==F&&"boolean"!==n||(this.className&&p._data(this,"__className__",this.className),this.className=this.className||!1===e?"":p._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;n<r;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(mt," ").indexOf(t)>=0)return!0;return!1}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){p.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),p.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var yt=p.now(),_t=/\?/,bt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;p.parseJSON=function(e){if(n.JSON&&n.JSON.parse)return n.JSON.parse(e+"");var t,r=null,i=p.trim(e+"");return i&&!p.trim(i.replace(bt,function(e,n,i,a){return t&&n&&(r=0),0===r?e:(t=i||n,r+=!a-!i,"")}))?Function("return "+i)():p.error("Invalid JSON: "+e)},p.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{n.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(e){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||p.error("Invalid XML: "+e),t};var At,Et,wt=/#.*$/,St=/([?&])_=[^&]*/,Tt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,kt=/^(?:GET|HEAD)$/,xt=/^\/\//,Dt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ct={},Rt={},Lt="*/".concat("*");try{Et=location.href}catch(e){(Et=k.createElement("a")).href="",Et=Et.href}function Pt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,a=t.toLowerCase().match(P)||[];if(p.isFunction(n))for(;r=a[i++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function It(e,t,n,r){var i={},a=e===Rt;function s(o){var l;return i[o]=!0,p.each(e[o]||[],function(e,o){var u=o(t,n,r);return"string"!=typeof u||a||i[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),s(u),!1)}),l}return s(t.dataTypes[0])||!i["*"]&&s("*")}function Ot(e,t){var n,r,i=p.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&p.extend(!0,e,n),e}At=Dt.exec(Et.toLowerCase())||[],p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(At[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Lt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ot(Ot(e,p.ajaxSettings),t):Ot(p.ajaxSettings,e)},ajaxPrefilter:Pt(Ct),ajaxTransport:Pt(Rt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,i,a,s,o,l,u,c=p.ajaxSetup({},t),d=c.context||c,h=c.context&&(d.nodeType||d.jquery)?p(d):p.event,f=p.Deferred(),g=p.Callbacks("once memory"),v=c.statusCode||{},m={},y={},_=0,b="canceled",A={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!u)for(u={};t=Tt.exec(a);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=y[n]=y[n]||e,m[e]=t),this},overrideMimeType:function(e){return _||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(_<2)for(t in e)v[t]=[v[t],e[t]];else A.always(e[A.status]);return this},abort:function(e){var t=e||b;return l&&l.abort(t),E(0,t),this}};if(f.promise(A).complete=g.add,A.success=A.done,A.error=A.fail,c.url=((e||c.url||Et)+"").replace(wt,"").replace(xt,At[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=p.trim(c.dataType||"*").toLowerCase().match(P)||[""],null==c.crossDomain&&(n=Dt.exec(c.url.toLowerCase()),c.crossDomain=!(!n||n[1]===At[1]&&n[2]===At[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(At[3]||("http:"===At[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=p.param(c.data,c.traditional)),It(Ct,c,t,A),2===_)return A;for(r in(o=p.event&&c.global)&&0==p.active++&&p.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!kt.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(_t.test(i)?"&":"?")+c.data,delete c.data),!1===c.cache&&(c.url=St.test(i)?i.replace(St,"$1_="+yt++):i+(_t.test(i)?"&":"?")+"_="+yt++)),c.ifModified&&(p.lastModified[i]&&A.setRequestHeader("If-Modified-Since",p.lastModified[i]),p.etag[i]&&A.setRequestHeader("If-None-Match",p.etag[i])),(c.data&&c.hasContent&&!1!==c.contentType||t.contentType)&&A.setRequestHeader("Content-Type",c.contentType),A.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+Lt+"; q=0.01":""):c.accepts["*"]),c.headers)A.setRequestHeader(r,c.headers[r]);if(c.beforeSend&&(!1===c.beforeSend.call(d,A,c)||2===_))return A.abort();for(r in b="abort",{success:1,error:1,complete:1})A[r](c[r]);if(l=It(Rt,c,t,A)){A.readyState=1,o&&h.trigger("ajaxSend",[A,c]),c.async&&c.timeout>0&&(s=setTimeout(function(){A.abort("timeout")},c.timeout));try{_=1,l.send(m,E)}catch(e){if(!(_<2))throw e;E(-1,e)}}else E(-1,"No Transport");function E(e,t,n,r){var u,m,y,b,E,w=t;2!==_&&(_=2,s&&clearTimeout(s),l=void 0,a=r||"",A.readyState=e>0?4:0,u=e>=200&&e<300||304===e,n&&(b=function(e,t,n){for(var r,i,a,s,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(s in o)if(o[s]&&o[s].test(i)){l.unshift(s);break}if(l[0]in n)a=l[0];else{for(s in n){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}r||(r=s)}a=a||r}if(a)return a!==l[0]&&l.unshift(a),n[a]}(c,A,n)),b=function(e,t,n,r){var i,a,s,o,l,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(s=u[l+" "+a]||u["* "+a]))for(i in u)if((o=i.split(" "))[1]===a&&(s=u[l+" "+o[0]]||u["* "+o[0]])){!0===s?s=u[i]:!0!==u[i]&&(a=o[0],c.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(c,b,A,u),u?(c.ifModified&&((E=A.getResponseHeader("Last-Modified"))&&(p.lastModified[i]=E),(E=A.getResponseHeader("etag"))&&(p.etag[i]=E)),204===e||"HEAD"===c.type?w="nocontent":304===e?w="notmodified":(w=b.state,m=b.data,u=!(y=b.error))):(y=w,!e&&w||(w="error",e<0&&(e=0))),A.status=e,A.statusText=(t||w)+"",u?f.resolveWith(d,[m,w,A]):f.rejectWith(d,[A,w,y]),A.statusCode(v),v=void 0,o&&h.trigger(u?"ajaxSuccess":"ajaxError",[A,c,u?m:y]),g.fireWith(d,[A,w]),o&&(h.trigger("ajaxComplete",[A,c]),--p.active||p.event.trigger("ajaxStop")))}return A},getJSON:function(e,t,n){return p.get(e,t,n,"json")},getScript:function(e,t){return p.get(e,void 0,t,"script")}}),p.each(["get","post"],function(e,t){p[t]=function(e,n,r,i){return p.isFunction(n)&&(i=i||r,r=n,n=void 0),p.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),p._evalUrl=function(e){return p.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},p.fn.extend({wrapAll:function(e){if(p.isFunction(e))return this.each(function(t){p(this).wrapAll(e.call(this,t))});if(this[0]){var t=p(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return p.isFunction(e)?this.each(function(t){p(this).wrapInner(e.call(this,t))}):this.each(function(){var t=p(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=p.isFunction(e);return this.each(function(n){p(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()}}),p.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!f.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||p.css(e,"display"))},p.expr.filters.visible=function(e){return!p.expr.filters.hidden(e)};var Nt=/%20/g,Mt=/\[\]$/,Ft=/\r?\n/g,Ut=/^(?:submit|button|image|reset|file)$/i,Bt=/^(?:input|select|textarea|keygen)/i;function jt(e,t,n,r){var i;if(p.isArray(t))p.each(t,function(t,i){n||Mt.test(e)?r(e,i):jt(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==p.type(t))r(e,t);else for(i in t)jt(e+"["+i+"]",t[i],n,r)}p.param=function(e,t){var n,r=[],i=function(e,t){t=p.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=p.ajaxSettings&&p.ajaxSettings.traditional),p.isArray(e)||e.jquery&&!p.isPlainObject(e))p.each(e,function(){i(this.name,this.value)});else for(n in e)jt(n,e[n],t,i);return r.join("&").replace(Nt,"+")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=p.prop(this,"elements");return e?p.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!p(this).is(":disabled")&&Bt.test(this.nodeName)&&!Ut.test(e)&&(this.checked||!z.test(e))}).map(function(e,t){var n=p(this).val();return null==n?null:p.isArray(n)?p.map(n,function(e){return{name:t.name,value:e.replace(Ft,"\r\n")}}):{name:t.name,value:n.replace(Ft,"\r\n")}}).get()}}),p.ajaxSettings.xhr=void 0!==n.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Vt()||function(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:Vt;var qt=0,Ht={},Gt=p.ajaxSettings.xhr();function Vt(){try{return new n.XMLHttpRequest}catch(e){}}n.attachEvent&&n.attachEvent("onunload",function(){for(var e in Ht)Ht[e](void 0,!0)}),f.cors=!!Gt&&"withCredentials"in Gt,(Gt=f.ajax=!!Gt)&&p.ajaxTransport(function(e){var t;if(!e.crossDomain||f.cors)return{send:function(n,r){var i,a=e.xhr(),s=++qt;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)a[i]=e.xhrFields[i];for(i in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)void 0!==n[i]&&a.setRequestHeader(i,n[i]+"");a.send(e.hasContent&&e.data||null),t=function(n,i){var o,l,u;if(t&&(i||4===a.readyState))if(delete Ht[s],t=void 0,a.onreadystatechange=p.noop,i)4!==a.readyState&&a.abort();else{u={},o=a.status,"string"==typeof a.responseText&&(u.text=a.responseText);try{l=a.statusText}catch(e){l=""}o||!e.isLocal||e.crossDomain?1223===o&&(o=204):o=u.text?200:404}u&&r(o,l,u,a.getAllResponseHeaders())},e.async?4===a.readyState?setTimeout(t):a.onreadystatechange=Ht[s]=t:t()},abort:function(){t&&t(void 0,!0)}}}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return p.globalEval(e),e}}}),p.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),p.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=k.head||p("head")[0]||k.documentElement;return{send:function(r,i){(t=k.createElement("script")).async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var Kt=[],Wt=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||p.expando+"_"+yt++;return this[e]=!0,e}}),p.ajaxPrefilter("json jsonp",function(e,t,r){var i,a,s,o=!1!==e.jsonp&&(Wt.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=p.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(Wt,"$1"+i):!1!==e.jsonp&&(e.url+=(_t.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return s||p.error(i+" was not called"),s[0]},e.dataTypes[0]="json",a=n[i],n[i]=function(){s=arguments},r.always(function(){n[i]=a,e[i]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(i)),s&&p.isFunction(a)&&a(s[0]),s=a=void 0}),"script"}),p.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||k;var r=E.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=p.buildFragment([e],t,i),i&&i.length&&p(i).remove(),p.merge([],r.childNodes))};var $t=p.fn.load;p.fn.load=function(e,t,n){if("string"!=typeof e&&$t)return $t.apply(this,arguments);var r,i,a,s=this,o=e.indexOf(" ");return o>=0&&(r=p.trim(e.slice(o,e.length)),e=e.slice(0,o)),p.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(a="POST"),s.length>0&&p.ajax({url:e,type:a,dataType:"html",data:t}).done(function(e){i=arguments,s.html(r?p("<div>").append(p.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){s.each(n,i||[e.responseText,t,e])}),this},p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){p.fn[t]=function(e){return this.on(t,e)}}),p.expr.filters.animated=function(e){return p.grep(p.timers,function(t){return e===t.elem}).length};var zt=n.document.documentElement;function Yt(e){return p.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}p.offset={setOffset:function(e,t,n){var r,i,a,s,o,l,u=p.css(e,"position"),c=p(e),d={};"static"===u&&(e.style.position="relative"),o=c.offset(),a=p.css(e,"top"),l=p.css(e,"left"),("absolute"===u||"fixed"===u)&&p.inArray("auto",[a,l])>-1?(s=(r=c.position()).top,i=r.left):(s=parseFloat(a)||0,i=parseFloat(l)||0),p.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(d.top=t.top-o.top+s),null!=t.left&&(d.left=t.left-o.left+i),"using"in t?t.using.call(e,d):c.css(d)}},p.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){p.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],a=i&&i.ownerDocument;return a?(t=a.documentElement,p.contains(t,i)?(typeof i.getBoundingClientRect!==F&&(r=i.getBoundingClientRect()),n=Yt(a),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===p.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),p.nodeName(e[0],"html")||(n=e.offset()),n.top+=p.css(e[0],"borderTopWidth",!0),n.left+=p.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-p.css(r,"marginTop",!0),left:t.left-n.left-p.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||zt;e&&!p.nodeName(e,"html")&&"static"===p.css(e,"position");)e=e.offsetParent;return e||zt})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);p.fn[e]=function(r){return $(this,function(e,r,i){var a=Yt(e);if(void 0===i)return a?t in a?a[t]:a.document.documentElement[r]:e[r];a?a.scrollTo(n?p(a).scrollLeft():i,n?i:p(a).scrollTop()):e[r]=i},e,r,arguments.length,null)}}),p.each(["top","left"],function(e,t){p.cssHooks[t]=Me(f.pixelPosition,function(e,n){if(n)return n=Pe(e,t),Oe.test(n)?p(e).position()[t]+"px":n})}),p.each({Height:"height",Width:"width"},function(e,t){p.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){p.fn[r]=function(r,i){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===i?"margin":"border");return $(this,function(t,n,r){var i;return p.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?p.css(t,n,s):p.style(t,n,r,s)},t,a?r:void 0,a,null)}})}),p.fn.size=function(){return this.length},p.fn.andSelf=p.fn.addBack,void 0===(r=function(){return p}.apply(t,[]))||(e.exports=r);var Xt=n.jQuery,Qt=n.$;return p.noConflict=function(e){return n.$===p&&(n.$=Qt),e&&n.jQuery===p&&(n.jQuery=Xt),p},typeof i===F&&(n.jQuery=n.$=p),p})},KsRy:function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({1:function(e,t,n,r,i){return"        Sorry:\n        we can't play video on this browser.\n        Please make sure it's up to date\n        and that Flash 11.1 or higher is installed.\n"},3:function(e,t,n,r,i){return"        We're sorry:\n        video playback cannot be initialized\n        on your browser at this time.\n"},5:function(e,t,n,r,i){return"        We're sorry:\n        video playback has been interrupted.\n        You may need to refresh the page\n        to resume.\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var a,s,o=null!=t?t:e.nullContext||{};return'\n<div class="Embeddable__error vc inverse">\n  <div class="vc__wrap">\n    <div class="Embeddable__error__message">\n'+(null!=(a=n.if.call(o,null!=t?t.isClient:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+"\n"+(null!=(a=n.if.call(o,null!=t?t.isInit:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?a:"")+"\n"+(null!=(a=n.if.call(o,null!=t?t.isFatal:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))?a:"")+'\n      <a href="'+e.escapeExpression("function"==typeof(s=null!=(s=n.url||(null!=t?t.url:t))?s:n.helperMissing)?s.call(o,{name:"url",hash:{},data:i}):s)+'" target="_blank">Load this talk on ted.com</a>\n    </div>\n  </div>\n</div>\n'},useData:!0})},MRb2:function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({1:function(e,t,r,i,a){var s=e.lambda,o=e.escapeExpression;return'    <a class="undec Embeddable__playlist__talk" href="'+o(s(null!=t?t.canonical:t,t))+'" data-id="'+o(s(null!=t?t.id:t,t))+'">\n      <div class="media">\n        <div class="Embeddable__playlist__talk__image media__image media__image--thumb">\n          '+o(function(e){return e&&(e.__esModule?e.default:e)}(n("YT+K")).call(null!=t?t:e.nullContext||{},null!=t?t.thumb:t,null,null!=t?t.duration:t,{name:"thumb",hash:{},data:a}))+'\n        </div>\n\n        <div class="media__message">\n          <h4 class="Embeddable__playlist__talk__title">\n            '+o(s(null!=t?t.speaker:t,t))+":\n            "+o(s(null!=t?t.title:t,t))+"\n          </h4>\n        </div>\n      </div>\n    </a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var a;return'\n<div class="Embeddable__expandable__content Embeddable__playlist__bar">\n'+(null!=(a=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.talks:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+"</div>\n"},useData:!0})},MaNa:function(e,t,n){"use strict";var r,i;r=[n("5cge"),n("yAjw"),n("ZQBx")],void 0===(i=function(e,t,n){var r=t.View.extend({propsDefaults:null,stateDefaults:null,propsEvents:null,stateEvents:null,adoptView:function(t){e.extend(this.propsDefaults,t.prototype.propsDefaults),e.extend(this.stateDefaults,t.prototype.stateDefaults),e.extend(this.propsEvents,t.prototype.propsEvents),e.extend(this.stateEvents,t.prototype.stateEvents)},initialize:function(){this.initializeState(),this.initializeProps()},initializeProps:function(){this.props=this._eventModel(this.propsDefaults,this.propsEvents)},initializeState:function(){this.state=this._eventModel(this.stateDefaults,this.stateEvents)},toggleClass:function(e,t,n){this.find(e)[n?"addClass":"removeClass"](t)},_eventModel:function(n,r){if(!n)return!1;var i=new t.Model(n),a=this;return e.forOwn(r,function(t,n){e.isString(t)&&(t=a[t]);var r=n.split(":");"on"===r[0]&&(n="change:"+r[1],t=e.wrap(t,function(e,t,n){n&&e.call(a)})),a.listenTo(i,n,t)}),i}});return e.extend(r.prototype,n),r}.apply(t,r))||(e.exports=i)},MgNp:function(e,t,n){"use strict";var r,i;r=[n("lU1m"),t],void 0===(i=function(e,t){var n;function r(){n=void 0}t.key="sourceContext",t.get=function(){var e;if(e=t.getFromStash())return e;if(e=t.getFromCookie())return e;var n=t.getReferrer();if(""===n)return"direct";var r=t.getLocation();return t.extractHost(n)===t.extractHost(r)?"internal":"external"},t.set=function(e,n){var r=t.extractPath(e),i=t.prepareContext(n)+"@"+r;r&&(t.setStash(i),t.setCookie(i,r))},t.extractHost=function(e){var t=String(e).match(/^\w+:\/\/([^/]+)/);return t&&t[1]},t.extractPath=function(e){var t=String(e).match(/^(?:\w+:)?(?:\/\/[^/]+)?((?:\/[^?/#]+)+)/);return t&&t[1]},t.getFromValue=function(e){var n=String(e).match(/^([^@]+)@(.*)/);return!(!n||0!==t.extractPath(t.getLocation()).indexOf(n[2]))&&n[1]},t.setCookie=function(n,r){e.set(t.key,n,{expires:30,path:r})},t.getCookie=function(){return String(e.get(t.key))},t.getFromCookie=function(){return t.getFromValue(t.getCookie())},t.setStash=function(e){n=e,window.setTimeout(r,3e4)},t.getFromStash=function(){return t.getFromValue(n)},t.getReferrer=function(){return document&&document.referrer||""},t.getLocation=function(){return location&&location.href||""},t.prepareContext=function(e){return String(e).replace("@","")}}.apply(t,r))||(e.exports=i)},Nh48:function(e,t,n){"use strict";var r,i;r=[n("MaNa"),n("3t64"),n("h13g"),n("Dx5M"),n("C/ht"),n("sv2i"),n("PiqP")],void 0===(i=function(e,t,n,r,i,a,s){return e.extend({className:"Embeddable__chrome",events:{"click a:not(.Embeddable__controls__outbound)":function(e){e.preventDefault()},"click a.Embeddable__controls__pause":function(){this.props.get("paused")||this.state.set("pausePending",!0)},"click a.Embeddable__controls__play":function(){this.props.get("playing")||this.state.set("playPending",!0)},"click a.Embeddable__controls__skip":function(){var e=this.props.get("next");e&&(this.state.set("skipPending",!0),this.state.set("pendingTalk",e))},"click a.Embeddable__controls__unskip":function(){var e=this.props.get("prev");e&&(this.state.set("unskipPending",!0),this.state.set("pendingTalk",e))},"click a.Embeddable__controls__volume":function(){this.state.set("volumeOpen",!this.state.get("volumeOpen"))},"click a.Embeddable__controls__subtitles":function(){this.state.set("subtitlesOpen",!this.state.get("subtitlesOpen"))},"click a.Embeddable__controls__playlist":function(){this.state.set("playlistOpen",!this.state.get("playlistOpen"))},"click a.Embeddable__controls__fullscreen":function(){this.props.get("fullscreen")||this.state.set("fullscreenPending",!0)},"click a.Embeddable__controls__smallscreen":function(){this.props.get("fullscreen")&&this.state.set("smallscreenPending",!0)},"click a.Embeddable__controls__outbound":function(){this.props.get("paused")||this.state.set("pausePending",!0)},"click div.Embeddable__play-button":function(){this.props.get("playing")||this.state.set("playPending",!0)},"click a.Embeddable__playlist__talk":function(e){var t=+$(e.target).closest("a.Embeddable__playlist__talk").data("id");this.state.set("pendingTalk",this.talks.get(t))},"click a.Embeddable__subtitles__language":function(e){var t=$(e.target).closest("a.Embeddable__subtitles__language").data("code");t?this.props.get("subtitle")===t?this.state.set("pendingSubtitle",!1):this.state.set("pendingSubtitle",t):this.props.get("subtitle")&&this.state.set("pendingSubtitle",!1)},"click a.Embeddable__volume__mute":function(){this.props.get("muted")||this.state.set("mutePending",!0)},"click a.Embeddable__volume__unmute":function(){this.props.get("muted")&&this.state.set("unmutePending",!0)},"scrubberslide div.Embeddable__volume__slider":function(e,t){this.state.set("pendingVolume",t.value)},"scrubberchange div.Embeddable__scrubber__slider":function(e,t){var n=this.props.get("duration");n&&this.state.set("pendingSeek",t.value*n)}},stateDefaults:{pausePending:!1,playPending:!1,pendingTalk:null,skipPending:!1,unskipPending:!1,volumeOpen:!1,pendingVolume:null,mutePending:!1,unmutePending:!1,subtitlesAvailable:!1,subtitlesOpen:!1,pendingSubtitle:null,playlistOpen:!1,fullscreenPending:!1,smallscreenPending:!1,pendingSeek:null},stateEvents:{"on:playPending":function(){this.playButton.props.set("visible",!1)},"change:pendingTalk":function(e,t){null!==t&&this.state.set("playlistOpen",!1)},"change:volumeOpen":function(e,t){this.volume.props.set("open",t),this.controls.props.set("volumeActive",t),t&&(this.state.set("subtitlesOpen",!1),this.state.set("playlistOpen",!1))},"change:pendingVolume":function(e,t){this.volume.props.set("level",t)},"change:subtitlesAvailable":"_checkSubtitles","change:subtitlesOpen":function(e,t){this.subtitles.props.set("open",t),this.controls.props.set("subtitlesActive",t),t&&(this.state.set("volumeOpen",!1),this.state.set("playlistOpen",!1))},"change:pendingSubtitle":function(e,t){null!==t&&this.state.set("subtitlesOpen",!1)},"change:playlistOpen":function(e,t){this.playlist.props.set("open",t),this.controls.props.set("playlistActive",t),t&&(this.state.set("volumeOpen",!1),this.state.set("subtitlesOpen",!1))}},propsDefaults:{enabled:!0,activated:!1,hovering:!1,playing:!1,paused:!1,duration:null,currentTime:null,talk:null,next:null,prev:null,volume:.5,canVolume:!1,muted:!1,subtitle:!1,canSubtitle:!1,fullscreen:!1,canFullscreen:!1,postrolling:!1,url:"https://www.ted.com/",visible:!1},propsEvents:{"change:enabled":"_setActivation","change:activated":"_setActivation","change:visible":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__chrome--visible")},"change:playing":function(){this._checkPlayPause()},"on:playing":function(){this.state.set("playPending",!1),this.playButton.props.set("visible",!1)},"on:paused":function(){this.state.set("pausePending",!1),this.playButton.props.set("enabled",!0),this.playButton.props.set("visible",!0)},"change:duration":function(e,t){this.controls.renderDuration(t),this.scrubber.props.set("duration",t)},"change:currentTime":function(e,t){this.controls.renderCurrent(t),this.scrubber.props.set("currentTime",t)},"change:talk":function(e,t){this.state.set("pendingTalk",null),this.state.set("skipPending",!1),this.state.set("unskipPending",!1);var n=t.get("languages");this.subtitles.props.set("languages",n||[]),this.state.set("subtitlesAvailable",n&&n.length>0)},"change:next":"_checkSkip","change:prev":"_checkSkip","change:volume":function(e,t){this.volume.props.set("level",t)},"change:canVolume":function(e,t){this.controls.props.set("volumeEnabled",t)},"change:muted":function(e,t){this.state.set("mutePending",!1),this.state.set("unmutePending",!1),this.volume.props.set("muted",t),this.controls.props.set("volumeMuted",t)},"change:subtitle":function(e,t){this.subtitles.props.set("activeSubtitle",t||null),this.controls.props.set("subtitlesEffective",!!t),this.state.set("pendingSubtitle",null)},"change:canSubtitle":"_checkSubtitles","change:fullscreen":function(e,t){this.state.set("fullscreenPending",!1),this.state.set("smallscreenPending",!1),this.controls.props.set("fullscreen",t),this.scrubber.props.set("fullscreen",t)},"change:canFullscreen":function(e,t){this.controls.props.set("fullscreenEnabled",t)},"change:postrolling":function(e,t){this.scrubber.props.set("enabled",!t),this.controls.props.set("timingEnabled",!t),this._checkPlayPause(),this._checkPlaylist(),this._checkSkip(),this._checkSubtitles()},"change:url":function(e,t){this.controls.props.set("url",t)}},initialize:function(e){this.talks=e.talks,this.scrubber=new s,this.controls=new t,this.playButton=new n,this.playlist=new r({talks:this.talks}),this.subtitles=new i,this.volume=new a,this.initializeState(),this.initializeProps(),this.listenTo(this.talks,"add",this._checkPlaylist),this.listenTo(this.talks,"all",this._checkPlaylist),this.listenTo(this.talks,"reset",this._checkPlaylist)},render:function(){this.$el.append(this.playButton.$el),this.playButton.render(),this.$el.append(this.controls.$el),this.controls.render(),this.$el.append(this.scrubber.$el),this.scrubber.render(),this.$el.append(this.volume.$el),this.volume.render(),this.$el.append(this.playlist.$el),this.playlist.render(),this.$el.append(this.subtitles.$el),this.subtitles.render(),this.volume.anchorTo(this.controls.find("a.Embeddable__controls__volume")),this.subtitles.anchorTo(this.controls.find("a.Embeddable__controls__subtitles")),this.playlist.anchorTo(this.controls.find("a.Embeddable__controls__playlist"))},_checkPlaylist:function(){var e=this.talks.length>1,t=!!this.props.get("postrolling");this.controls.props.set("playlistEnabled",!t&&e)},_checkPlayPause:function(){var e=!!this.props.get("playing"),t=!!this.props.get("postrolling");this.controls.props.set("playEnabled",!t&&!e),this.controls.props.set("pauseEnabled",!t&&e)},_checkSkip:function(){var e=!!this.props.get("next"),t=!!this.props.get("prev"),n=!!this.props.get("postrolling");this.controls.props.set("skipEnabled",!n&&e),this.controls.props.set("unskipEnabled",!n&&t)},_checkSubtitles:function(){this.controls.props.set("subtitlesEnabled",!this.props.get("postrolling")&&this.state.get("subtitlesAvailable")&&this.props.get("canSubtitle"))},_setActivation:function(){var e=this.props.get("enabled")&&this.props.get("activated");this.$el[e?"addClass":"removeClass"]("Embeddable__chrome--activated")}})}.apply(t,r))||(e.exports=i)},O074:function(e,t,n){(function(t){e.exports=t.jQuery=n("9Icy")}).call(this,n("pCvA"))},OXOu:function(e,t,n){"use strict";var r;void 0===(r=function(){return function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}}.apply(t,[]))||(e.exports=r)},PiqP:function(e,t,n){"use strict";var r,i;r=[n("MaNa"),n("TrNF"),n("nLfs")],void 0===(i=function(e,t){return e.extend({className:"Embeddable__scrubber",events:{scrubberchange:function(){this.find("div.Embeddable__scrubber__slider").scrubber("progress",0)}},propsDefaults:{enabled:!0,currentTime:0,duration:0,fullscreen:!1},propsEvents:{"change:enabled":"renderEnabled","change:currentTime":"renderTime","change:duration":"renderTime","change:fullscreen":"renderFullscreen"},render:function(){return this.$el.html(t()),this.renderEnabled(),this.renderFullscreen(),this.find("div.Embeddable__scrubber__slider").scrubber(),this},renderEnabled:function(){this.$el[this.props.get("enabled")?"addClass":"removeClass"]("Embeddable__scrubber--enabled")},renderFullscreen:function(){this.$el[this.props.get("fullscreen")?"addClass":"removeClass"]("Embeddable__scrubber--fullscreen")},renderTime:function(){this.find("div.Embeddable__scrubber__meter__progress").width(this.props.get("currentTime")/this.props.get("duration")*100+"%")}})}.apply(t,r))||(e.exports=i)},QjU5:function(e,t,n){"use strict";var r,i;r=[n("O074"),n("ikLi"),n("AQSU"),n("UQPx")],void 0===(i=function(e){return e.widget("ted.slider",e.ui.mouse,{options:{distance:0,orientation:"horizontal",value:0,change:null,slide:null,start:null,stop:null},value:function(e){return arguments.length&&(this.options.value=e,this._refreshValue()),this.options.value},_change:function(e){this._trigger("change",e,this._getData({value:this.value()}))},_create:function(){this._detectOrientation(),this._mouseInit();var t=e("<div class=slider__progress></div>");this.progressElement=t,this.cursorElement=e("<div class=slider__cursor></div>").appendTo(this.progressElement),this.element.addClass("slider slider--"+this.orientation).append(this.progressElement)},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_getData:function(e){return e},_mouseCapture:function(e){var t,n;return this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),t={x:e.pageX,y:e.pageY},n=this._valueFromPosition(t),this._start(e),this._slide(e,n),!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._valueFromPosition(t);return this._slide(e,n),!1},_mouseStart:function(){return!0},_mouseStop:function(e){return this._mouseDrag(e),this._stop(e),this._change(e),!1},_refreshValue:function(){var e=this.value();this.progressElement.css("vertical"===this.orientation?"height":"width",100*e+"%")},_slide:function(e,t){this._trigger("slide",e,this._getData({value:t})),this.value(t)},_start:function(e){this.element.addClass("slider--active"),this._trigger("start",e)},_stop:function(e){this.element.removeClass("slider--active"),this._trigger("stop",e)},_valueFromPosition:function(e){var t,n,r;return"vertical"===this.orientation?(r=this.elementSize.height,n=e.y-this.elementOffset.top):(r=this.elementSize.width,n=e.x-this.elementOffset.left),(t=n/r)>1&&(t=1),t<0&&(t=0),"vertical"===this.orientation&&(t=1-t),t}}),function(t,n){return e(t).slider(n)}}.apply(t,r))||(e.exports=i)},Qp3a:function(e,t,n){"use strict";var r,i;r=[n("O074")],void 0===(i=function(e){var t=50,n="no-defer",r="download"in document.createElement("a"),i="defer-link-pends",a="defer-link-preventable",s="defer-link-prevented",o=window;var l=e.Event.prototype.preventDefault;function u(t,l){var u="A"===this.nodeName?e(this):e(t.target).closest("a"),c=u.attr("href"),d=u.attr("target"),h=u.length&&c&&1===t.which&&!t.metaKey&&!t.shiftKey,f=l;function p(){var e=+u.data(i)-1;u.data(i,e),e<=0&&!u.data(s)&&(u.removeData(a),o.location.href=c)}if(e.isFunction(l)&&!1===(f=l.call(this,t)))return!1;h&&t.isDefaultPrevented()&&!u.data(i)&&(h=!1),h&&d&&"_self"!==d&&(h=!1),h&&r&&u.is("[download]")&&(h=!1),h&&u.hasClass(n)&&(h=!1);var g=+(u.data(i)||0);h&&(u.data(i,g+1),f.when?("resolved"===f.state()&&p(),f.done(p)):e.isNumeric(f)?o.setTimeout(p,f):(h=!1,u.data(i,g))),h&&!g&&(t.preventDefault(),u.data(a,!0))}return e.Event.prototype.preventDefault=function(){var t=e(this.target);return t.data(a)&&t.data(s,!0),l.apply(this,Array.prototype.slice.call(arguments))},function(n){if(n.when||e.isNumeric(n)||e.isFunction(n))return function(e){return function(t){return u.call(this,t,e)}}(n);u.call(this,n,t)}}.apply(t,r))||(e.exports=i)},ReFC:function(e,t,n){e.exports=function(){"use strict";var e,t=["webkit","Moz","ms","O"],n={};function r(e,t){var n,r=document.createElement(e||"div");for(n in t)r[n]=t[n];return r}function i(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}var a=function(){var e=r("style",{type:"text/css"});return i(document.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}();function s(t,r,i,s){var o=["opacity",r,~~(100*t),i,s].join("-"),l=.01+i/s*100,u=Math.max(1-(1-t)/r*(100-l),t),c=e.substring(0,e.indexOf("Animation")).toLowerCase(),d=c&&"-"+c+"-"||"";return n[o]||(a.insertRule("@"+d+"keyframes "+o+"{0%{opacity:"+u+"}"+l+"%{opacity:"+t+"}"+(l+.01)+"%{opacity:1}"+(l+r)%100+"%{opacity:"+t+"}100%{opacity:"+u+"}}",a.cssRules.length),n[o]=1),o}function o(e,n){var r,i,a=e.style;for(n=n.charAt(0).toUpperCase()+n.slice(1),i=0;i<t.length;i++)if(r=t[i]+n,void 0!==a[r])return r;if(void 0!==a[n])return n}function l(e,t){for(var n in t)e.style[o(e,n)||n]=t[n];return e}function u(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)void 0===e[r]&&(e[r]=n[r])}return e}function c(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function d(e,t){return"string"==typeof e?e:e[t%e.length]}var h={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};function f(e){if(void 0===this)return new f(e);this.opts=u(e||{},f.defaults,h)}f.defaults={},u(f.prototype,{spin:function(t){this.stop();var n,i,a=this,s=a.opts,o=a.el=l(r(0,{className:s.className}),{position:s.position,width:0,zIndex:s.zIndex}),u=s.radius+s.length+s.width;if(t&&(t.insertBefore(o,t.firstChild||null),i=c(t),n=c(o),l(o,{left:("auto"==s.left?i.x-n.x+(t.offsetWidth>>1):parseInt(s.left,10)+u)+"px",top:("auto"==s.top?i.y-n.y+(t.offsetHeight>>1):parseInt(s.top,10)+u)+"px"})),o.setAttribute("role","progressbar"),a.lines(o,a.opts),!e){var d,h=0,f=(s.lines-1)*(1-s.direction)/2,p=s.fps,g=p/s.speed,v=(1-s.opacity)/(g*s.trail/100),m=g/s.lines;!function e(){h++;for(var t=0;t<s.lines;t++)d=Math.max(1-(h+(s.lines-t)*m)%g*v,s.opacity),a.opacity(o,t*s.direction+f,d,s);a.timeout=a.el&&setTimeout(e,~~(1e3/p))}()}return a},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(t,n){var a,o=0,u=(n.lines-1)*(1-n.direction)/2;function c(e,t){return l(r(),{position:"absolute",width:n.length+n.width+"px",height:n.width+"px",background:e,boxShadow:t,transformOrigin:"left",transform:"rotate("+~~(360/n.lines*o+n.rotate)+"deg) translate("+n.radius+"px,0)",borderRadius:(n.corners*n.width>>1)+"px"})}for(;o<n.lines;o++)a=l(r(),{position:"absolute",top:1+~(n.width/2)+"px",transform:n.hwaccel?"translate3d(0,0,0)":"",opacity:n.opacity,animation:e&&s(n.opacity,n.trail,u+o*n.direction,n.lines)+" "+1/n.speed+"s linear infinite"}),n.shadow&&i(a,l(c("#000","0 0 4px #000"),{top:"2px"})),i(t,i(a,c(d(n.color,o),"0 0 1px rgba(0,0,0,.1)")));return t},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var p=l(r("group"),{behavior:"url(#default#VML)"});return!o(p,"transform")&&p.adj?function(){function e(e,t){return r("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}a.addRule(".spin-vml","behavior:url(#default#VML)"),f.prototype.lines=function(t,n){var r=n.length+n.width,a=2*r;function s(){return l(e("group",{coordsize:a+" "+a,coordorigin:-r+" "+-r}),{width:a,height:a})}var o,u=2*-(n.width+n.length)+"px",c=l(s(),{position:"absolute",top:u,left:u});function h(t,a,o){i(c,i(l(s(),{rotation:360/n.lines*t+"deg",left:~~a}),i(l(e("roundrect",{arcsize:n.corners}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:o}),e("fill",{color:d(n.color,t),opacity:n.opacity}),e("stroke",{opacity:0}))))}if(n.shadow)for(o=1;o<=n.lines;o++)h(o,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(o=1;o<=n.lines;o++)h(o);return i(t,c)},f.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=(i=(i=i.childNodes[t+r])&&i.firstChild)&&i.firstChild)&&(i.opacity=n)}}():e=o(p,"animation"),f}()},RjIu:function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({1:function(e,t,n,r,i){var a;return'        <div class="m2">\n          Get personal recommendations and the newest TED ideas sent straight to your inbox<br>\n          <a href="https://www.ted.com/recommends'+(null!=(a=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.disableCampaigns:t,{name:"unless",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?a:"")+'" target="_blank">Sign up now</a>\n        </div>\n'},2:function(e,t,n,r,i){return"?utm_source=embedPlayer&utm_medium=referral&utm_campaign=TED%20Recommends"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var a;return'\n<div class="vc">\n  <div class="vc__wrap">\n    <div class="hpad2 inverse text-center">\n'+(null!=(a=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.hideNewsletter:t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+'\n      <a hre="#" class="Embeddable__ended__rewatch button button--highlight" role="button">Rewatch</a>\n    </div>\n  </div>\n</div>\n'},useData:!0})},RoC8:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},TEnB:function(e,t,n){"use strict";var r;void 0===(r=function(e){var t,n=window.navigator;function r(e){var n=e.indexOf(t);if(-1!==n)return parseFloat(e.substring(n+t.length+1))}var i=[{string:n.userAgent,subString:"Chrome",identity:"Chrome"},{string:n.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:n.userAgent,subString:"Firefox",identity:"Firefox"},{string:n.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:n.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"}];e.browser=function(e){for(var n=0;n<e.length;n++){var r=e[n].string,i=e[n].prop;if(t=e[n].versionSearch||e[n].identity,r){if(-1!==r.indexOf(e[n].subString))return e[n].identity}else if(i)return e[n].identity}}(i)||"Unknown Browser",e.version=r(window.navigator.userAgent)||r(window.navigator.appVersion)||"Unknown Version"}.apply(t,[t]))||(e.exports=r)},TrNF:function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'\n<div class="Embeddable__scrubber__bar">\n  <div class="Embeddable__scrubber__meter"><div class="Embeddable__scrubber__meter__progress"></div></div>\n\n  <div class="Embeddable__scrubber__slider"></div>\n</div>\n'},useData:!0})},UQPx:function(e,t,n){var r,i;r=[n("O074"),n("me3u"),n("AQSU")],void 0===(i=function(e,t,n){return function(e){if(e.support.touch="ontouchend"in document,e.support.touch){var t,n=e.ui.mouse.prototype,r=n._mouseInit;n._touchStart=function(e){!t&&this._mouseCapture(e.originalEvent.changedTouches[0])&&(t=!0,this._touchMoved=!1,i(e,"mouseover"),i(e,"mousemove"),i(e,"mousedown"))},n._touchMove=function(e){t&&(this._touchMoved=!0,i(e,"mousemove"))},n._touchEnd=function(e){t&&(i(e,"mouseup"),i(e,"mouseout"),this._touchMoved||i(e,"click"),t=!1)},n._mouseInit=function(){this.element.bind("touchstart",e.proxy(this,"_touchStart")).bind("touchmove",e.proxy(this,"_touchMove")).bind("touchend",e.proxy(this,"_touchEnd")),r.call(this)}}function i(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var n=e.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(r)}}}(e),e}.apply(t,r))||(e.exports=i)},VObA:function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({1:function(e,t,n,r,i){var a,s=null!=t?t:e.nullContext||{},o=n.helperMissing,l=e.escapeExpression;return'      <li class="Embeddable__subtitles__item">\n        <a class="checkable Embeddable__subtitles__language" href="#" data-code="'+l("function"==typeof(a=null!=(a=n.languageCode||(null!=t?t.languageCode:t))?a:o)?a.call(s,{name:"languageCode",hash:{},data:i}):a)+'">\n          <span class="checkable__label">\n            '+l("function"==typeof(a=null!=(a=n.languageName||(null!=t?t.languageName:t))?a:o)?a.call(s,{name:"languageName",hash:{},data:i}):a)+"\n          </span>\n        </a>\n      </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var a;return'\n<div class="Embeddable__expandable__content">\n  <ul class="sl">\n    <li class="Embeddable__subtitles__item">\n      <a class="checkable Embeddable__subtitles__language" href="#">\n        <span class="checkable__label">\n          Turn subtitles off\n        </span>\n      </a>\n    </li>\n\n'+(null!=(a=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.languages:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+"  </ul>\n</div>\n"},useData:!0})},Wd7D:function(e,t,n){"use strict";var r,i;r=[n("lDDm"),t],void 0===(i=function(e,t){t.getTests=function(){var t=e("abby");return t&&t.tests||{}},t.getVariation=function(e){return t.getTests()[e]},t.isVariation=function(e,n){return t.getVariation(e)===n}}.apply(t,r))||(e.exports=i)},"YT+K":function(e,t,n){"use strict";var r,i;r=[n("+w1B"),n("yCnj")],void 0===(i=function(e,t){function n(n,r,i){var a=!!(i&&i>0)&&i;return r=r||"video",new e.SafeString(t({cropClass:"video"===r?"thumb--crop-top":"",src:n,ratio:r,playDuration:a,playIcon:!a}))}return e.registerHelper("thumb",n),n}.apply(t,r))||(e.exports=i)},ZQBx:function(e,t,n){"use strict";var r;void 0===(r=function(e){e._findEls=null,e.find=function(e){if(this._findEls||(this._findEls={}),this._findEls[e])return this._findEls[e];var t=this.$el.find(e);return t.length&&(this._findEls[e]=t),t}}.apply(t,[t]))||(e.exports=r)},ZyKY:function(e,t,n){"use strict";t.__esModule=!0;var r=n("82EY");t.default=function(e){e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,a=n.fn;if(!0===t)return a(this);if(!1===t||null==t)return i(this);if(r.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var s=r.createFrame(n.data);s.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:s}}return a(t,n)})},e.exports=t.default},aJwO:function(e,t,n){"use strict";var r,i;r=[n("O074"),n("5cge"),n("TEnB"),n("meAz"),n("lDDm"),t],void 0===(i=function(e,t,n,r,i,a){var s=window&&window.console;a.postUnthrottled=function(t){e.post("https://error-collector.ted.com/",{message:t})},a.post=t.throttle(a.postUnthrottled,5e3),a.log=function(t,o){if(o=e.extend({console:!0,error:!0,message:t,context:"js",uri:window.location.href,throttled:!0,client_name:n.browser,client_version:n.version,elapsed_seconds:Math.floor((+new Date-i("startTime"))/1e3),profile_id:r.get()||"N/A",user_agent:window.navigator?window.navigator.userAgent:"Unknown User Agent"},o||{}),a[o.throttled?"post":"postUnthrottled"](o),o.console&&s&&s.log){var l=o.error?"#FCF1CC":"#999999";s.log("%c"+t,"color:"+l)}}}.apply(t,r))||(e.exports=i)},awRL:function(e,t,n){"use strict";(function(e){var r,i;r=[n("lU1m")],void 0===(i=function(e){var t={get:function(){return e.get("_explore")},getNormalized:function(){switch(String(t.get())){case"null":case"undefined":case"no":return"uninvited";case"0":return"invited";case"1":return"opted-in";case"2":return"opted-out";default:return"unknown"}},getUserTedIdFromExplore:function(){var t=e.get("_explr_uid");return void 0!==t?t:null}};return t}.apply(t,r))||(e.exports=i)}).call(this,n("RoC8")(e))},cd6c:function(e,t,n){"use strict";var r,i;r=[n("O074"),n("lDDm"),n("3EqX")],void 0===(i=function(e,t,n){function r(t){t._isInternal&&(this._data={lastMetaTalkId:null,lastPlayTalkId:null},this._widget=t,this._addHandlers(),e(window).unload(function(){n.stop()}))}return r.prototype._sendViewBeacon=function(e){var n=window.COMSCORE;n&&n.beacon&&n.beacon({c1:"1",c2:t("csClientId"),c5:"02",c6:e})},r.prototype._sendPostrollBeacon=function(){var e=window.COMSCORE;e&&e.beacon&&e.beacon({c1:"1",c2:t("csClientId"),c5:"10"})},r.prototype._onTalkPlay=function(e){this._sendViewBeacon(e)},r.prototype._addHandlers=function(){var e=this,t={playertalk:function(e,t){n.init({talkId:t.id})},playerplay:function(){var t=e._widget.options.currentTalk.id;e._data.lastPlayTalkId!==t&&(e._onTalkPlay(t),e._data.lastPlayTalkId=t),n.start()},playerpause:function(){n.stop()},playercomplete:function(){n.stop()},playerprerollstart:function(){n.startAd()},playerprerollcomplete:function(){n.stopAd()},playerpostrollstart:function(){e._sendPostrollBeacon(),n.startAd()},playerpostrollcomplete:function(){n.stopAd()}};this._handlers=t,this._widget._on(t)},r}.apply(t,r))||(e.exports=i)},co8E:function(e,t,n){"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=a.COMPILER_REVISION;if(t!==n){if(t<n){var r=a.REVISION_CHANGES[n],s=a.REVISION_CHANGES[t];throw new i.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+s+").")}throw new i.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},t.template=function(e,t){if(!t)throw new i.default("No environment passed to template");if(!e||!e.main)throw new i.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n={strict:function(e,t){if(!(t in e))throw new i.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,r=0;r<n;r++)if(e[r]&&null!=e[r][t])return e[r][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:r.escapeExpression,invokePartial:function(n,a,s){s.hash&&(a=r.extend({},a,s.hash),s.ids&&(s.ids[0]=!0));n=t.VM.resolvePartial.call(this,n,a,s);var o=t.VM.invokePartial.call(this,n,a,s);null==o&&t.compile&&(s.partials[s.name]=t.compile(n,e.compilerOptions,t),o=s.partials[s.name](a,s));if(null!=o){if(s.indent){for(var l=o.split("\n"),u=0,c=l.length;u<c&&(l[u]||u+1!==c);u++)l[u]=s.indent+l[u];o=l.join("\n")}return o}throw new i.default("The partial "+s.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,r,i){var a=this.programs[e],o=this.fn(e);return t||i||r||n?a=s(this,e,o,t,n,r,i):a||(a=this.programs[e]=s(this,e,o)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=r.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function o(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=r.data;o._setup(r),!r.partial&&e.useData&&(i=function(e,t){t&&"root"in t||((t=t?a.createFrame(t):{}).root=e);return t}(t,i));var s=void 0,u=e.useBlockParams?[]:void 0;function c(t){return""+e.main(n,t,n.helpers,n.partials,i,u,s)}return e.useDepths&&(s=r.depths?t!=r.depths[0]?[t].concat(r.depths):r.depths:[t]),(c=l(e.main,c,n,r.depths||[],i,u))(t,r)}return o.isTop=!0,o._setup=function(r){r.partial?(n.helpers=r.helpers,n.partials=r.partials,n.decorators=r.decorators):(n.helpers=n.merge(r.helpers,t.helpers),e.usePartial&&(n.partials=n.merge(r.partials,t.partials)),(e.usePartial||e.useDecorators)&&(n.decorators=n.merge(r.decorators,t.decorators)))},o._child=function(t,r,a,o){if(e.useBlockParams&&!a)throw new i.default("must pass block params");if(e.useDepths&&!o)throw new i.default("must pass parent depths");return s(n,t,e[t],r,0,a,o)},o},t.wrapProgram=s,t.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},t.invokePartial=function(e,t,n){var s=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var l=void 0;n.fn&&n.fn!==o&&function(){n.data=a.createFrame(n.data);var e=n.fn;l=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=a.createFrame(n.data),n.data["partial-block"]=s,e(t,n)},e.partials&&(n.partials=r.extend({},n.partials,e.partials))}();void 0===e&&l&&(e=l);if(void 0===e)throw new i.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=o;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("82EY")),i=function(e){return e&&e.__esModule?e:{default:e}}(n("AIJh")),a=n("dJlP");function s(e,t,n,r,i,a,s){function o(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=s;return!s||t==s[0]||t===e.nullContext&&null===s[0]||(o=[t].concat(s)),n(e,t,e.helpers,e.partials,i.data||r,a&&[i.blockParams].concat(a),o)}return(o=l(n,o,e,s,r,a)).program=t,o.depth=s?s.length:0,o.blockParams=i||0,o}function o(){return""}function l(e,t,n,i,a,s){if(e.decorator){var o={};t=e.decorator(t,o,n,i&&i[0],a,s,i),r.extend(t,o)}return t}},d6sQ:function(e,t,n){"use strict";var r,i;r=[n("5cge"),n("MaNa"),n("jn94"),n("EUOL")],void 0===(i=function(e,t,n){return t.extend({className:"Embeddable__expandable",propsDefaults:{open:!1},propsEvents:{"change:open":function(e,t){this[t?"open":"close"]()}},open:function(){this._setCoords()},close:function(){this.$el.css("top","-100%")},anchorTo:function(e){this.$anchor=e,this._setCoords()},_setCoords:function(){var t=this.find("div.Embeddable__expandable__content");if(t.length&&this.$anchor&&this.props.get("open")){this._settedCoordsOnce||(this._setCoordsBound=e.bind(this._setCoords,this),n("height").future(this._setCoordsBound),n("width").future(this._setCoordsBound),this._settedCoordsOnce=!0);var r={},i=this.$anchor.offset(),a=i.left,s=i.top,o=s-t.outerHeight();o<0?(r.top=0,r.height=s+"px"):(r.top=o,r.height="auto");var l=t.outerWidth();n("width").read()-a-l<0?(r.left="initial",r.right=0):(r.left=a,r.right="initial"),this.$el.css(r)}}})}.apply(t,r))||(e.exports=i)},dJlP:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=u;var i=n("82EY"),a=r(n("AIJh")),s=n("hSGR"),o=n("/YDJ"),l=r(n("jYw0"));t.VERSION="4.0.11";t.COMPILER_REVISION=7;t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};function u(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},s.registerDefaultHelpers(this),o.registerDefaultDecorators(this)}u.prototype={constructor:u,logger:l.default,log:l.default.log,registerHelper:function(e,t){if("[object Object]"===i.toString.call(e)){if(t)throw new a.default("Arg not supported with multiple helpers");i.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("[object Object]"===i.toString.call(e))i.extend(this.partials,e);else{if(void 0===t)throw new a.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if("[object Object]"===i.toString.call(e)){if(t)throw new a.default("Arg not supported with multiple decorators");i.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var c=l.default.log;t.log=c,t.createFrame=i.createFrame,t.logger=l.default},diAC:function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("AIJh"));t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new r.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default},eJwn:function(e,t,n){"use strict";var r,i;r=[n("O074"),n("5cge"),n("ikLi")],void 0===(i=function(e,t){var n=e(document);function r(e){e._hoverIsTouchTriggered=!1}e.widget("ted.hover",{options:{hoverIdleDelay:4e3,hoverStartDelay:200,hoverStopDelay:400,hoverSwipeTolerance:5},hoverState:function(e){return t.isUndefined(e)||this._hoverChangeState(null,!!e),this._hoverIsOn},_hoverIsClicking:!1,_hoverIsOn:!1,_hoverIsTouchTriggered:!1,_hoverLastCoords:null,_hoverStartTimeout:null,_hoverIdleTimeout:null,_hoverStopTimeout:null,_hoverChangeStateBound:null,_hoverMoveChangeBound:null,_hoverMouseMoveThrottled:null,_hoverTouchOutBound:null,_create:function(){this._hoverInit()},_hoverEvents:function(){return{mouseenter:this._hoverMouseMoveThrottled,mousemove:this._hoverMouseMoveThrottled,mouseleave:this._hoverOut,touchstart:this._hoverTouchStart,touchend:this._hoverTouchEnd,touchmove:this._hoverTouchMove,touchcancel:this._hoverTouchCancel,mousedown:this._hoverMouseDown,mouseup:this._hoverMouseUp,click:this._hoverMouseClick}},_hoverMove:function(e){this._hoverIsOn?this._hoverMoveChange(e):this._hoverStartSetTimeout(e)},_hoverMoveChange:function(e){var t={x:e.pageX||null,y:e.pageY||null};"mousedown"!==e.type&&"touchstart"!==e.type&&this._hoverLastCoords&&t.x&&t.x===this._hoverLastCoords.x&&t.y===this._hoverLastCoords.y||(this._hoverLastCoords=t,this._hoverChangeState(e,!0),this._hoverIdleSetTimeout(e))},_hoverOut:function(e){this._hoverStartClearTimeout(),this._hoverStopSetTimeout(e)},_hoverMouseClick:function(e){this._hoverIsTouchTriggered||this._hoverIsOn&&this._trigger("tap",e)},_hoverMouseDown:function(){this._hoverIsTouchTriggered||(this._hoverIsClicking=!0,this._hoverIdleClearTimeout())},_hoverMouseMove:function(e){this._hoverIsTouchTriggered||this._hoverMove(e)},_hoverMouseUp:function(e){this._hoverIsTouchTriggered||(this._hoverIsClicking=!1,this._hoverIdleSetTimeout(e))},_hoverTouchStart:function(){this._hoverIsTouchTriggered=!0,this._hoverTouchStartCoords=null,this._hoverTouchEndCoords=null},_hoverTouchEnd:function(e){this._hoverTouchSafetyTimeout&&window.clearTimeout(this._hoverTouchSafetyTimeout),this._hoverTouchSafetyTimeout=t.delay(r,600,this),this._hoverTouchEndCoords&&function(e,t,n){return Math.abs(e[0]-t[0])>n||Math.abs(e[1]-t[1])>n}(this._hoverTouchStartCoords,this._hoverTouchEndCoords,this.options.hoverSwipeTolerance)||(this._hoverIsOn&&this._trigger("tap",e),this._hoverMoveChange(e))},_hoverTouchCancel:function(e){e.preventDefault()},_hoverTouchMove:function(e){var t=e.originalEvent.touches[0],n=[t.pageX,t.pageY];null===this._hoverTouchStartCoords?this._hoverTouchStartCoords=n:this._hoverTouchEndCoords=n,this._hoverIsOn&&this._hoverMove(e)},_hoverTouchOut:function(t){e(t.target).closest(this.element).length||this._hoverChangeState(t,!1)},_hoverChangeState:function(e,t){t=!!t,this._hoverIdleClearTimeout(),this._hoverStartClearTimeout(),this._hoverStopClearTimeout(),!t&&this._hoverIsClicking||t!==this._hoverIsOn&&(this._hoverIsOn=t,this[t?"_hoverStart":"_hoverStop"](e),t?this._on(n,{touchstart:this._hoverTouchOutBound}):this._off(n,"touchstart"))},_hoverStartSetTimeout:function(e){this._hoverStartTimeout||(this._hoverStartTimeout=t.delay(this._hoverMoveChangeBound,this.options.hoverStartDelay,e))},_hoverStartClearTimeout:function(){this._hoverStartTimeout&&(window.clearTimeout(this._hoverStartTimeout),this._hoverStartTimeout=null)},_hoverStopSetTimeout:function(e){this._hoverStopClearTimeout(),this._hoverStopTimeout=t.delay(this._hoverChangeStateBound,this.options.hoverStopDelay,e,!1)},_hoverStopClearTimeout:function(){this._hoverStopTimeout&&(window.clearTimeout(this._hoverStopTimeout),this._hoverStopTimeout=null)},_hoverIdleSetTimeout:function(e){this._hoverIdleClearTimeout(),!this._hoverIsClicking&&this.options.hoverIdleDelay&&(this._hoverIdleTimeout=t.delay(this._hoverChangeStateBound,this.options.hoverIdleDelay,e,!1))},_hoverIdleClearTimeout:function(){this._hoverIdleTimeout&&(window.clearTimeout(this._hoverIdleTimeout),this._hoverIdleTimeout=null)},_hoverInit:function(){this._hoverChangeStateBound=t.bind(this._hoverChangeState,this),this._hoverMoveChangeBound=t.bind(this._hoverMoveChange,this),this._hoverTouchOutBound=t.bind(this._hoverTouchOut,this),this._hoverMouseMoveThrottled=t.throttle(t.bind(this._hoverMouseMove,this),100,{leading:!0,trailing:!1}),this._on(this._hoverEvents())},_hoverDestroy:function(){this._off(this._hoverEvents())},_hoverStart:function(e){this._trigger("start",e)},_hoverStop:function(e){this._trigger("stop",e)}})}.apply(t,r))||(e.exports=i)},ecIC:function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'\n<div class="vc">\n  <div class="vc__wrap">\n    <div class="Embeddable__player__object"></div>\n  </div>\n</div>\n'},useData:!0})},"f9M/":function(e,t,n){"use strict";var r,i;r=[n("O074"),n("5cge"),n("twGK"),n("gJhO"),n("cd6c"),n("rc+f"),n("gBPQ"),n("npc9"),n("OXOu"),n("lDDm"),n("JNxy"),n("TEnB"),n("jn94"),n("j7o/"),n("lU1m"),n("ReFC"),n("ikLi"),n("eJwn"),n("EUOL")],void 0===(i=function(e,t,n,r,i,a,s,o,l,u,c,d,h,f,p,g){var v="player__container__video",m=e("<div></div>");function y(e){e.preventDefault(),e.stopPropagation()}var _=t.once(function(n,r){window.onYouTubeIframeAPIReady=t.bind(n,r),e.getScript("//www.youtube.com/iframe_api")});return e.widget("ted.player",e.ted.hover,{options:{breakpoint:!0,currentTalk:null,defaultSubtitles:!1,flashVars:{},hlsjsConfig:{maxStarvationDelay:2},hlsjsEvents:{},logLevel:2,metricsKey:null,mai:!0,maiAdUnitId:null,mode:l("playerMode")||null,modes:null,nativeLanguage:"en",startTrackingAt:0,swf:u("playerPath"),talks:null,capQualityToStage:!0,hideCursorDelay:1e3,uncropped:!0,soonThreshold:.1,recordInIdentity:!0},_isPlayerInitialized:!1,_isPlaying:!1,_addElements:function(){var e=this.element.find("div.player__container");e.length||(e=m.clone().addClass("player__container").appendTo(this.element));var t=e.find("div.player__container__placeholder");t.length||(t=m.clone().addClass("player__container__placeholder").appendTo(e)),t.wrap(m.clone().addClass("player__container__focus"));var n=t.closest("div.player__container__focus").addClass(v).attr({href:"#",role:"button","aria-label":"Play/Pause"}),r=e.find("div.player__container__cursor-killer");r.length||(r=m.clone().addClass("player__container__cursor-killer").appendTo(e)),this.elements={container:e,focal:n,placeholder:t,cursorKiller:r}},_breakpoint:function(e){this.options.breakpoint&&(e<1024?this.video.attr("controls","controls"):this.video.removeAttr("controls"))},_create:function(){this.options.currentTalk||(this.options.currentTalk=this.options.talks[0]),this._on({playerplay:function(){this._isPlaying=!0,this.element.addClass("player--playing").removeClass("player--paused")},playerpause:function(){this._isPlaying=!1,this.element.addClass("player--paused").removeClass("player--playing")},playerended:function(){this._isPlaying=!1,this.element.removeClass("player--paused").removeClass("player--playing")}});var e=this.talk();this._isInternal=Boolean(e&&e.resources&&e.resources.hls&&e.resources.hls.stream),this.options.hoverStopDelay=this.options.hideCursorDelay,new n(this),new r(this),new i(this),new a(this),this._initializePlayer()},_initializePlayer:function(){this._isPlayerInitialized||(this._isPlayerInitialized=!0,this.element.addClass("player "+(this.options.uncropped?"player--uncropped":"")),this._addElements(),this._isInternal?this._initializeInternalPlayer():"YouTube"===this.talk().external.service&&this._initializeYouTubePlayer(),this._hoverInit())},_initializeYouTubePlayer:function(){_(this._youTubeApiReady,this),this._on({playerrequestplay:function(){this._ytPlayer&&this._ytPlayer.playVideo&&this._ytPlayer.playVideo()}})},_youTubeApiReady:function(){var t=this.talk(),n="//www.youtube.com/embed/"+t.external.code+"?showinfo=0&enablejsapi=1&autoplay=0&origin="+location.origin;t.external.startTime&&(n+="&start="+t.external.startTime);var r=e("<iframe class="+v+" src="+n+" frameborder=0 allowfullscreen></iframe>");this.elements.placeholder.replaceWith(r),this._ytPlayer=new YT.Player(r.get(0),{events:{}}),this._trigger("domready")},_getMaiUrlOverrides:function(){return"staging"===u("env")||"development"===u("env")},_initializeInternalPlayer:function(){var n=l("dfptest"),r=l("maiAdUnitId");r&&(this.options.maiAdUnitId=r),this.options.talks=this.options.talks.map(function(e){if(n){var t=encodeURIComponent(n);e.resources.hls.adUrl=e.resources.hls.adUrl.replace(/(cust_params=[^&]+)&/,"$1%26dfptest%3D"+t+"&"),e.resources.hls.maiTargeting.dfptest=n}var r=Number(e.introDuration);return e.introDuration=Math.min(r,11.82),e.adDuration=0===r?0:3.33,e.postAdDuration=0===r?0:.83,e});var i={attrs:{class:v,playsinline:"playsinline"},dai:!1,defaultSubtitles:this.options.defaultSubtitles,el:this.elements.placeholder.get(0),flashVars:this.options.flashVars,hlsjsConfig:this.options.hlsjsConfig,hlsjsEvents:this.options.hlsjsEvents,logLevel:this.options.logLevel,mai:this.options.mai,maiUrlOverrides:this._getMaiUrlOverrides(),metricsKey:this.options.metricsKey,mode:this.options.mode,modes:this.options.modes,nativeLanguage:this.options.nativeLanguage,subproperty:this.options.subproperty,capQualityToStage:this.options.capQualityToStage,swf:this.options.swf,talks:this.options.talks};this.options.maiAdUnitId&&(i.maiAdUnitId=this.options.maiAdUnitId),this.player=new c(i),this.element.addClass("player--"+this.mode()),o()&&this.element.addClass("player--is-mobile"),this._subscribeToPlayerEvents(),this._subscribeToKeyboardEvents(),this.player.one("ready.dom",t.bind(this._playerDomReady,this)),this.player.canFullScreen&&(this.player.on("enterFullScreen",t.bind(this._playerEnterFullScreen,this)),this.player.on("exitFullScreen",t.bind(this._playerExitFullScreen,this))),this.player.on("talk",t.bind(function(e){this.options.currentTalk=e,this._trigger("talk",null,e)},this)),this.player.on("bufferUnplayable",t.bind(this._bufferingStarted,this)),this.player.on("bufferPlayable",t.bind(this._bufferingStopped,this)),this.player.on("prolongedBuffer",t.bind(function(e){this._trigger("prolongedBuffer",null,{duration:e})},this)),this.player.on("prolongedRebuffer",t.bind(function(e){this._trigger("prolongedRebuffer",null,{duration:e})},this)),this._on({playercurrenttime:function(e,t){this._currentTime=t.currentTime},playerplaybackrate:function(e,t){this._playbackRate=t.playbackRate},playerpopout:function(e,t){this._popOut=t.popOut},playervolume:function(e,t){this._volume=t.volume},playerprogress:function(){var e;return function(t,n){!e&&n.progress>1-this.options.soonThreshold&&this.player.isLastTalk()&&(e=!0,this._trigger("soon"))}}(),playerpostrollcomplete:function(){this.player.isLastTalk()&&!this._queuedTalkId&&(this._queuedTalkId=this.options.currentTalk.id)},playerrequestplay:function(){var n=e("*:focus");n.closest(this.elements.focal).length||(this._oldFocus=n),this.elements.focal.attr("tabindex","1"),this._queuedTalkId?(e(this.player.el).attr("preload",""),this.player.playTalk(this._queuedTalkId),this._queuedTalkId=null,t.delay(s(this.player,"play"))):this.player.play()},playerplay:function(){this.elements.focal.focus()},playerrequestpause:function(){this.player.postrolling||this.player.pause()}})},_destroy:function(){this.options.breakpoint&&h("breakpoint").unsubscribe(this._breakpoint)},_playerDomReady:function(){var n=this,r=e(n.player.el);if(n.video=r,n.options.breakpoint&&h("breakpoint").subscribe(t.bind(n._breakpoint,n)),"hlsjs"===n.player.mode){var i="player-menu-"+Math.round(1e3*Math.random()),a=e('<menu type="context" id="'+i+'"></menu>'),s=e("<menuitem label=Metrics></menuitem>");s.on("click",function(){n._trigger("metricsToggle")}),a.append(s),r.append(a),r.attr("contextmenu",i)}n._trigger("domready")},_playerEnterFullScreen:function(){this.element.addClass("player--fullscreen"),this._fullscreenZone("activate")},_playerExitFullScreen:function(){this.element.removeClass("player--fullscreen"),this._fullscreenZone("deactivate")},_playerOption:function(e){return this.player&&this.player.options&&this.player.options[e]||null},_subscribeToKeyboardEvents:function(){this._on(this.elements.focal,{keydown:this._keyDown,keyup:this._keyUp})},_subscribeToPlayerEvents:function(){var e,n=this;this._on({playerrequestplay:function(){e=!0,n._hasPlayBeenRequested||(n._hasPlayBeenRequested=!0,n._showBuffering())},playerplay:function(){e=!1}}),t.forEach(["ad","currentTime","duration","ended","enterFullScreen","error","exitFullScreen","pause","play","progress","ready","seeked","seeking","volume","muted","idle","complete","talkComplete","prerollStart","prerollComplete","tedStart","postrollStart","postrollComplete","postrollDuration","postrollRemaining","adBlock","bufferPlayable","bufferUnplayable","subtitle","playbackRate","popOut","playToken","metricsData","metricsToggle"],function(t){n.player.on(t,function(r){var i={};"play"!==t||e||n._trigger("requestplay"),i[t]=r,n._trigger(t,null,i),n["_"+t]=r})})},_hoverStart:function(e){this.element.addClass("player--show-cursor"),this._trigger("hoverstart",e)},_hoverStop:function(e){this.element.removeClass("player--show-cursor"),this._trigger("hoverstop",e)},_showBuffering:function(){this._spinner||(this._spinner=new g({lines:13,length:13,width:5,radius:16,color:"#FFF",trail:50,shadow:!0})),this._isBuffering&&this._hasPlayBeenRequested?this._spinner.spin(this.element.get(0)):this._spinner.stop()},_bufferingStarted:function(){this._isBuffering=!0,this._showBuffering()},_bufferingStopped:function(){this._isBuffering=!1,this._showBuffering()},_keyDown:function(t){var n=e.ui.keyCode,r=t.ctrlKey||t.shiftKey||t.altKey,i=this.options.currentTalk&&this.options.currentTalk.duration||0,a=this._currentTime||0,s=this.volume()||0;switch(t.keyCode){case n.ENTER:case n.NUMPAD_ENTER:case n.SPACE:this.toggle(),y(t);break;case n.DOWN:r?this.mute(!0):this.volume(s-.1),y(t);break;case n.UP:r?this.mute(!1):this.volume(s+.1),y(t);break;case n.LEFT:r?this.seek(a-.1*i):this.seek(a-15),y(t);break;case n.RIGHT:r?this.seek(a+.1*i):this.seek(a+15),y(t);break;case n.HOME:this.seek(0),y(t);break;case n.END:this.seek(i-1),y(t);break;case n.TAB:var o=this._oldFocus;this._tabDown||!o||o.is(":hidden")||o.is(":disabled")||(o.focus(),y(t)),this._oldFocus=null,this._tabDown=!0}},_keyUp:function(t){t.keyCode===e.ui.keyCode.TAB&&(this._tabDown=!1)},_fullscreenZone:function(e){var t=this.player.fullScreenElement,n=this._fullscreenZoneObj;t&&(n||(n=new f(t),this._fullscreenZoneObj=n),n[e]())},mode:function(){return this._isInternal?this.player.options.mode:"external"},talk:function(e){return arguments.length&&(this.queue(e),this._trigger("requestplay")),this.options.currentTalk},talks:function(){return this.player.talks},toggle:function(){this[this._isPlaying?"pause":"play"]()},play:function(){this._trigger("requestplay")},playNext:function(){this._trigger("requestnext"),this.player.playNext()},playPrev:function(){this._trigger("requestprev"),this.player.playPrev()},pause:function(){this._trigger("requestpause")},_playbackRate:null,playbackRate:function(e){return arguments.length&&(this.player.playbackRate(e),this._playbackRate=e),this._playbackRate},_popOut:!1,popOut:function(e){return arguments.length&&(this.player.popOut(e),this._popOut=e),this._popOut},queue:function(e){this._queuedTalkId=e},sendAds:function(e){this.player.sendAds(e)},seek:function(e,t){this.options.startTrackingAt=t?e:0,this.player.seek(e)},_subtitle:null,subtitle:function(e){if(arguments.length){var n=!!e&&t.find(this.talk().languages,{languageCode:e});this.player.subtitle(e),this._subtitle=n}return this._subtitle},_volume:null,volume:function(e){return arguments.length&&this.player.volume(e),this._volume},_muted:null,mute:function(e){return arguments.length&&this.player.mute(e),this._muted},toggleFullScreen:function(){var t=e("html,body"),n=e(document).scrollTop(),r=e(this.element).offset().top;n>r&&t.scrollTop(r),this[this.player.isFullScreen?"cancelFullScreen":"requestFullScreen"](this.elements.container.get(0))},requestFullScreen:function(e){this.player.requestFullScreen(e)},cancelFullScreen:function(e){this.player.cancelFullScreen(e)},isControllable:function(){return this._isInternal},isFullScreen:function(){return!!this._isInternal&&this.player.isFullScreen},canFullScreen:function(){return!!this._isInternal&&this.player.canFullScreen},canPlaybackRate:function(){return!!this._isInternal&&this.player.canPlaybackRate},canPopOut:function(){return!!this._isInternal&&this.player.canPopOut},canSubtitle:function(){return this._isInternal&&!!this.player.canSubtitle},canVolume:function(){return this._isInternal&&!!this.player.canVolume},capQualityToStage:function(e){this.options.capQualityToStage=e,this.player.capQualityToStage(e)},nativeControls:function(e){this.player.nativeControls(e)},maiAdUnitId:function(){return this._playerOption("maiAdUnitId")}}),function(t,n){return e(t).player(n)}}.apply(t,r))||(e.exports=i)},fsP3:function(e,t,n){"use strict";var r,i;r=[n("O074")],void 0===(i=function(e){return function t(n,r,i){var a,s;for(a=0,s=r.length;a<s;a++)e.isArray(r[a])?t(n,r[a],i):r[a].apply(n,i)}}.apply(t,r))||(e.exports=i)},gBPQ:function(e,t,n){"use strict";var r;void 0===(r=function(){var e=function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e[t].apply(e,n)}};return e.create=function(e){return function(){var t=arguments,n=function(){return e.apply(this,t)};return n.prototype=e.prototype,new n}},e.get=function(e){return function(t){return t.get&&"function"==typeof t.get?t.get(e):t[e]&&"function"==typeof t[e]?t[e].call(t):t[e]}},e.splat=function(){var t=Array.prototype.slice.call(arguments);return function(n){for(var r=[],i=0;i<t.length;i++)r.push(e.get(t[i]).call(n));return r}},e.send=function(e){var t=Array.prototype.slice.call(arguments,1);return function(n){return n[e].apply(n,t)}},e.and=function(){var e=Array.prototype.slice.call(arguments);return function(t){for(var n=!0,r=0;r<e.length;r++)n=n&&e[r].call(null,t);return n}},e.not=function(e){return function(){return!e.apply(null,arguments)}},e.ascending=function(e,t){return e-t},e.descending=function(e,t){return t-e},e.falsey=e.not(e.truthy=function(e){return!!e}),e}.apply(t,[]))||(e.exports=r)},gJhO:function(e,t,n){"use strict";var r,i;r=[n("O074"),n("5cge"),n("meAz"),n("lDDm")],void 0===(i=function(e,t,n,r){function i(e){var t=r("zone")||{};this._data={lastMetaTalkId:null,lastPlayTalkId:null,vmAPIKey:t.api_key||"unknown"},this._widget=e,this._addHandlers()}return i.prototype._sendVM=function(n){var r=t.extend({},n,{share_token:this._widget.options.shareToken});e.post("/talks/"+this._widget.talk().id+"/views",{view:r},null,"json")},i.prototype._recordViewID=function(){this._widget.options.recordInIdentity&&n.get()&&e.post("/talks/"+this._widget.talk().id+"/user_views",{},null,"json")},i.prototype._recordViewVM=function(){var e=this._widget.mode();if("hls"===e&&this._sendVM({apikey:this._data.vmAPIKey,format:"hls",quality:"variant",service:"ted_player_html5_hls"}),"hlsjs"===e&&this._sendVM({apikey:this._data.vmAPIKey,format:"hls",quality:"variant",service:"ted_player_html5_hlsjs"}),"flash"===e&&this._sendVM({apikey:this._data.vmAPIKey,format:"hls",quality:"variant",service:"ted_player_flash_hls"}),"h264"===e){var t=this._widget.options.currentTalk.resources.h264[0].bitrate;this._sendVM({apikey:this._data.vmAPIKey,format:"mp4",quality:t?t+"k":"variant",service:"ted_player_html5_mp4"})}},i.prototype._onTalkPlay=function(){this._recordViewID(),this._recordViewVM()},i.prototype._addHandlers=function(){var e=this,t={playerrequestplay:function(){e._widget._ytPlayer&&e._widget._ytPlayer.playVideo&&e._sendVM({apikey:e._data.vmAPIKey,service:""})},playerplay:function(){var t=e._widget.options.currentTalk.id;e._data.lastPlayTalkId!==t&&(e._onTalkPlay(),e._data.lastPlayTalkId=t)}};this._handlers=t,this._widget._on(t)},i}.apply(t,r))||(e.exports=i)},ggSm:function(e,t,n){var r=n("mp5j");function i(e){return e&&(e.__esModule?e.default:e)}e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,r,a,s){var o=null!=t?t:e.nullContext||{},l=e.escapeExpression;return'\n<div class="Embeddable__controls__bar">\n  <a class="Embeddable__button Embeddable__controls__unskip" href="#">\n    '+l(i(n("3fiq")).call(o,"control-unskip","Previous talk","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n  </a>\n\n  <a class="Embeddable__button Embeddable__controls__play" href="#">\n    '+l(i(n("3fiq")).call(o,"control-play","Play","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n  </a>\n\n  <a class="Embeddable__button Embeddable__controls__pause" href="#">\n    '+l(i(n("3fiq")).call(o,"control-pause","Pause","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n  </a>\n\n  <a class="Embeddable__button Embeddable__controls__skip" href="#">\n    '+l(i(n("3fiq")).call(o,"control-skip","Next talk","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n  </a>\n\n  <a class="Embeddable__button Embeddable__controls__volume" href="#">\n    '+l(i(n("3fiq")).call(o,"control-volume","Volume","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n  </a>\n\n  <span class="Embeddable__controls__timing">\n    <span class="Embeddable__controls__current">0:00</span>/<span class="Embeddable__controls__duration">0:00</span>\n  </span>\n\n  <div class="Embeddable__controls__secondary">\n    <a class="Embeddable__button Embeddable__controls__subtitles" href="#">\n      '+l(i(n("3fiq")).call(o,"control-subtitles","Subtitles","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n    </a>\n\n    <a class="Embeddable__button Embeddable__controls__playlist" href="#">\n      '+l(i(n("3fiq")).call(o,"control-playlist","Show talks","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n    </a>\n\n    <a class="Embeddable__button Embeddable__controls__fullscreen" href="#">\n      '+l(i(n("3fiq")).call(o,"control-fullscreen","Full screen","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n    </a>\n\n    <a class="Embeddable__button Embeddable__controls__outbound" href="htps://www.ted.com/" target="_blank">\n      '+l(i(n("3fiq")).call(o,"outbound","Open on TED.com","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+'\n    </a>\n\n    <a class="Embeddable__button Embeddable__controls__smallscreen" href="#">\n      '+l(i(n("3fiq")).call(o,"control-fullscreen-exit","Exit full screen","Embeddable__button__icon",{name:"icon",hash:{},data:s}))+"\n    </a>\n  </div>\n</div>\n"},useData:!0})},h13g:function(e,t,n){"use strict";var r,i;r=[n("MaNa")],void 0===(i=function(e){return e.extend({className:"Embeddable__play-button g-button-play",propsDefaults:{enabled:!1,visible:!1},propsEvents:{"change:enabled":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__play-button--enabled")},"change:visible":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__play-button--visible")}}})}.apply(t,r))||(e.exports=i)},hGk8:function(e,t,n){"use strict";t.__esModule=!0;var r=n("82EY");t.default=function(e){e.registerDecorator("inline",function(e,t,n,i){var a=e;return t.partials||(t.partials={},a=function(i,a){var s=n.partials;n.partials=r.extend({},s,t.partials);var o=e(i,a);return n.partials=s,o}),t.partials[i.args[0]]=i.fn,a})},e.exports=t.default},hSGR:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){i.default(e),a.default(e),s.default(e),o.default(e),l.default(e),u.default(e),c.default(e)};var i=r(n("ZyKY")),a=r(n("20JI")),s=r(n("diAC")),o=r(n("7UkH")),l=r(n("IVfQ")),u=r(n("iRzr")),c=r(n("k+yp"))},iRzr:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t.default},ikLi:function(e,t,n){var r,i;r=[n("O074")],void 0===(i=function(e){return function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n,r=0;null!=(n=t[r]);r++)try{e(n).triggerHandler("remove")}catch(e){}i(t)},e.widget=function(t,n,r){var i,a,s,o,l={},u=t.split(".")[0];t=t.split(".")[1],i=u+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[u]=e[u]||{},a=e[u][t],s=e[u][t]=function(e,t){if(!this._createWidget)return new s(e,t);arguments.length&&this._createWidget(e,t)},e.extend(s,a,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),(o=new n).options=e.widget.extend({},o.options),e.each(r,function(t,r){e.isFunction(r)?l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,a=this._superApply;return this._super=e,this._superApply=i,t=r.apply(this,arguments),this._super=n,this._superApply=a,t}}():l[t]=r}),s.prototype=e.widget.extend(o,{widgetEventPrefix:a&&o.widgetEventPrefix||t},l,{constructor:s,namespace:u,widgetName:t,widgetFullName:i}),a?(e.each(a._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,s,n._proto)}),delete a._childConstructors):n._childConstructors.push(s),e.widget.bridge(t,s)},e.widget.extend=function(t){for(var n,i,a=r.call(arguments,1),s=0,o=a.length;s<o;s++)for(n in a[s])i=a[s][n],a[s].hasOwnProperty(n)&&void 0!==i&&(e.isPlainObject(i)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],i):e.widget.extend({},i):t[n]=i);return t},e.widget.bridge=function(t,n){var i=n.prototype.widgetFullName||t;e.fn[t]=function(a){var s="string"==typeof a,o=r.call(arguments,1),l=this;return a=!s&&o.length?e.widget.extend.apply(null,[a].concat(o)):a,s?this.each(function(){var n,r=e.data(this,i);return r?e.isFunction(r[a])&&"_"!==a.charAt(0)?(n=r[a].apply(r,o))!==r&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,i);t?t.option(a||{})._init():e.data(this,i,new n(a,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r,i,a,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},t=(r=t.split(".")).shift(),r.length){for(i=s[t]=e.widget.extend({},this.options[t]),a=0;a<r.length-1;a++)i[r[a]]=i[r[a]]||{},i=i[r[a]];if(t=r.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=n}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,a=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,s){function o(){if(t||!0!==a.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?a[s]:s).apply(a,arguments)}"string"!=typeof s&&(o.guid=s.guid=s.guid||o.guid||e.guid++);var l=r.match(/^(\w+)\s*(.*)$/),u=l[1]+a.eventNamespace,c=l[2];c?i.delegate(c,u,o):n.bind(u,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var n=this;return setTimeout(function(){return("string"==typeof e?n[e]:e).apply(n,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,a,s=this.options[t];if(r=r||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(i in a)i in n||(n[i]=a[i]);return this.element.trigger(n,r),!(e.isFunction(s)&&!1===s.apply(this.element[0],[n].concat(r))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,a){"string"==typeof i&&(i={effect:i});var s,o=i?!0===i||"number"==typeof i?n:i.effect||n:t;"number"==typeof(i=i||{})&&(i={duration:i}),s=!e.isEmptyObject(i),i.complete=a,i.delay&&r.delay(i.delay),s&&e.effects&&e.effects.effect[o]?r[t](i):o!==t&&r[o]?r[o](i.duration,i.easing,a):r.queue(function(n){e(this)[t](),a&&a.call(r[0]),n()})}})}(e),e}.apply(t,r))||(e.exports=i)},"j7o/":function(e,t,n){"use strict";var r,i;r=[n("O074"),n("5cge"),n("me3u")],void 0===(i=function(e,t){var n=e(window);function r(t){this.$el=e(t)}function i(e){e.preventDefault()}return r.__reset=function(){t.assign(r,{__active:void 0,__isListening:!1,__zones:[]})},r.__addZone=function(e){r.__zones.push(e),r.__setActive(),r.__startListening()},r.__removeZone=function(e){r.__zones=t.without(r.__zones,e),r.__setActive(),r.__stopListening()},r.__setActive=function(){r.__active=t.last(r.__zones)},r.__startListening=function(){r.__isListening||r.__active&&(r.__startListeningInner(),r.__isListening=!0)},r.__startListeningInner=function(){n.on("keydown",r.__keyDown)},r.__stopListening=function(){r.__isListening&&(r.__active||(r.__stopListeningInner(),r.__isListening=!1))},r.__stopListeningInner=function(){n.off("keydown",r.__keyDown)},r.__keyDown=function(n){var a=r.__active;if(a&&n.keyCode===e.ui.keyCode.TAB){var s=n.target,o=a.$el,l=o.find(":tabbable"),u=l.filter(":first"),c=l.filter(":last");s!==c[0]&&s!==o[0]||n.shiftKey?s!==u[0]&&s!==o[0]||!n.shiftKey?-1===t.indexOf(l,s)&&(u.focus(),i(n)):(c.focus(),i(n)):(u.focus(),i(n))}},t.assign(r.prototype,{activate:function(){return this._recordFocus(),r.__addZone(this),this},deactivate:function(){return r.__removeZone(this),this._restoreFocus(),this},_recordFocus:function(){this.$focus=e(":focus")},_restoreFocus:function(){this.$focus&&this.$focus.length&&this.$focus.focus()}}),r.__reset(),r}.apply(t,r))||(e.exports=i)},jCYH:function(e,t,n){"use strict";var r;void 0===(r=function(){return window.Modernizr}.call(t,n,t,e))||(e.exports=r)},jYw0:function(e,t,n){"use strict";t.__esModule=!0;var r=n("82EY"),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=r.indexOf(i.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=i.lookupLevel(e),"undefined"!=typeof console&&i.lookupLevel(i.level)<=e){var t=i.methodMap[e];console[t]||(t="log");for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];console[t].apply(console,r)}}};t.default=i,e.exports=t.default},jn94:function(e,t,n){"use strict";var r,i;r=[n("O074"),n("fsP3"),n("EFFf")],void 0===(i=function(e,t,n){var r={};function i(i){var a=i&&r[i];return a||(a=function(e){var r,i={publish:e.fire,subscribe:e.add,unsubscribe:e.remove},a=null;return e.add(function(e){a=e}),i.read=function(){return a},i.publishUnique=function(){if(!window.JSON)return n("JSON object not available. You may need to shim it on this client."),!1;var t=Array.prototype.slice.call(arguments,0),i=JSON.stringify(t);i!==r&&(e.fire.apply(e,t),r=i)},i.once=function(){var n=arguments;return e.add(function r(){t(e,n,arguments),e.remove(r)})},i.future=function(){var n,r=arguments,i=!1;return n=e.add(function(){i&&t(e,r,arguments)}),i=!0,n},i}(e.Callbacks("memory")),i&&(r[i]=a)),a}return i._reset=function(){r={}},i}.apply(t,r))||(e.exports=i)},"k+yp":function(e,t,n){"use strict";t.__esModule=!0;var r=n("82EY");t.default=function(e){e.registerHelper("with",function(e,t){r.isFunction(e)&&(e=e.call(this));var n=t.fn;if(r.isEmpty(e))return t.inverse(this);var i=t.data;return t.data&&t.ids&&((i=r.createFrame(t.data)).contextPath=r.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:i,blockParams:r.blockParams([e],[i&&i.contextPath])})})},e.exports=t.default},l3gt:function(e,t,n){"use strict";function r(e){this.string=e}t.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},t.default=r,e.exports=t.default},lDDm:function(e,t,n){"use strict";var r;void 0===(r=function(){return function(e){return window.TED?window.TED[e]:""}}.call(t,n,t,e))||(e.exports=r)},lU1m:function(e,t,n){var r;!function(i){"use strict";var a=function(e,t,n){return 1===arguments.length?a.get(e):a.set(e,t,n)};a._document=document,a._navigator=navigator,a.defaults={path:"/"},a.get=function(e){return a._cachedDocumentCookie!==a._document.cookie&&a._renewCache(),a._cache[e]},a.set=function(e,t,n){return(n=a._getExtendedOptions(n)).expires=a._getExpiresDate(void 0===t?-1:n.expires),a._document.cookie=a._generateCookieString(e,t,n),a},a.expire=function(e,t){return a.set(e,void 0,t)},a._getExtendedOptions=function(e){return{path:e&&e.path||a.defaults.path,domain:e&&e.domain||a.defaults.domain,expires:e&&e.expires||a.defaults.expires,secure:e&&void 0!==e.secure?e.secure:a.defaults.secure}},a._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},a._getExpiresDate=function(e,t){switch(t=t||new Date,typeof e){case"number":e=new Date(t.getTime()+1e3*e);break;case"string":e=new Date(e)}if(e&&!a._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},a._generateCookieString=function(e,t,n){var r=(e=encodeURIComponent(e))+"="+(t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return r+=(n=n||{}).path?";path="+n.path:"",r+=n.domain?";domain="+n.domain:"",r+=n.expires?";expires="+n.expires.toGMTString():"",r+=n.secure?";secure":""},a._getCookieObjectFromString=function(e){for(var t={},n=e?e.split("; "):[],r=0;r<n.length;r++){var i=a._getKeyValuePairFromCookieString(n[r]);void 0===t[i.key]&&(t[i.key]=i.value)}return t},a._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");return t=t<0?e.length:t,{key:decodeURIComponent(e.substr(0,t)),value:decodeURIComponent(e.substr(t+1))}},a._renewCache=function(){a._cache=a._getCookieObjectFromString(a._document.cookie),a._cachedDocumentCookie=a._document.cookie},a._areEnabled=function(){return a._navigator.cookieEnabled||"1"===a.set("cookies.js",1).get("cookies.js")},a.enabled=a._areEnabled(),void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},lzPn:function(e,t,n){"use strict";var r,i;r=[n("MaNa"),n("RjIu")],void 0===(i=function(e,t){return e.extend({className:"Embeddable__ended",events:{"click a.Embeddable__ended__rewatch":function(){this.state.set("rewatchPending",!0)}},propsDefaults:{activated:!1,disableCampaigns:!1,hideNewsletter:!1},propsEvents:{"change:activated":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__ended--activated"),this.state.set("rewatchPending",!1)},"change:disableCampaigns":function(){this.render()},"change:hideNewsletter":function(){this.render()}},stateDefaults:{rewatchPending:!1},stateEvents:{"change:rewatchPending":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__ended--rewatching")}},render:function(){this.$el.html(t(this.props.toJSON()))}})}.apply(t,r))||(e.exports=i)},m8S9:function(e,t,n){"use strict";var r,i;r=[n("MaNa")],void 0===(i=function(e){return e.extend({className:"Embeddable__canonball ted-logo",tagName:"a",attributes:{href:"#",target:"_blank"},propsDefaults:{enabled:!1,visible:!1,url:"https://www.ted.com/"},propsEvents:{"change:url":"render","change:enabled":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__canonball--enabled")},"change:visible":function(e,t){this.$el[t?"addClass":"removeClass"]("Embeddable__canonball--visible")}},render:function(){var e=this.props.get("url")||this.propsDefaults.url;this.$el.attr("href",e)}})}.apply(t,r))||(e.exports=i)},me3u:function(e,t,n){var r,i;r=[n("O074")],void 0===(i=function(e){return function(e,t){var n=0,r=/^ui-id-\d+$/;function i(t,n){var r,i,s,o=t.nodeName.toLowerCase();return"area"===o?(i=(r=t.parentNode).name,!(!t.href||!i||"map"!==r.nodeName.toLowerCase())&&(!!(s=e("img[usemap=#"+i+"]")[0])&&a(s))):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o&&t.href||n)&&a(t)}function a(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"@VERSION",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,r){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,r,i=e(this[0]);i.length&&i[0]!==document;){if(("absolute"===(n=i.css("position"))||"relative"===n||"fixed"===n)&&(r=parseInt(i.css("zIndex"),10),!isNaN(r)&&0!==r))return r;i=i.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){var r="Width"===n?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};function s(t,n,i,a){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}e.fn["inner"+n]=function(t){return void 0===t?a["inner"+n].call(this):this.each(function(){e(this).css(i,s(this,t)+"px")})},e.fn["outer"+n]=function(t,r){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(i,s(this,t,!0,r)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,a=e.ui[t].prototype;for(i in r)a.plugins[i]=a.plugins[i]||[],a.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(i&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var r,i=n&&"left"===n?"scrollLeft":"scrollTop";return t[i]>0||(t[i]=1,r=t[i]>0,t[i]=0,r)}})}(e),e}.apply(t,r))||(e.exports=i)},meAz:function(e,t,n){"use strict";var r,i;r=[n("lU1m")],void 0===(i=function(e){return{get:function(){return e.get("_ted_user_id")}}}.apply(t,r))||(e.exports=i)},mp5j:function(e,t,n){e.exports=n("Jikt").default},nDlD:function(e,t,n){"use strict";var r;void 0===(r=function(){return function(e,t){return function(n,r){this.toggleClass(e,t,r)}}}.call(t,n,t,e))||(e.exports=r)},nLfs:function(e,t,n){"use strict";var r,i;r=[n("O074"),n("qri/"),n("QjU5")],void 0===(i=function(e,t){return e.widget("ted.scrubber",e.ted.slider,{options:{duration:null,player:null},_isScrubbing:!1,_isSeeking:!1,_progress:0,_create:function(){this.options.player&&this._setPlayer(),this.playheadElement=e("<div class=scrubber__playhead></div>").prependTo(this.element),this._super(),this.element.addClass("scrubber"),this.cursorElement.addClass("scrubber__cursor"),this.progressElement.addClass("scrubber__progress"),this._on(this._handleEvents)},_getData:function(t){return e.extend({cursor:t.value*this.options.duration,playhead:this._progress*this.options.duration,progress:this._progress,duration:this.options.duration},t)},_handleEvents:{mouseover:function(){this.element.addClass("scrubber--hover")},mouseout:function(){this.element.removeClass("scrubber--hover")},scrubberstart:function(){this.element.addClass("scrubber--active"),this._isScrubbing=!0},scrubberstop:function(){this.element.removeClass("scrubber--active"),this._isScrubbing=!1}},_setOption:function(e,t){this._super(e,t),"duration"===e&&this.progress(this._getData({value:this._progress}).playhead/t)},_setPlayer:function(){var n=this,r=e(this.options.player),i=r.player("talk");this.option("duration",i.duration),this._on({scrubberchange:function(e,n){r.player("seek",n.cursor),t.sendEvent("player","seek","scrubber",Math.round(n.cursor))}}),r.on("playertalk",function(e,t){n.option("duration",t.duration),n.progress(0)}).on("playerduration",function(e,t){n.option("duration",t.duration)}).on("playerseeking",function(){n._isSeeking=!0}).on("playerseeked",function(){n._isSeeking=!1}).on("playerprogress",function(e,t){n.progress(t.progress)})},isSeeking:function(e){return arguments.length&&(this._isSeeking=!!e),this._isScrubbing||this._isSeeking},progress:function(e){if(arguments.length){var t=100*e+"%";this.progressElement&&!this.isSeeking()&&this.progressElement.width(t),this.playheadElement&&this.playheadElement.width(t),this._progress=e,this._trigger("progress",null,this._getData({value:e}))}return this._progress}}),function(t,n){return e(t).scrubber(n)}}.apply(t,r))||(e.exports=i)},npc9:function(e,t,n){"use strict";var r;void 0===(r=function(){var e=/Android/g,t=/(iPad|iPhone|iPod)/g;function n(){return n.isIOS()||n.isAndroid()}function r(e){return!!n.ua.match(e)}return n.isIOS=function(){return r(t)},n.isAndroid=function(){return r(e)},n.ua=window.navigator&&window.navigator.userAgent||"",n}.apply(t,[]))||(e.exports=r)},pCvA:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"qri/":function(e,t,n){"use strict";var r,i;r=[n("O074"),n("5cge"),n("Qp3a"),n("lDDm"),n("aJwO"),n("awRL"),n("DGZq"),n("meAz"),n("MgNp"),n("jn94"),n("OXOu"),n("EUOL")],void 0===(i=function(e,t,n,r,i,a,s,o,l,u,c){var d=[],h=window,f=[];function p(){var t=h[h.GoogleAnalyticsObject]||e.noop,n=d.slice.call(arguments);t===h.__gaIn||42===t.answer?t.apply(h,n):f.push(n)}function g(){var e=d.slice.call(arguments),r=this;return function(i){if(r.apply(p,e),t.has(i,"originalEvent")&&t.has(this,"nodeName")&&"click"===i.type)return n.call(this,i)}}function v(e){return e||window.location&&location.pathname+location.search||location.href.replace(/^[^/]*\/\/[^/]+/,"")}return t.assign(p,{send:t.partial(p,"send"),set:t.partial(p,"set"),sendEvent:t.partial(p,"send","event"),sendEventViaBeacon:t.partialRight(t.partial(p,"send","event"),{transport:"beacon"}),sendSocial:t.partial(p,"send","social"),sendNonInteraction:t.partialRight(t.partial(p,"send","event"),{nonInteraction:1})},function(e,t){return t.recall=g,t}),p.sendFlaggedVirtualPageview=function(e){var t=v(e);p.set("page",t+(-1===t.indexOf("?")?"?":"&")+"vp="),p.send("pageview")},p.sendVirtualPageview=function(e){p.set("page",v(e)),p.send("pageview")},p.sendTiming=function(e,n,a,s){if(t.isUndefined(a)&&(a=new Date),a&&a.constructor===Date){var o=r("headReady");if(o&&o.constructor!==Date)return void i.log("GA: headReady timing is missing");a=+a-+o}p("send","timing",e,n,a,s)},p.setContext=function(e,t){l.set(e,t)},p.setDimension=function(e,t){var n=String(e);n.match(/^dimension\d+$/)||(n=(r("gaDimensions")||{})[n]),n?p.set(n,t):i.log('GA: missing dimension: "'+e+'"')},h.setTimeout(function(){h[h.GoogleAnalyticsObject]},500),p(function(e){var t=e.get("buildHitTask");t&&e.set("buildHitTask",function(e){return t(function(e){var t=e&&e.get&&e.get("hitType"),n=l.get();return"pageview"===t&&n&&p.setDimension("sourceContext",n),e}(e))})}),function(){var e,t=0;u("breakpoint").subscribe(function(n){p.setDimension("breakpoint",n),t++&&p.sendEvent("breakpoint","change",e+"|"+n,t),e=n})}(),function(){var e=s.getClientId();e&&p.setDimension("gaClientId",e);var t=o.get()||a.getUserTedIdFromExplore();t&&p.setDimension("tedUserId",t);var n=a.getNormalized();p.setDimension("exploreState",n),u("auth.login").subscribe(function(e){p.setDimension("tedUserId",e.id)});var r=c("exploreCTASource");r&&p.setDimension("exploreCTASource",r)}(),p.send("pageview"),e(function(){e(document).on("click","a.ga-link",n(function(){return function(t){var n=e(this),r=e.extend(t||{},{category:n.data("ga-category"),action:n.data("ga-action"),label:n.data("ga-label")});p.sendEvent(r.category,r.action,r.label);var i=n.data("ga-context");i&&p.setContext(n.attr("href"),i)}.call(this,{action:"click",category:"site.link",label:this.href}),50}))}),p}.apply(t,r))||(e.exports=i)},"rc+f":function(e,t,n){"use strict";var r,i;r=[n("O074"),n("5cge"),n("Wd7D"),n("aJwO"),n("npc9")],void 0===(i=function(e,t,n,r,i){function a(e){return t.isUndefined(e)?"":e>9999?"9999":(e<0?"-":"")+("0000"+Math.floor(Math.abs(e))).slice(-4)+(""+e%1).slice(1,6)}function s(e){return t.isUndefined(e)?"":e}function o(e,n){return-1!==e&&!t.isUndefined(e)&&!t.isUndefined(n)&&e!==n&&(-1===n?"dynamic":n>e?"up":"down")}function l(e){this._widget=e,this._resetMarks(),this._addHandlers()}return l.prototype._log=function(t){var o="unknown";this.marks.talkComplete?o="complete":this.marks.playable?o="playable":!1===this.marks.playable&&(o="unplayable");var l,u="unknown";this.marks.rebuffering?u="rebuffering":this.marks.buffering&&(u="buffering"),"unplayable"===o&&this.marks.bufferingStarted&&this.marks.requested&&this.marks.bufferingStarted>this.marks.requested&&(l=(+new Date-+this.marks.bufferingStarted)/1e3);var c=e.extend({context:"ted-com-player-qa",pev:"014",playerMode:this._widget.mode(),bufferState:o,bufferType:u,bufferDuration:a(l),bufferFuture:a(this.marks.bufferFuture),bufferPast:a(this.marks.bufferPast),intolerantBufferFuture:a(this.marks.intolerantBufferFuture),intolerantBufferPast:a(this.marks.intolerantBufferPast),currentTime:a(this.marks.currentTime),playbackRate:this._widget.playbackRate(),playToken:s(this.marks.playToken),levelCurrent:s(this.marks.levelCurrent),levelNext:s(this.marks.levelNext),levelLoad:s(this.marks.levelLoad),levelNextLoad:s(this.marks.levelNextLoad),deviceType:i()?"mobile":"desktop",error:!1,throttled:!1,talkId:this.marks.talkId,message:"Video QA Event",multiple:!1},t||{});if(c.multiple||!this.marks[c.message]){this.marks[c.message]=!0;var d=n.getVariation("html5_video");if("desktop"===c.deviceType){switch(c.hvv=d,d){case"a":if("flash"!==c.playerMode)return;break;case"b":case"c":case"d":if("hlsjs"!==c.playerMode)return;break;default:return}delete c.multiple,r.log(c.message,c)}}},l.prototype._resetMarks=function(){this.marks={currentTime:"",talkId:""}},l.prototype._addHandlers=function(){var e=this;function t(){e.marks.playable&&e.marks.started&&e._log({message:"Play Start"})}var n={playercurrenttime:function(t,n){e.marks.currentTime=n.currentTime},playertalk:function(t,n){e.marks.talkId=n.id},playerbufferunplayable:function(){e.marks.playable=!1,e.marks.bufferingStarted=new Date},playerbufferplayable:function(){e.marks.playable=!0,e.marks.bufferingStarted=null,e.marks.buffering=!1,e.marks.rebuffering=!1,t()},playerplaytoken:function(t,n){e.marks.playToken=n.playToken},playerprolongedbuffer:function(t,n){var r=n.duration;e.marks.buffering=!0,!e.marks.talkComplete&&r&&r%2e3&&e._log({message:"Prolonged Buffer: "+r})},playerprolongedrebuffer:function(t,n){var r=n.duration;e.marks.rebuffering=!0,!e.marks.talkComplete&&r&&r%2e3&&e._log({message:"Prolonged Rebuffer: "+r})},playererror:function(t,n){n.error&&"Error playing video"===n.error.message&&3===n.error.code&&e._log({message:"Decode Error"})},playermetricsdata:function(t,n){if(n&&n.metricsData){var r=n.metricsData,i=e.marks.levelLoad,a=e.marks.levelNextLoad;e.marks.bandwidth=r.bandwidth,e.marks.bufferFuture=r.bufferLength,e.marks.bufferPast=r.backBufferLength,e.marks.intolerantBufferFuture=r.intolerantBufferLength,e.marks.intolerantBufferPast=r.intolerantBackBufferLength,e.marks.levelCurrent=r.currentLevel,e.marks.levelNext=r.nextLevel,e.marks.levelLoad=r.loadLevel,e.marks.levelNextLoad=r.nextLoadLevel;var s=o(a,r.nextLoadLevel);s&&e._log({multiple:!0,message:"Load Level Switching",levelDirection:s});var l=o(i,r.loadLevel);l&&e._log({multiple:!0,message:"Load Level Switched",levelDirection:l})}},playerrequestplay:function(){e.marks.requested=e.marks.requested||new Date,e._log({message:"Play Request"})},playerplay:function(){e.marks.started=!0,t()},playertalkcomplete:function(){e.marks.talkComplete=!0,e._log({message:"Talk Complete"})}};e._widget._on(n),e._widget._on(window,{beforeunload:function(){e.marks.requested&&e._log({message:"Talk Exit"})}})},l}.apply(t,r))||(e.exports=i)},sDZe:function(e,t,n){"use strict";var r,i;r=[n("ELgS"),n("1Jdc")],void 0===(i=function(e,t){e({q:window._q,modules:{embeddable:t}})}.apply(t,r))||(e.exports=i)},sv2i:function(e,t,n){"use strict";var r,i;r=[n("d6sQ"),n("1TA+"),n("nLfs")],void 0===(i=function(e,t){return e.extend({className:"Embeddable__expandable Embeddable__volume",propsDefaults:{level:.5,muted:!1},propsEvents:{"change:level":"renderLevel","change:muted":"renderMuted"},initialize:function(){this.adoptView(e),this.initializeProps(),this.initializeState()},render:function(){return this.$el.html(t()),this.renderLevel(),this.find("div.Embeddable__volume__slider").scrubber({orientation:"vertical"}),this},renderLevel:function(){this.find("div.Embeddable__volume__meter__level").height(100*this.props.get("level")+"%")},renderMuted:function(){this.$el[this.props.get("muted")?"addClass":"removeClass"]("Embeddable__volume--muted")}})}.apply(t,r))||(e.exports=i)},twGK:function(e,t,n){"use strict";var r,i;r=[n("5cge"),n("jCYH"),n("qri/")],void 0===(i=function(e,t,r){function i(e){this._data={currentPlayerTime:null,hasPlayed:!1,hasRequested:!1,lastPlayedTalkId:null,lastChangedTalkId:null,lastLanguageCode:null,marks:null,markableProgress:[25,50,75,95],markableTimes:[10,30],postRolling:!1},this._widget=e,this._resetMarks(),this._addHandlers()}return i.prototype._resetMarks=function(){this._data.marks={times:{},progress:{},ads:{}}},i.prototype._incrementTalkViews=function(){var e=n("lU1m").get("__utma");if(e&&t.localstorage){var i=+e.split(".").pop(),a=window.localStorage,s=(a.getItem("talkViews")||"").split("|");2===s.length&&+s[0]===i?s[1]=+s[1]+1:s=[i,1],a.setItem("talkViews",s.join("|")),r.set("metric1",s[1])}},i.prototype._onTalkChange=function(){this._data.postRolling=!1,this._resetMarks(),this._incrementTalkViews()},i.prototype._addHandlers=function(){var e=this,t={playererror:function(e,t){var n=t.error,i="abortive"===n.severity;(i||"fatal"===n.severity)&&r.sendEvent("player",i?"error.abort":"error.fatal",n.message)},playerprolongedrebuffer:function(e,t){t.duration&&t.duration%2e3&&r.sendEvent("player.talk","prolongedRebuffer",t.duration)},playerenterfullscreen:function(){r.sendEvent("player","enterFullScreen"),r.setDimension("playerPresentation","fullscreen")},playerexitfullscreen:function(){r.sendEvent("player","exitFullScreen"),r.setDimension("playerPresentation","inline")},playerplay:function(){r.sendEvent("player","start",e._data.hasPlayed?"subsequent":"initial"),e._data.hasPlayed=!0},playerplaybackrate:function(e,t){r.sendEvent("player","playbackRate",t.playbackRate),r.setDimension("playbackRate",t.playbackRate)},playerplaytoken:function(e,t){r.setDimension("playToken",t.playToken)},playerpause:function(){r.sendEvent("player","pause",Math.round(e._data.currentPlayerTime))},playerpopout:function(e,t){r.sendEvent("player","popOut",t.popOut?"on":"off")},playerready:function(){var t=e._widget.mode();r.sendEvent("player","initialize",t,{nonInteraction:1}),r.setDimension("playerMode",t),r.setDimension("playerPresentation","inline")},playerrequestnext:function(){r.sendEvent("player","next",e._data.postRolling?"postroll":"talk")},playerrequestplay:function(){r.sendEvent("player","request",e._data.hasRequested?"subsequent":"initial"),e._data.hasRequested=!0},playerprogress:function(t,n){var i=100*n.progress,a=0,s=-1,o=e._data.markableProgress.length;if(!e._widget.player.postrolling)for(;e._data.marks&&++s<o&&a<i;)i>=(a=e._data.markableProgress[s])&&!e._data.marks.progress[a]&&(e._data.currentPlayerTime>e._widget.options.startTrackingAt&&r.sendEvent("player","progressPct",a+"%"),e._data.marks.progress[a]=!0)},playertalkcomplete:function(){e._data.marks&&!e._data.marks.progress[100]&&(r.sendEvent("player","progressPct","100%"),e._data.marks.progress[100]=!0,r.sendEvent("player.talk","complete",e._widget.options.currentTalk.id))},playercurrenttime:function(t,n){var i=n.currentTime,a=0,s=-1,o=e._data.markableTimes.length;if(e._data.currentPlayerTime=i,!e._widget.player.postrolling)for(;e._data.marks&&++s<o&&a<i;)i>=(a=e._data.markableTimes[s])&&!e._data.marks.times[a]&&(a>e._widget.options.startTrackingAt&&r.sendEvent("player","progressTime",a+" seconds"),e._data.marks.times[a]=!0)},playerprerollstart:function(){e._data.marks&&!e._data.marks.ads.prerollStart&&(r.sendEvent("player.preRoll","adStart"),e._data.marks.ads.prerollStart=!0)},playerprerollcomplete:function(){e._data.marks&&!e._data.marks.ads.prerollComplete&&(r.sendEvent("player.preRoll","adComplete"),e._data.marks.ads.prerollComplete=!0)},playertedstart:function(){var t=e._widget.options.currentTalk.id;t&&e._data.marks&&!e._data.marks.ads.tedStart&&(r.sendEvent("player.talk","start",t),e._data.marks.ads.tedStart=!0)},playerpostrollstart:function(){e._data.postRolling=!0,e._data.marks&&!e._data.marks.ads.postrollStart&&(r.sendEvent("player.postRoll","adStart"),e._data.marks.ads.postrollStart=!0)},playerpostrollcomplete:function(){e._data.postRolling=!1,e._data.marks&&!e._data.marks.ads.postrollComplete&&(r.sendEvent("player.postRoll","adComplete"),e._data.marks.ads.postrollStart=!0)},playeradblock:function(){r.sendEvent("player","adBlock")},playersubtitle:function(t,n){var i=String(n.subtitle&&n.subtitle.languageCode);i!==e._data.lastLanguageCode&&(i?r.sendEvent("player.subtitle","setLanguage",i):r.sendEvent("player.subtitle","disabled")),e._data.lastLanguageCode=i},playertalk:function(t,n){var r=n.id;e._data.lastChangedTalkId!==r&&(e._onTalkChange(),e._data.lastChangedTalkId=r)}};this._handlers=t,this._widget._on(t)},i}.apply(t,r))||(e.exports=i)},v4rn:function(e,t,n){},yAjw:function(e,t,n){"use strict";var r,i;r=[n("O074"),n("Jg3A")],void 0===(i=function(e,t){return t.$=e,t}.apply(t,r))||(e.exports=i)},yCnj:function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({1:function(e,t,r,i,a){return'    <span class="thumb__duration">\n      '+e.escapeExpression(function(e){return e&&(e.__esModule?e.default:e)}(n("/xml")).call(null!=t?t:e.nullContext||{},null!=t?t.playDuration:t,{name:"formatDuration",hash:{},data:a}))+"\n    </span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var a,s=e.lambda,o=e.escapeExpression;return'\n<span class="thumb thumb--'+o(s(null!=t?t.ratio:t,t))+" "+o(s(null!=t?t.cropClass:t,t))+'">\n  <span class="thumb__sizer"><span class="thumb__tugger"><img src="'+o(s(null!=t?t.src:t,t))+'" class="thumb__image" alt=""><span class="thumb__aligner"></span></span></span>\n\n'+(null!=(a=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.playDuration:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+"</span>\n"},useData:!0})},"z/83":function(e,t,n){"use strict";var r,i;r=[n("5cge"),n("yAjw"),n("HQPd")],void 0===(i=function(e,t,n){return t.Collection.extend({model:n,before:function(e){return this.at(this.indexOf(e)-1)},after:function(e){return this.at(this.indexOf(e)+1)},toPlayer:function(){return this.map(function(e){return e.toPlayer()})}})}.apply(t,r))||(e.exports=i)}},[[10,"manifest"]]]);